{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"Reference \"},{\"url\":\"#forwardref\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef(render)\"}],\" \"]},{\"url\":\"#render-function\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"render\"}],\" function \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"Usage \"},{\"url\":\"#exposing-a-dom-node-to-the-parent-component\",\"depth\":3,\"text\":\"Exposing a DOM node to the parent component \"},{\"url\":\"#forwarding-a-ref-through-multiple-components\",\"depth\":3,\"text\":\"Forwarding a ref through multiple components \"},{\"url\":\"#exposing-an-imperative-handle-instead-of-a-dom-node\",\"depth\":3,\"text\":\"Exposing an imperative handle instead of a DOM node \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"Troubleshooting \"},{\"url\":\"#my-component-is-wrapped-in-forwardref-but-the-ref-to-it-is-always-null\",\"depth\":3,\"text\":[\"My component is wrapped in \",[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\", but the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" to it is always \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\" \"]}]","content":"[[\"$r\",\"MaxWidth\",\"68\",{\"children\":[[\"$r\",\"Deprecated\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"In React 19, \",[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" is no longer necessary. Pass \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" as a prop instead.\"]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" will deprecated in a future release. Learn more \",[\"$r\",\"a\",null,{\"href\":\"/blog/2024/04/25/react-19#ref-as-a-prop\",\"children\":\"here\"}],\".\"]}]]}],\"\\n\",[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" lets your component expose a DOM node to parent component with a \",[\"$r\",\"a\",null,{\"href\":\"/learn/manipulating-the-dom-with-refs\",\"children\":\"ref.\"}]]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const SomeComponent = forwardRef(render)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"Reference \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"forwardref\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef(render)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"forwardRef()\"}],\" to let your component receive a ref and forward it to a child component:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  // ...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"See more examples below.\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"render\"}],\": The render function for your component. React calls this function with the props and \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" that your component received from its parent. The JSX you return will be the output of your component.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" returns a React component that you can render in JSX. Unlike React components defined as plain functions, a component returned by \",[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" is also able to receive a \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" prop.\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"Caveats \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"In Strict Mode, React will \",[\"$r\",\"strong\",null,{\"children\":\"call your render function twice\"}],\" in order to \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#my-initializer-or-updater-function-runs-twice\",\"children\":\"help you find accidental impurities.\"}],\" This is development-only behavior and does not affect production. If your render function is pure (as it should be), this should not affect the logic of your component. The result from one of the calls will be ignored.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"render-function\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"render\"}],\" function \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" accepts a render function as an argument. React calls this function with \",[\"$r\",\"code\",null,{\"children\":\"props\"}],\" and \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const MyInput = forwardRef(function MyInput(props, ref) {\\n  return (\\n    <label>\\n      {props.label}\\n      <input ref={ref} />\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"render-parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"props\"}],\": The props passed by the parent component.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"ref\"}],\":  The \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" attribute passed by the parent component. The \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" can be an object or a function. If the parent component has not passed a ref, it will be \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\". You should either pass the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" you receive to another component, or pass it to \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useImperativeHandle\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useImperativeHandle\"}],\".\"]}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"render-returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" returns a React component that you can render in JSX. Unlike React components defined as plain functions, the component returned by \",[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\" is able to take a \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" prop.\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"Usage \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"exposing-a-dom-node-to-the-parent-component\",\"children\":\"Exposing a DOM node to the parent component \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"By default, each component’s DOM nodes are private. However, sometimes it’s useful to expose a DOM node to the parent—for example, to allow focusing it. To opt in, wrap your component definition into \",[\"$r\",\"code\",null,{\"children\":\"forwardRef()\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,11}\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  const { label, ...otherProps } = props;\\n  return (\\n    <label>\\n      {label}\\n      <input {...otherProps} />\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You will receive a \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"ref\"}],\" as the second argument after props. Pass it to the DOM node that you want to expose:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{8} [[1, 3, \\\"ref\\\"], [1, 8, \\\"ref\\\", 30]]\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  const { label, ...otherProps } = props;\\n  return (\\n    <label>\\n      {label}\\n      <input {...otherProps} ref={ref} />\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This lets the parent \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component access the \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\" DOM node\"]}],\" exposed by \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 2, \\\"ref\\\"], [1, 10, \\\"ref\\\", 41], [2, 5, \\\"ref.current\\\"]]\",\"children\":\"function Form() {\\n  const ref = useRef(null);\\n\\n  function handleClick() {\\n    ref.current.focus();\\n  }\\n\\n  return (\\n    <form>\\n      <MyInput label=\\\"Enter your name:\\\" ref={ref} />\\n      <button type=\\\"button\\\" onClick={handleClick}>\\n        Edit\\n      </button>\\n    </form>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useRef#manipulating-the-dom-with-a-ref\",\"children\":\"passes a ref\"}],\" to \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\". The \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" component \",[\"$r\",\"em\",null,{\"children\":\"forwards\"}],\" that ref to the \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\" browser tag. As a result, the \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component can access that \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\" DOM node and call \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"focus()\"}]}],\" on it.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Keep in mind that exposing a ref to the DOM node inside your component makes it harder to change your component’s internals later. You will typically expose DOM nodes from reusable low-level components like buttons or text inputs, but you won’t do it for application-level components like an avatar or a comment.\"}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"Examples of forwarding a ref\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"focusing-a-text-input\",\"children\":\"Focusing a text input \"}],[\"$r\",\"p\",null,{\"children\":[\"Clicking the button will focus the input. The \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component defines a ref and passes it to the \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" component. The \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" component forwards that ref to the browser \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\". This lets the \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component focus the \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\".\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\nimport MyInput from './MyInput.js';\\n\\nexport default function Form() {\\n  const ref = useRef(null);\\n\\n  function handleClick() {\\n    ref.current.focus();\\n  }\\n\\n  return (\\n    <form>\\n      <MyInput label=\\\"Enter your name:\\\" ref={ref} />\\n      <button type=\\\"button\\\" onClick={handleClick}>\\n        Edit\\n      </button>\\n    </form>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/MyInput.js\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  const { label, ...otherProps } = props;\\n  return (\\n    <label>\\n      {label}\\n      <input {...otherProps} ref={ref} />\\n    </label>\\n  );\\n});\\n\\nexport default MyInput;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input {\\n  margin: 5px;\\n}\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"playing-and-pausing-a-video\",\"children\":\"Playing and pausing a video \"}],[\"$r\",\"p\",null,{\"children\":[\"Clicking the button will call \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"play()\"}]}],\" and \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"pause()\"}]}],\" on a \",[\"$r\",\"code\",null,{\"children\":\"<video>\"}],\" DOM node. The \",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" component defines a ref and passes it to the \",[\"$r\",\"code\",null,{\"children\":\"MyVideoPlayer\"}],\" component. The \",[\"$r\",\"code\",null,{\"children\":\"MyVideoPlayer\"}],\" component forwards that ref to the browser \",[\"$r\",\"code\",null,{\"children\":\"<video>\"}],\" node. This lets the \",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" component play and pause the \",[\"$r\",\"code\",null,{\"children\":\"<video>\"}],\".\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\nimport MyVideoPlayer from './MyVideoPlayer.js';\\n\\nexport default function App() {\\n  const ref = useRef(null);\\n  return (\\n    <>\\n      <button onClick={() => ref.current.play()}>\\n        Play\\n      </button>\\n      <button onClick={() => ref.current.pause()}>\\n        Pause\\n      </button>\\n      <br />\\n      <MyVideoPlayer\\n        ref={ref}\\n        src=\\\"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4\\\"\\n        type=\\\"video/mp4\\\"\\n        width=\\\"250\\\"\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/MyVideoPlayer.js\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst VideoPlayer = forwardRef(function VideoPlayer({ src, type, width }, ref) {\\n  return (\\n    <video width={width} ref={ref}>\\n      <source\\n        src={src}\\n        type={type}\\n      />\\n    </video>\\n  );\\n});\\n\\nexport default VideoPlayer;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-bottom: 10px; margin-right: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"84\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"forwarding-a-ref-through-multiple-components\",\"children\":\"Forwarding a ref through multiple components \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Instead of forwarding a \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" to a DOM node, you can forward it to your own component like \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,5}\",\"children\":\"const FormField = forwardRef(function FormField(props, ref) {\\n  // ...\\n  return (\\n    <>\\n      <MyInput ref={ref} />\\n      ...\\n    </>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If that \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" component forwards a ref to its \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\", a ref to \",[\"$r\",\"code\",null,{\"children\":\"FormField\"}],\" will give you that \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5,10}\",\"children\":\"function Form() {\\n  const ref = useRef(null);\\n\\n  function handleClick() {\\n    ref.current.focus();\\n  }\\n\\n  return (\\n    <form>\\n      <FormField label=\\\"Enter your name:\\\" ref={ref} isRequired={true} />\\n      <button type=\\\"button\\\" onClick={handleClick}>\\n        Edit\\n      </button>\\n    </form>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" component defines a ref and passes it to \",[\"$r\",\"code\",null,{\"children\":\"FormField\"}],\". The \",[\"$r\",\"code\",null,{\"children\":\"FormField\"}],\" component forwards that ref to \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\", which forwards it to a browser \",[\"$r\",\"code\",null,{\"children\":\"<input>\"}],\" DOM node. This is how \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" accesses that DOM node.\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\nimport FormField from './FormField.js';\\n\\nexport default function Form() {\\n  const ref = useRef(null);\\n\\n  function handleClick() {\\n    ref.current.focus();\\n  }\\n\\n  return (\\n    <form>\\n      <FormField label=\\\"Enter your name:\\\" ref={ref} isRequired={true} />\\n      <button type=\\\"button\\\" onClick={handleClick}>\\n        Edit\\n      </button>\\n    </form>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/FormField.js\",\"children\":\"import { forwardRef, useState } from 'react';\\nimport MyInput from './MyInput.js';\\n\\nconst FormField = forwardRef(function FormField({ label, isRequired }, ref) {\\n  const [value, setValue] = useState('');\\n  return (\\n    <>\\n      <MyInput\\n        ref={ref}\\n        label={label}\\n        value={value}\\n        onChange={e => setValue(e.target.value)} \\n      />\\n      {(isRequired && value === '') &&\\n        <i>Required</i>\\n      }\\n    </>\\n  );\\n});\\n\\nexport default FormField;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/MyInput.js\",\"children\":\"import { forwardRef } from 'react';\\n\\nconst MyInput = forwardRef((props, ref) => {\\n  const { label, ...otherProps } = props;\\n  return (\\n    <label>\\n      {label}\\n      <input {...otherProps} ref={ref} />\\n    </label>\\n  );\\n});\\n\\nexport default MyInput;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input, button {\\n  margin: 5px;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"100\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"exposing-an-imperative-handle-instead-of-a-dom-node\",\"children\":\"Exposing an imperative handle instead of a DOM node \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Instead of exposing an entire DOM node, you can expose a custom object, called an \",[\"$r\",\"em\",null,{\"children\":\"imperative handle,\"}],\" with a more constrained set of methods. To do this, you’d need to define a separate ref to hold the DOM node:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,6}\",\"children\":\"const MyInput = forwardRef(function MyInput(props, ref) {\\n  const inputRef = useRef(null);\\n\\n  // ...\\n\\n  return <input {...props} ref={inputRef} />;\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Pass the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" you received to \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useImperativeHandle\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useImperativeHandle\"}]}],\" and specify the value you want to expose to the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6-15}\",\"children\":\"import { forwardRef, useRef, useImperativeHandle } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  const inputRef = useRef(null);\\n\\n  useImperativeHandle(ref, () => {\\n    return {\\n      focus() {\\n        inputRef.current.focus();\\n      },\\n      scrollIntoView() {\\n        inputRef.current.scrollIntoView();\\n      },\\n    };\\n  }, []);\\n\\n  return <input {...props} ref={inputRef} />;\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If some component gets a ref to \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\", it will only receive your \",[\"$r\",\"code\",null,{\"children\":\"{ focus, scrollIntoView }\"}],\" object instead of the DOM node. This lets you limit the information you expose about your DOM node to the minimum.\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\nimport MyInput from './MyInput.js';\\n\\nexport default function Form() {\\n  const ref = useRef(null);\\n\\n  function handleClick() {\\n    ref.current.focus();\\n    // This won't work because the DOM node isn't exposed:\\n    // ref.current.style.opacity = 0.5;\\n  }\\n\\n  return (\\n    <form>\\n      <MyInput placeholder=\\\"Enter your name\\\" ref={ref} />\\n      <button type=\\\"button\\\" onClick={handleClick}>\\n        Edit\\n      </button>\\n    </form>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/MyInput.js\",\"children\":\"import { forwardRef, useRef, useImperativeHandle } from 'react';\\n\\nconst MyInput = forwardRef(function MyInput(props, ref) {\\n  const inputRef = useRef(null);\\n\\n  useImperativeHandle(ref, () => {\\n    return {\\n      focus() {\\n        inputRef.current.focus();\\n      },\\n      scrollIntoView() {\\n        inputRef.current.scrollIntoView();\\n      },\\n    };\\n  }, []);\\n\\n  return <input {...props} ref={inputRef} />;\\n});\\n\\nexport default MyInput;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input {\\n  margin: 5px;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/react/useImperativeHandle\",\"children\":\"Read more about using imperative handles.\"}]}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Do not overuse refs.\"}],\" You should only use refs for \",[\"$r\",\"em\",null,{\"children\":\"imperative\"}],\" behaviors that you can’t express as props: for example, scrolling to a node, focusing a node, triggering an animation, selecting text, and so on.\"]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"If you can express something as a prop, you should not use a ref.\"}],\" For example, instead of exposing an imperative handle like \",[\"$r\",\"code\",null,{\"children\":\"{ open, close }\"}],\" from a \",[\"$r\",\"code\",null,{\"children\":\"Modal\"}],\" component, it is better to take \",[\"$r\",\"code\",null,{\"children\":\"isOpen\"}],\" as a prop like \",[\"$r\",\"code\",null,{\"children\":\"<Modal isOpen={isOpen} />\"}],\". \",[\"$r\",\"a\",null,{\"href\":\"/learn/synchronizing-with-effects\",\"children\":\"Effects\"}],\" can help you expose imperative behaviors via props.\"]}]]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"Troubleshooting \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"my-component-is-wrapped-in-forwardref-but-the-ref-to-it-is-always-null\",\"children\":[\"My component is wrapped in \",[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}],\", but the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" to it is always \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This usually means that you forgot to actually use the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" that you received.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"For example, this component doesn’t do anything with its \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1}\",\"children\":\"const MyInput = forwardRef(function MyInput({ label }, ref) {\\n  return (\\n    <label>\\n      {label}\\n      <input />\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To fix it, pass the \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" down to a DOM node or another component that can accept a ref:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,5}\",\"children\":\"const MyInput = forwardRef(function MyInput({ label }, ref) {\\n  return (\\n    <label>\\n      {label}\\n      <input ref={ref} />\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"code\",null,{\"children\":\"ref\"}],\" to \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" could also be \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\" if some of the logic is conditional:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,5}\",\"children\":\"const MyInput = forwardRef(function MyInput({ label, showInput }, ref) {\\n  return (\\n    <label>\\n      {label}\\n      {showInput && <input ref={ref} />}\\n    </label>\\n  );\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If \",[\"$r\",\"code\",null,{\"children\":\"showInput\"}],\" is \",[\"$r\",\"code\",null,{\"children\":\"false\"}],\", then the ref won’t be forwarded to any node, and a ref to \",[\"$r\",\"code\",null,{\"children\":\"MyInput\"}],\" will remain empty. This is particularly easy to miss if the condition is hidden inside another component, like \",[\"$r\",\"code\",null,{\"children\":\"Panel\"}],\" in this example:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5,7}\",\"children\":\"const MyInput = forwardRef(function MyInput({ label, showInput }, ref) {\\n  return (\\n    <label>\\n      {label}\\n      <Panel isExpanded={showInput}>\\n        <input ref={ref} />\\n      </Panel>\\n    </label>\\n  );\\n});\\n\"}]}]]}]]","meta":{"title":"forwardRef"},"languages":null},"__N_SSG":true}
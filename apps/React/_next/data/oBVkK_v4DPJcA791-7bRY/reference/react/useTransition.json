{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"Reference \"},{\"url\":\"#usetransition\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"useTransition()\"}],\" \"]},{\"url\":\"#starttransition\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"startTransition(action)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"Usage \"},{\"url\":\"#perform-non-blocking-updates-with-actions\",\"depth\":3,\"text\":\"Perform non-blocking updates with Actions \"},{\"url\":\"#exposing-action-props-from-components\",\"depth\":3,\"text\":[\"Exposing \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" prop from components \"]},{\"url\":\"#displaying-a-pending-visual-state\",\"depth\":3,\"text\":\"Displaying a pending visual state \"},{\"url\":\"#preventing-unwanted-loading-indicators\",\"depth\":3,\"text\":\"Preventing unwanted loading indicators \"},{\"url\":\"#building-a-suspense-enabled-router\",\"depth\":3,\"text\":\"Building a Suspense-enabled router \"},{\"url\":\"#displaying-an-error-to-users-with-error-boundary\",\"depth\":3,\"text\":\"Displaying an error to users with an error boundary \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"Troubleshooting \"},{\"url\":\"#updating-an-input-in-a-transition-doesnt-work\",\"depth\":3,\"text\":\"Updating an input in a Transition doesn‚Äôt work \"},{\"url\":\"#react-doesnt-treat-my-state-update-as-a-transition\",\"depth\":3,\"text\":\"React doesn‚Äôt treat my state update as a Transition \"},{\"url\":\"#react-doesnt-treat-my-state-update-after-await-as-a-transition\",\"depth\":3,\"text\":[\"React doesn‚Äôt treat my state update after \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" as a Transition \"]},{\"url\":\"#i-want-to-call-usetransition-from-outside-a-component\",\"depth\":3,\"text\":[\"I want to call \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" from outside a component \"]},{\"url\":\"#the-function-i-pass-to-starttransition-executes-immediately\",\"depth\":3,\"text\":[\"The function I pass to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" executes immediately \"]},{\"url\":\"#my-state-updates-in-transitions-are-out-of-order\",\"depth\":3,\"text\":\"My state updates in Transitions are out of order \"}]","content":"[[\"$r\",\"MaxWidth\",\"68\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" is a React Hook that lets you render a part of the UI in the background.\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const [isPending, startTransition] = useTransition()\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"Reference \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"usetransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition()\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" at the top level of your component to mark some state updates as Transitions.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useTransition } from 'react';\\n\\nfunction TabContainer() {\\n  const [isPending, startTransition] = useTransition();\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"See more examples below.\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" does not take any parameters.\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" returns an array with exactly two items:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" flag that tells you whether there is a pending Transition.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"a\",null,{\"href\":\"#starttransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" function\"]}],\" that lets you mark updates as a Transition.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"starttransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition(action)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" function returned by \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" lets you mark an update as a Transition.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6,8}\",\"children\":\"function TabContainer() {\\n  const [isPending, startTransition] = useTransition();\\n  const [tab, setTab] = useState('about');\\n\\n  function selectTab(nextTab) {\\n    startTransition(() => {\\n      setTab(nextTab);\\n    });\\n  }\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"functions-called-in-starttransition-are-called-actions\",\"children\":[\"Functions called in \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" are called ‚ÄúActions‚Äù. \"]}],[\"$r\",\"p\",null,{\"children\":[\"The function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" is called an ‚ÄúAction‚Äù. By convention, any callback called inside \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" (such as a callback prop) should be named \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" or include the ‚ÄúAction‚Äù suffix:\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,9}\",\"children\":\"function SubmitButton({ submitAction }) {\\n  const [isPending, startTransition] = useTransition();\\n\\n  return (\\n    <button\\n      disabled={isPending}\\n      onClick={() => {\\n        startTransition(() => {\\n          submitAction();\\n        });\\n      }}\\n    >\\n      Submit\\n    </button>\\n  );\\n}\\n\\n\"}]}]]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"action\"}],\": A function that updates some state by calling one or more \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" functions\"]}],\". React calls \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" immediately with no parameters and marks all state updates scheduled synchronously during the \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" function call as Transitions. Any async calls that are awaited in the \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" will be included in the Transition, but currently require wrapping any \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" functions after the \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" in an additional \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" (see \",[\"$r\",\"a\",null,{\"href\":\"#react-doesnt-treat-my-state-update-after-await-as-a-transition\",\"children\":\"Troubleshooting\"}],\"). State updates marked as Transitions will be \",[\"$r\",\"a\",null,{\"href\":\"#marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"non-blocking\"}],\" and \",[\"$r\",\"a\",null,{\"href\":\"#preventing-unwanted-loading-indicators\",\"children\":\"will not display unwanted loading indicators\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" does not return anything.\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-caveats\",\"children\":\"Caveats \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" is a Hook, so it can only be called inside components or custom Hooks. If you need to start a Transition somewhere else (for example, from a data library), call the standalone \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" instead.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can wrap an update into a Transition only if you have access to the \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" function of that state. If you want to start a Transition in response to some prop or a custom Hook value, try \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\" instead.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The function you pass to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" is called immediately, marking all state updates that happen while it executes as Transitions. If you try to perform state updates in a \",[\"$r\",\"code\",null,{\"children\":\"setTimeout\"}],\", for example, they won‚Äôt be marked as Transitions.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You must wrap any state updates after any async requests in another \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" to mark them as Transitions. This is a known limitation that we will fix in the future (see \",[\"$r\",\"a\",null,{\"href\":\"#react-doesnt-treat-my-state-update-after-await-as-a-transition\",\"children\":\"Troubleshooting\"}],\").\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" function has a stable identity, so you will often see it omitted from Effect dependencies, but including it will not cause the Effect to fire. If the linter lets you omit a dependency without errors, it is safe to do. \",[\"$r\",\"a\",null,{\"href\":\"/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect\",\"children\":\"Learn more about removing Effect dependencies.\"}]]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"A state update marked as a Transition will be interrupted by other state updates. For example, if you update a chart component inside a Transition, but then start typing into an input while the chart is in the middle of a re-render, React will restart the rendering work on the chart component after handling the input update.\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Transition updates can‚Äôt be used to control text inputs.\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"If there are multiple ongoing Transitions, React currently batches them together. This is a limitation that may be removed in a future release.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"Usage \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"perform-non-blocking-updates-with-actions\",\"children\":\"Perform non-blocking updates with Actions \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" at the top of your component to create Actions, and access the pending state:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 4, \\\"isPending\\\"], [2, 4, \\\"startTransition\\\"]]\",\"children\":\"import {useState, useTransition} from 'react';\\n\\nfunction CheckoutForm() {\\n  const [isPending, startTransition] = useTransition();\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" returns an array with exactly two items:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" flag\"]}],\" that tells you whether there is a pending Transition.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" function\"]}],\" that lets you create an Action.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To start a Transition, pass a function to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" like this:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import {useState, useTransition} from 'react';\\nimport {updateQuantity} from './api';\\n\\nfunction CheckoutForm() {\\n  const [isPending, startTransition] = useTransition();\\n  const [quantity, setQuantity] = useState(1);\\n\\n  function onSubmit(newQuantity) {\\n    startTransition(async function () {\\n      const savedQuantity = await updateQuantity(newQuantity);\\n      startTransition(() => {\\n        setQuantity(savedQuantity);\\n      });\\n    });\\n  }\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" is called the ‚ÄúAction‚Äù. You can update state and (optionally) perform side effects within an Action, and the work will be done in the background without blocking user interactions on the page. A Transition can include multiple Actions, and while a Transition is in progress, your UI stays responsive. For example, if the user clicks a tab but then changes their mind and clicks another tab, the second click will be immediately handled without waiting for the first update to finish.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To give the user feedback about in-progress Transitions, to \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" state switches to \",[\"$r\",\"code\",null,{\"children\":\"true\"}],\" at the first call to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\", and stays \",[\"$r\",\"code\",null,{\"children\":\"true\"}],\" until all Actions complete and the final state is shown to the user. Transitions ensure side effects in Actions to complete in order to \",[\"$r\",\"a\",null,{\"href\":\"#preventing-unwanted-loading-indicators\",\"children\":\"prevent unwanted loading indicators\"}],\", and you can provide immediate feedback while the Transition is in progress with \",[\"$r\",\"code\",null,{\"children\":\"useOptimistic\"}],\".\"]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"The difference between Actions and regular event handling\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"updating-the-quantity-in-an-action\",\"children\":\"Updating the quantity in an Action \"}],[\"$r\",\"p\",null,{\"children\":[\"In this example, the \",[\"$r\",\"code\",null,{\"children\":\"updateQuantity\"}],\" function simulates a request to the server to update the item‚Äôs quantity in the cart. This function is \",[\"$r\",\"em\",null,{\"children\":\"artificially slowed down\"}],\" so that it takes at least a second to complete the request.\"]}],[\"$r\",\"p\",null,{\"children\":\"Update the quantity multiple times quickly. Notice that the pending ‚ÄúTotal‚Äù state is shown while any requests are in progress, and the ‚ÄúTotal‚Äù updates only after the final request is complete. Because the update is in an Action, the ‚Äúquantity‚Äù can continue to be updated while the request is in progress.\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"beta\\\",\\n    \\\"react-dom\\\": \\\"beta\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState, useTransition } from \\\"react\\\";\\nimport { updateQuantity } from \\\"./api\\\";\\nimport Item from \\\"./Item\\\";\\nimport Total from \\\"./Total\\\";\\n\\nexport default function App({}) {\\n  const [quantity, setQuantity] = useState(1);\\n  const [isPending, startTransition] = useTransition();\\n\\n  const updateQuantityAction = async newQuantity => {\\n    // To access the pending state of a transition,\\n    // call startTransition again.\\n    startTransition(async () => {\\n      const savedQuantity = await updateQuantity(newQuantity);\\n      startTransition(() => {\\n        setQuantity(savedQuantity);\\n      });\\n    });\\n  };\\n\\n  return (\\n    <div>\\n      <h1>Checkout</h1>\\n      <Item action={updateQuantityAction}/>\\n      <hr />\\n      <Total quantity={quantity} isPending={isPending} />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Item.js\",\"children\":\"import { startTransition } from \\\"react\\\";\\n\\nexport default function Item({action}) {\\n  function handleChange(event) {\\n    // To expose an action prop, call the callback in startTransition.\\n    startTransition(async () => {\\n      action(event.target.value);\\n    })\\n  }\\n  return (\\n    <div className=\\\"item\\\">\\n      <span>Eras Tour Tickets</span>\\n      <label htmlFor=\\\"name\\\">Quantity: </label>\\n      <input\\n        type=\\\"number\\\"\\n        onChange={handleChange}\\n        defaultValue={1}\\n        min={1}\\n      />\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Total.js\",\"children\":\"const intl = new Intl.NumberFormat(\\\"en-US\\\", {\\n  style: \\\"currency\\\",\\n  currency: \\\"USD\\\"\\n});\\n\\nexport default function Total({quantity, isPending}) {\\n  return (\\n    <div className=\\\"total\\\">\\n      <span>Total:</span>\\n      <span>\\n        {isPending ? \\\"üåÄ Updating...\\\" : `${intl.format(quantity * 9999)}`}\\n      </span>\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/api.js\",\"children\":\"export async function updateQuantity(newQuantity) {\\n  return new Promise((resolve, reject) => {\\n    // Simulate a slow network request.\\n    setTimeout(() => {\\n      resolve(newQuantity);\\n    }, 2000);\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".item {\\n  display: flex;\\n  align-items: center;\\n  justify-content: start;\\n}\\n\\n.item label {\\n  flex: 1;\\n  text-align: right;\\n}\\n\\n.item input {\\n  margin-left: 4px;\\n  width: 60px;\\n  padding: 4px;\\n}\\n\\n.total {\\n  height: 50px;\\n  line-height: 25px;\\n  display: flex;\\n  align-content: center;\\n  justify-content: space-between;\\n}\\n\"}]}]]}],[\"$r\",\"p\",null,{\"children\":[\"This is a basic example to demonstrate how Actions work, but this example does not handle requests completing out of order. When updating the quantity multiple times, it‚Äôs possible for the previous requests to finish after later requests causing the quantity to update out of order. This is a known limitation that we will fix in the future (see \",[\"$r\",\"a\",null,{\"href\":\"#my-state-updates-in-transitions-are-out-of-order\",\"children\":\"Troubleshooting\"}],\" below).\"]}],[\"$r\",\"p\",null,{\"children\":\"For common use cases, React provides built-in abstractions such as:\"}],[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/react/useActionState\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useActionState\"}]}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/components/form\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"<form>\"}],\" actions\"]}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/rsc/server-functions\",\"children\":\"Server Functions\"}]}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":\"These solutions handle request ordering for you. When using Transitions to build your own custom hooks or libraries that manage async state transitions, you have greater control over the request ordering, but you must handle it yourself.\"}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"updating-the-users-name-without-an-action\",\"children\":\"Updating the quantity without an Action \"}],[\"$r\",\"p\",null,{\"children\":[\"In this example, the \",[\"$r\",\"code\",null,{\"children\":\"updateQuantity\"}],\" function also simulates a request to the server to update the item‚Äôs quantity in the cart. This function is \",[\"$r\",\"em\",null,{\"children\":\"artificially slowed down\"}],\" so that it takes at least a second to complete the request.\"]}],[\"$r\",\"p\",null,{\"children\":\"Update the quantity multiple times quickly. Notice that the pending ‚ÄúTotal‚Äù state is shown while any requests is in progress, but the ‚ÄúTotal‚Äù updates multiple times for each time the ‚Äúquantity‚Äù was clicked:\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"beta\\\",\\n    \\\"react-dom\\\": \\\"beta\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState, useTransition } from \\\"react\\\";\\nimport { updateQuantity } from \\\"./api\\\";\\nimport Item from \\\"./Item\\\";\\nimport Total from \\\"./Total\\\";\\n\\nexport default function App({}) {\\n  const [quantity, setQuantity] = useState(1);\\n  const [isPending, setIsPending] = useState(false);\\n\\n  const onUpdateQuantity = async newQuantity => {\\n    // Manually set the isPending State.\\n    setIsPending(true);\\n    const savedQuantity = await updateQuantity(newQuantity);\\n    setIsPending(false);\\n    setQuantity(savedQuantity);\\n  };\\n\\n  return (\\n    <div>\\n      <h1>Checkout</h1>\\n      <Item onUpdateQuantity={onUpdateQuantity}/>\\n      <hr />\\n      <Total quantity={quantity} isPending={isPending} />\\n    </div>\\n  );\\n}\\n\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Item.js\",\"children\":\"export default function Item({onUpdateQuantity}) {\\n  function handleChange(event) {\\n    onUpdateQuantity(event.target.value);\\n  }\\n  return (\\n    <div className=\\\"item\\\">\\n      <span>Eras Tour Tickets</span>\\n      <label htmlFor=\\\"name\\\">Quantity: </label>\\n      <input\\n        type=\\\"number\\\"\\n        onChange={handleChange}\\n        defaultValue={1}\\n        min={1}\\n      />\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Total.js\",\"children\":\"const intl = new Intl.NumberFormat(\\\"en-US\\\", {\\n  style: \\\"currency\\\",\\n  currency: \\\"USD\\\"\\n});\\n\\nexport default function Total({quantity, isPending}) {\\n  return (\\n    <div className=\\\"total\\\">\\n      <span>Total:</span>\\n      <span>\\n        {isPending ? \\\"üåÄ Updating...\\\" : `${intl.format(quantity * 9999)}`}\\n      </span>\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/api.js\",\"children\":\"export async function updateQuantity(newQuantity) {\\n  return new Promise((resolve, reject) => {\\n    // Simulate a slow network request.\\n    setTimeout(() => {\\n      resolve(newQuantity);\\n    }, 2000);\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".item {\\n  display: flex;\\n  align-items: center;\\n  justify-content: start;\\n}\\n\\n.item label {\\n  flex: 1;\\n  text-align: right;\\n}\\n\\n.item input {\\n  margin-left: 4px;\\n  width: 60px;\\n  padding: 4px;\\n}\\n\\n.total {\\n  height: 50px;\\n  line-height: 25px;\\n  display: flex;\\n  align-content: center;\\n  justify-content: space-between;\\n}\\n\"}]}]]}],[\"$r\",\"p\",null,{\"children\":\"A common solution to this problem is to prevent the user from making changes while the quantity is updating:\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"beta\\\",\\n    \\\"react-dom\\\": \\\"beta\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState, useTransition } from \\\"react\\\";\\nimport { updateQuantity } from \\\"./api\\\";\\nimport Item from \\\"./Item\\\";\\nimport Total from \\\"./Total\\\";\\n\\nexport default function App({}) {\\n  const [quantity, setQuantity] = useState(1);\\n  const [isPending, setIsPending] = useState(false);\\n\\n  const onUpdateQuantity = async event => {\\n    const newQuantity = event.target.value;\\n    // Manually set the isPending state.\\n    setIsPending(true);\\n    const savedQuantity = await updateQuantity(newQuantity);\\n    setIsPending(false);\\n    setQuantity(savedQuantity);\\n  };\\n\\n  return (\\n    <div>\\n      <h1>Checkout</h1>\\n      <Item isPending={isPending} onUpdateQuantity={onUpdateQuantity}/>\\n      <hr />\\n      <Total quantity={quantity} isPending={isPending} />\\n    </div>\\n  );\\n}\\n\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Item.js\",\"children\":\"export default function Item({isPending, onUpdateQuantity}) {\\n  return (\\n    <div className=\\\"item\\\">\\n      <span>Eras Tour Tickets</span>\\n      <label htmlFor=\\\"name\\\">Quantity: </label>\\n      <input\\n        type=\\\"number\\\"\\n        disabled={isPending}\\n        onChange={onUpdateQuantity}\\n        defaultValue={1}\\n        min={1}\\n      />\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Total.js\",\"children\":\"const intl = new Intl.NumberFormat(\\\"en-US\\\", {\\n  style: \\\"currency\\\",\\n  currency: \\\"USD\\\"\\n});\\n\\nexport default function Total({quantity, isPending}) {\\n  return (\\n    <div className=\\\"total\\\">\\n      <span>Total:</span>\\n      <span>\\n        {isPending ? \\\"üåÄ Updating...\\\" : `${intl.format(quantity * 9999)}`}\\n      </span>\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/api.js\",\"children\":\"export async function updateQuantity(newQuantity) {\\n  return new Promise((resolve, reject) => {\\n    // Simulate a slow network request.\\n    setTimeout(() => {\\n      resolve(newQuantity);\\n    }, 2000);\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".item {\\n  display: flex;\\n  align-items: center;\\n  justify-content: start;\\n}\\n\\n.item label {\\n  flex: 1;\\n  text-align: right;\\n}\\n\\n.item input {\\n  margin-left: 4px;\\n  width: 60px;\\n  padding: 4px;\\n}\\n\\n.total {\\n  height: 50px;\\n  line-height: 25px;\\n  display: flex;\\n  align-content: center;\\n  justify-content: space-between;\\n}\\n\"}]}]]}],[\"$r\",\"p\",null,{\"children\":\"This solution makes the app feel slow, because the user must wait each time they update the quantity. It‚Äôs possible to add more complex handling manually to allow the user to interact with the UI while the quantity is updating, but Actions handle this case with a straight-forward built-in API.\"}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"82\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"exposing-action-props-from-components\",\"children\":[\"Exposing \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" prop from components \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can expose an \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" prop from a component to allow a parent to call an Action.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"For example, this \",[\"$r\",\"code\",null,{\"children\":\"TabButton\"}],\" component wraps its \",[\"$r\",\"code\",null,{\"children\":\"onClick\"}],\" logic in an \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\" prop:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{8-10}\",\"children\":\"export default function TabButton({ action, children, isActive }) {\\n  const [isPending, startTransition] = useTransition();\\n  if (isActive) {\\n    return <b>{children}</b>\\n  }\\n  return (\\n    <button onClick={() => {\\n      startTransition(() => {\\n        action();\\n      });\\n    }}>\\n      {children}\\n    </button>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Because the parent component updates its state inside the \",[\"$r\",\"code\",null,{\"children\":\"action\"}],\", that state update gets marked as a Transition. This means you can click on ‚ÄúPosts‚Äù and then immediately click ‚ÄúContact‚Äù and it does not block user interactions:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\nimport TabButton from './TabButton.js';\\nimport AboutTab from './AboutTab.js';\\nimport PostsTab from './PostsTab.js';\\nimport ContactTab from './ContactTab.js';\\n\\nexport default function TabContainer() {\\n  const [tab, setTab] = useState('about');\\n  return (\\n    <>\\n      <TabButton\\n        isActive={tab === 'about'}\\n        action={() => setTab('about')}\\n      >\\n        About\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'posts'}\\n        action={() => setTab('posts')}\\n      >\\n        Posts (slow)\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'contact'}\\n        action={() => setTab('contact')}\\n      >\\n        Contact\\n      </TabButton>\\n      <hr />\\n      {tab === 'about' && <AboutTab />}\\n      {tab === 'posts' && <PostsTab />}\\n      {tab === 'contact' && <ContactTab />}\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\n\\nexport default function TabButton({ action, children, isActive }) {\\n  const [isPending, startTransition] = useTransition();\\n  if (isActive) {\\n    return <b>{children}</b>\\n  }\\n  return (\\n    <button onClick={() => {\\n      startTransition(() => {\\n        action();\\n      });\\n    }}>\\n      {children}\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\n  return (\\n    <p>Welcome to my profile!</p>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\n\\nconst PostsTab = memo(function PostsTab() {\\n  // Log once. The actual slowdown is inside SlowPost.\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\n\\n  let items = [];\\n  for (let i = 0; i < 500; i++) {\\n    items.push(<SlowPost key={i} index={i} />);\\n  }\\n  return (\\n    <ul className=\\\"items\\\">\\n      {items}\\n    </ul>\\n  );\\n});\\n\\nfunction SlowPost({ index }) {\\n  let startTime = performance.now();\\n  while (performance.now() - startTime < 1) {\\n    // Do nothing for 1 ms per item to emulate extremely slow code\\n  }\\n\\n  return (\\n    <li className=\\\"item\\\">\\n      Post #{index + 1}\\n    </li>\\n  );\\n}\\n\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\n  return (\\n    <>\\n      <p>\\n        You can find me online here:\\n      </p>\\n      <ul>\\n        <li>admin@mysite.com</li>\\n        <li>+123456789</li>\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\nb { display: inline-block; margin-right: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"94\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-a-pending-visual-state\",\"children\":\"Displaying a pending visual state \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" boolean value returned by \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" to indicate to the user that a Transition is in progress. For example, the tab button can have a special ‚Äúpending‚Äù visual state:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-6}\",\"children\":\"function TabButton({ action, children, isActive }) {\\n  const [isPending, startTransition] = useTransition();\\n  // ...\\n  if (isPending) {\\n    return <b className=\\\"pending\\\">{children}</b>;\\n  }\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Notice how clicking ‚ÄúPosts‚Äù now feels more responsive because the tab button itself updates right away:\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\nimport TabButton from './TabButton.js';\\nimport AboutTab from './AboutTab.js';\\nimport PostsTab from './PostsTab.js';\\nimport ContactTab from './ContactTab.js';\\n\\nexport default function TabContainer() {\\n  const [tab, setTab] = useState('about');\\n  return (\\n    <>\\n      <TabButton\\n        isActive={tab === 'about'}\\n        action={() => setTab('about')}\\n      >\\n        About\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'posts'}\\n        action={() => setTab('posts')}\\n      >\\n        Posts (slow)\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'contact'}\\n        action={() => setTab('contact')}\\n      >\\n        Contact\\n      </TabButton>\\n      <hr />\\n      {tab === 'about' && <AboutTab />}\\n      {tab === 'posts' && <PostsTab />}\\n      {tab === 'contact' && <ContactTab />}\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\n\\nexport default function TabButton({ action, children, isActive }) {\\n  const [isPending, startTransition] = useTransition();\\n  if (isActive) {\\n    return <b>{children}</b>\\n  }\\n  if (isPending) {\\n    return <b className=\\\"pending\\\">{children}</b>;\\n  }\\n  return (\\n    <button onClick={() => {\\n      startTransition(() => {\\n        action();\\n      });\\n    }}>\\n      {children}\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\n  return (\\n    <p>Welcome to my profile!</p>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\n\\nconst PostsTab = memo(function PostsTab() {\\n  // Log once. The actual slowdown is inside SlowPost.\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\n\\n  let items = [];\\n  for (let i = 0; i < 500; i++) {\\n    items.push(<SlowPost key={i} index={i} />);\\n  }\\n  return (\\n    <ul className=\\\"items\\\">\\n      {items}\\n    </ul>\\n  );\\n});\\n\\nfunction SlowPost({ index }) {\\n  let startTime = performance.now();\\n  while (performance.now() - startTime < 1) {\\n    // Do nothing for 1 ms per item to emulate extremely slow code\\n  }\\n\\n  return (\\n    <li className=\\\"item\\\">\\n      Post #{index + 1}\\n    </li>\\n  );\\n}\\n\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\n  return (\\n    <>\\n      <p>\\n        You can find me online here:\\n      </p>\\n      <ul>\\n        <li>admin@mysite.com</li>\\n        <li>+123456789</li>\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\nb { display: inline-block; margin-right: 10px; }\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"102\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preventing-unwanted-loading-indicators\",\"children\":\"Preventing unwanted loading indicators \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"In this example, the \",[\"$r\",\"code\",null,{\"children\":\"PostsTab\"}],\" component fetches some data using \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/use\",\"children\":\"use\"}],\". When you click the ‚ÄúPosts‚Äù tab, the \",[\"$r\",\"code\",null,{\"children\":\"PostsTab\"}],\" component \",[\"$r\",\"em\",null,{\"children\":\"suspends\"}],\", causing the closest loading fallback to appear:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { Suspense, useState } from 'react';\\nimport TabButton from './TabButton.js';\\nimport AboutTab from './AboutTab.js';\\nimport PostsTab from './PostsTab.js';\\nimport ContactTab from './ContactTab.js';\\n\\nexport default function TabContainer() {\\n  const [tab, setTab] = useState('about');\\n  return (\\n    <Suspense fallback={<h1>üåÄ Loading...</h1>}>\\n      <TabButton\\n        isActive={tab === 'about'}\\n        action={() => setTab('about')}\\n      >\\n        About\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'posts'}\\n        action={() => setTab('posts')}\\n      >\\n        Posts\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'contact'}\\n        action={() => setTab('contact')}\\n      >\\n        Contact\\n      </TabButton>\\n      <hr />\\n      {tab === 'about' && <AboutTab />}\\n      {tab === 'posts' && <PostsTab />}\\n      {tab === 'contact' && <ContactTab />}\\n    </Suspense>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js\",\"children\":\"export default function TabButton({ action, children, isActive }) {\\n  if (isActive) {\\n    return <b>{children}</b>\\n  }\\n  return (\\n    <button onClick={() => {\\n      action();\\n    }}>\\n      {children}\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js hidden\",\"children\":\"export default function AboutTab() {\\n  return (\\n    <p>Welcome to my profile!</p>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js hidden\",\"children\":\"import {use} from 'react';\\nimport { fetchData } from './data.js';\\n\\nfunction PostsTab() {\\n  const posts = use(fetchData('/posts'));\\n  return (\\n    <ul className=\\\"items\\\">\\n      {posts.map(post =>\\n        <Post key={post.id} title={post.title} />\\n      )}\\n    </ul>\\n  );\\n}\\n\\nfunction Post({ title }) {\\n  return (\\n    <li className=\\\"item\\\">\\n      {title}\\n    </li>\\n  );\\n}\\n\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js hidden\",\"children\":\"export default function ContactTab() {\\n  return (\\n    <>\\n      <p>\\n        You can find me online here:\\n      </p>\\n      <ul>\\n        <li>admin@mysite.com</li>\\n        <li>+123456789</li>\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// Note: the way you would do data fetching depends on\\n// the framework that you use together with Suspense.\\n// Normally, the caching logic would be inside a framework.\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url.startsWith('/posts')) {\\n    return await getPosts();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getPosts() {\\n  // Add a fake delay to make waiting noticeable.\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 1000);\\n  });\\n  let posts = [];\\n  for (let i = 0; i < 500; i++) {\\n    posts.push({\\n      id: i,\\n      title: 'Post #' + (i + 1)\\n    });\\n  }\\n  return posts;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\nb { display: inline-block; margin-right: 10px; }\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"108\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Hiding the entire tab container to show a loading indicator leads to a jarring user experience. If you add \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" to \",[\"$r\",\"code\",null,{\"children\":\"TabButton\"}],\", you can instead display the pending state in the tab button instead.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Notice that clicking ‚ÄúPosts‚Äù no longer replaces the entire tab container with a spinner:\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { Suspense, useState } from 'react';\\nimport TabButton from './TabButton.js';\\nimport AboutTab from './AboutTab.js';\\nimport PostsTab from './PostsTab.js';\\nimport ContactTab from './ContactTab.js';\\n\\nexport default function TabContainer() {\\n  const [tab, setTab] = useState('about');\\n  return (\\n    <Suspense fallback={<h1>üåÄ Loading...</h1>}>\\n      <TabButton\\n        isActive={tab === 'about'}\\n        action={() => setTab('about')}\\n      >\\n        About\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'posts'}\\n        action={() => setTab('posts')}\\n      >\\n        Posts\\n      </TabButton>\\n      <TabButton\\n        isActive={tab === 'contact'}\\n        action={() => setTab('contact')}\\n      >\\n        Contact\\n      </TabButton>\\n      <hr />\\n      {tab === 'about' && <AboutTab />}\\n      {tab === 'posts' && <PostsTab />}\\n      {tab === 'contact' && <ContactTab />}\\n    </Suspense>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\n\\nexport default function TabButton({ action, children, isActive }) {\\n  const [isPending, startTransition] = useTransition();\\n  if (isActive) {\\n    return <b>{children}</b>\\n  }\\n  if (isPending) {\\n    return <b className=\\\"pending\\\">{children}</b>;\\n  }\\n  return (\\n    <button onClick={() => {\\n      startTransition(() => {\\n        action();\\n      });\\n    }}>\\n      {children}\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js hidden\",\"children\":\"export default function AboutTab() {\\n  return (\\n    <p>Welcome to my profile!</p>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js hidden\",\"children\":\"import {use} from 'react';\\nimport { fetchData } from './data.js';\\n\\nfunction PostsTab() {\\n  const posts = use(fetchData('/posts'));\\n  return (\\n    <ul className=\\\"items\\\">\\n      {posts.map(post =>\\n        <Post key={post.id} title={post.title} />\\n      )}\\n    </ul>\\n  );\\n}\\n\\nfunction Post({ title }) {\\n  return (\\n    <li className=\\\"item\\\">\\n      {title}\\n    </li>\\n  );\\n}\\n\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js hidden\",\"children\":\"export default function ContactTab() {\\n  return (\\n    <>\\n      <p>\\n        You can find me online here:\\n      </p>\\n      <ul>\\n        <li>admin@mysite.com</li>\\n        <li>+123456789</li>\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// Note: the way you would do data fetching depends on\\n// the framework that you use together with Suspense.\\n// Normally, the caching logic would be inside a framework.\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url.startsWith('/posts')) {\\n    return await getPosts();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getPosts() {\\n  // Add a fake delay to make waiting noticeable.\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 1000);\\n  });\\n  let posts = [];\\n  for (let i = 0; i < 500; i++) {\\n    posts.push({\\n      id: i,\\n      title: 'Post #' + (i + 1)\\n    });\\n  }\\n  return posts;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\nb { display: inline-block; margin-right: 10px; }\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"128\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense#preventing-already-revealed-content-from-hiding\",\"children\":\"Read more about using Transitions with Suspense.\"}]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"Transitions only ‚Äúwait‚Äù long enough to avoid hiding \",[\"$r\",\"em\",null,{\"children\":\"already revealed\"}],\" content (like the tab container). If the Posts tab had a \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense#revealing-nested-content-as-it-loads\",\"children\":[\"nested \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" boundary,\"]}],\" the Transition would not ‚Äúwait‚Äù for it.\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"building-a-suspense-enabled-router\",\"children\":\"Building a Suspense-enabled router \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"If you‚Äôre building a React framework or a router, we recommend marking page navigations as Transitions.\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,6,8}\",\"children\":\"function Router() {\\n  const [page, setPage] = useState('/');\\n  const [isPending, startTransition] = useTransition();\\n\\n  function navigate(url) {\\n    startTransition(() => {\\n      setPage(url);\\n    });\\n  }\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"This is recommended for three reasons:\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"Transitions are interruptible,\"}],\" which lets the user click away without waiting for the re-render to complete.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#preventing-unwanted-loading-indicators\",\"children\":\"Transitions prevent unwanted loading indicators,\"}],\" which lets the user avoid jarring jumps on navigation.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#perform-non-blocking-updates-with-actions\",\"children\":\"Transitions wait for all pending actions\"}],\" which lets the user wait for side effects to complete before the new page is shown.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Here is a simplified router example using Transitions for navigations.\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState, useTransition } from 'react';\\nimport IndexPage from './IndexPage.js';\\nimport ArtistPage from './ArtistPage.js';\\nimport Layout from './Layout.js';\\n\\nexport default function App() {\\n  return (\\n    <Suspense fallback={<BigSpinner />}>\\n      <Router />\\n    </Suspense>\\n  );\\n}\\n\\nfunction Router() {\\n  const [page, setPage] = useState('/');\\n  const [isPending, startTransition] = useTransition();\\n\\n  function navigate(url) {\\n    startTransition(() => {\\n      setPage(url);\\n    });\\n  }\\n\\n  let content;\\n  if (page === '/') {\\n    content = (\\n      <IndexPage navigate={navigate} />\\n    );\\n  } else if (page === '/the-beatles') {\\n    content = (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  }\\n  return (\\n    <Layout isPending={isPending}>\\n      {content}\\n    </Layout>\\n  );\\n}\\n\\nfunction BigSpinner() {\\n  return <h2>üåÄ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Layout.js\",\"children\":\"export default function Layout({ children, isPending }) {\\n  return (\\n    <div className=\\\"layout\\\">\\n      <section className=\\\"header\\\" style={{\\n        opacity: isPending ? 0.7 : 1\\n      }}>\\n        Music Browser\\n      </section>\\n      <main>\\n        {children}\\n      </main>\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/IndexPage.js\",\"children\":\"export default function IndexPage({ navigate }) {\\n  return (\\n    <button onClick={() => navigate('/the-beatles')}>\\n      Open The Beatles artist page\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Biography artistId={artist.id} />\\n      <Suspense fallback={<AlbumsGlimmer />}>\\n        <Panel>\\n          <Albums artistId={artist.id} />\\n        </Panel>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction AlbumsGlimmer() {\\n  return (\\n    <div className=\\\"glimmer-panel\\\">\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js\",\"children\":\"import {use} from 'react';\\nimport { fetchData } from './data.js';\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js\",\"children\":\"import {use} from 'react';\\nimport { fetchData } from './data.js';\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// Note: the way you would do data fetching depends on\\n// the framework that you use together with Suspense.\\n// Normally, the caching logic would be inside a framework.\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // Add a fake delay to make waiting noticeable.\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  return `The Beatles were an English rock band,\\n    formed in Liverpool in 1960, that comprised\\n    John Lennon, Paul McCartney, George Harrison\\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // Add a fake delay to make waiting noticeable.\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"main {\\n  min-height: 200px;\\n  padding: 10px;\\n}\\n\\n.layout {\\n  border: 1px solid black;\\n}\\n\\n.header {\\n  background: #222;\\n  padding: 10px;\\n  text-align: center;\\n  color: white;\\n}\\n\\n.bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-panel {\\n  border: 1px dashed #aaa;\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-line {\\n  display: block;\\n  width: 60%;\\n  height: 20px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  background: #f0f0f0;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"138\",{\"children\":[\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":\"Suspense-enabled\"}],\" routers are expected to wrap the navigation updates into Transitions by default.\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-an-error-to-users-with-error-boundary\",\"children\":\"Displaying an error to users with an error boundary \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If a function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" throws an error, you can display an error to your user with an \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Component#catching-rendering-errors-with-an-error-boundary\",\"children\":\"error boundary\"}],\". To use an error boundary, wrap the component where you are calling the \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" in an error boundary. Once the function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" errors, the fallback for the error boundary will be displayed.\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AddCommentContainer.js active\",\"children\":\"import { useTransition } from \\\"react\\\";\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\n\\nexport function AddCommentContainer() {\\n  return (\\n    <ErrorBoundary fallback={<p>‚ö†Ô∏èSomething went wrong</p>}>\\n      <AddCommentButton />\\n    </ErrorBoundary>\\n  );\\n}\\n\\nfunction addComment(comment) {\\n  // For demonstration purposes to show Error Boundary\\n  if (comment == null) {\\n    throw new Error(\\\"Example Error: An error thrown to trigger error boundary\\\");\\n  }\\n}\\n\\nfunction AddCommentButton() {\\n  const [pending, startTransition] = useTransition();\\n\\n  return (\\n    <button\\n      disabled={pending}\\n      onClick={() => {\\n        startTransition(() => {\\n          // Intentionally not passing a comment\\n          // so error gets thrown\\n          addComment();\\n        });\\n      }}\\n    >\\n      Add comment\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js hidden\",\"children\":\"import { AddCommentContainer } from \\\"./AddCommentContainer.js\\\";\\n\\nexport default function App() {\\n  return <AddCommentContainer />;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js hidden\",\"children\":\"import React, { StrictMode } from 'react';\\nimport { createRoot } from 'react-dom/client';\\nimport './styles.css';\\nimport App from './App';\\n\\nconst root = createRoot(document.getElementById('root'));\\nroot.render(\\n  <StrictMode>\\n    <App />\\n  </StrictMode>\\n);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-dom\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\n  },\\n  \\\"main\\\": \\\"/index.js\\\"\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"210\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"Troubleshooting \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-an-input-in-a-transition-doesnt-work\",\"children\":\"Updating an input in a Transition doesn‚Äôt work \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"You can‚Äôt use a Transition for a state variable that controls an input:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,10}\",\"children\":\"const [text, setText] = useState('');\\n// ...\\nfunction handleChange(e) {\\n  // ‚ùå Can't use Transitions for controlled input state\\n  startTransition(() => {\\n    setText(e.target.value);\\n  });\\n}\\n// ...\\nreturn <input value={text} onChange={handleChange} />;\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"This is because Transitions are non-blocking, but updating an input in response to the change event should happen synchronously. If you want to run a Transition in response to typing, you have two options:\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"You can declare two separate state variables: one for the input state (which always updates synchronously), and one that you will update in a Transition. This lets you control the input using the synchronous state, and pass the Transition state variable (which will ‚Äúlag behind‚Äù the input) to the rest of your rendering logic.\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Alternatively, you can have one state variable, and add \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\" which will ‚Äúlag behind‚Äù the real value. It will trigger non-blocking re-renders to ‚Äúcatch up‚Äù with the new value automatically.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"react-doesnt-treat-my-state-update-as-a-transition\",\"children\":\"React doesn‚Äôt treat my state update as a Transition \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"When you wrap a state update in a Transition, make sure that it happens \",[\"$r\",\"em\",null,{\"children\":\"during\"}],\" the \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" call:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(() => {\\n  // ‚úÖ Setting state *during* startTransition call\\n  setPage('/about');\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The function you pass to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" must be synchronous. You can‚Äôt mark an update as a Transition like this:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(() => {\\n  // ‚ùå Setting state *after* startTransition call\\n  setTimeout(() => {\\n    setPage('/about');\\n  }, 1000);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Instead, you could do this:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"setTimeout(() => {\\n  startTransition(() => {\\n    // ‚úÖ Setting state *during* startTransition call\\n    setPage('/about');\\n  });\\n}, 1000);\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"react-doesnt-treat-my-state-update-after-await-as-a-transition\",\"children\":[\"React doesn‚Äôt treat my state update after \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" as a Transition \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"When you use \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" inside a \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" function, the state updates that happen after the \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" are not marked as Transitions. You must wrap state updates after each \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" in a \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" call:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(async () => {\\n  await someAsyncFunction();\\n  // ‚ùå Not using startTransition after await\\n  setPage('/about');\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"However, this works instead:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(async () => {\\n  await someAsyncFunction();\\n  // ‚úÖ Using startTransition *after* await\\n  startTransition(() => {\\n    setPage('/about');\\n  });\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This is a JavaScript limitation due to React losing the scope of the async context. In the future, when \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/tc39/proposal-async-context\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"AsyncContext\"}],\" is available, this limitation will be removed.\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"i-want-to-call-usetransition-from-outside-a-component\",\"children\":[\"I want to call \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" from outside a component \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can‚Äôt call \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" outside a component because it‚Äôs a Hook. In this case, use the standalone \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" method instead. It works the same way, but it doesn‚Äôt provide the \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" indicator.\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"the-function-i-pass-to-starttransition-executes-immediately\",\"children\":[\"The function I pass to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" executes immediately \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"If you run this code, it will print 1, 2, 3:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,3,6}\",\"children\":\"console.log(1);\\nstartTransition(() => {\\n  console.log(2);\\n  setPage('/about');\\n});\\nconsole.log(3);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"It is expected to print 1, 2, 3.\"}],\" The function you pass to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" does not get delayed. Unlike with the browser \",[\"$r\",\"code\",null,{\"children\":\"setTimeout\"}],\", it does not run the callback later. React executes your function immediately, but any state updates scheduled \",[\"$r\",\"em\",null,{\"children\":\"while it is running\"}],\" are marked as Transitions. You can imagine that it works like this:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// A simplified version of how React works\\n\\nlet isInsideTransition = false;\\n\\nfunction startTransition(scope) {\\n  isInsideTransition = true;\\n  scope();\\n  isInsideTransition = false;\\n}\\n\\nfunction setState() {\\n  if (isInsideTransition) {\\n    // ... schedule a Transition state update ...\\n  } else {\\n    // ... schedule an urgent state update ...\\n  }\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"my-state-updates-in-transitions-are-out-of-order\",\"children\":\"My state updates in Transitions are out of order \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If you \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" inside \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\", you might see the updates happen out of order.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"In this example, the \",[\"$r\",\"code\",null,{\"children\":\"updateQuantity\"}],\" function simulates a request to the server to update the item‚Äôs quantity in the cart. This function \",[\"$r\",\"em\",null,{\"children\":\"artificially returns the every other request after the previous\"}],\" to simulate race conditions for network requests.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Try updating the quantity once, then update it quickly multiple times. You might see the incorrect total:\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"beta\\\",\\n    \\\"react-dom\\\": \\\"beta\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState, useTransition } from \\\"react\\\";\\nimport { updateQuantity } from \\\"./api\\\";\\nimport Item from \\\"./Item\\\";\\nimport Total from \\\"./Total\\\";\\n\\nexport default function App({}) {\\n  const [quantity, setQuantity] = useState(1);\\n  const [isPending, startTransition] = useTransition();\\n  // Store the actual quantity in separate state to show the mismatch.\\n  const [clientQuantity, setClientQuantity] = useState(1);\\n  \\n  const updateQuantityAction = newQuantity => {\\n    setClientQuantity(newQuantity);\\n\\n    // Access the pending state of the transition,\\n    // by wrapping in startTransition again.\\n    startTransition(async () => {\\n      const savedQuantity = await updateQuantity(newQuantity);\\n      startTransition(() => {\\n        setQuantity(savedQuantity);\\n      });\\n    });\\n  };\\n\\n  return (\\n    <div>\\n      <h1>Checkout</h1>\\n      <Item action={updateQuantityAction}/>\\n      <hr />\\n      <Total clientQuantity={clientQuantity} savedQuantity={quantity} isPending={isPending} />\\n    </div>\\n  );\\n}\\n\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Item.js\",\"children\":\"import {startTransition} from 'react';\\n\\nexport default function Item({action}) {\\n  function handleChange(e) {\\n    // Update the quantity in an Action.\\n    startTransition(() => {\\n      action(e.target.value);\\n    });\\n  }  \\n  return (\\n    <div className=\\\"item\\\">\\n      <span>Eras Tour Tickets</span>\\n      <label htmlFor=\\\"name\\\">Quantity: </label>\\n      <input\\n        type=\\\"number\\\"\\n        onChange={handleChange}\\n        defaultValue={1}\\n        min={1}\\n      />\\n    </div>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Total.js\",\"children\":\"const intl = new Intl.NumberFormat(\\\"en-US\\\", {\\n  style: \\\"currency\\\",\\n  currency: \\\"USD\\\"\\n});\\n\\nexport default function Total({ clientQuantity, savedQuantity, isPending }) {\\n  return (\\n    <div className=\\\"total\\\">\\n      <span>Total:</span>\\n      <div>\\n        <div>\\n          {isPending\\n            ? \\\"üåÄ Updating...\\\"\\n            : `${intl.format(savedQuantity * 9999)}`}\\n        </div>\\n        <div className=\\\"error\\\">\\n          {!isPending &&\\n            clientQuantity !== savedQuantity &&\\n            `Wrong total, expected: ${intl.format(clientQuantity * 9999)}`}\\n        </div>\\n      </div>\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/api.js\",\"children\":\"let firstRequest = true;\\nexport async function updateQuantity(newName) {\\n  return new Promise((resolve, reject) => {\\n    if (firstRequest === true) {\\n      firstRequest = false;\\n      setTimeout(() => {\\n        firstRequest = true;\\n        resolve(newName);\\n        // Simulate every other request being slower\\n      }, 1000);\\n    } else {\\n      setTimeout(() => {\\n        resolve(newName);\\n      }, 50);\\n    }\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".item {\\n  display: flex;\\n  align-items: center;\\n  justify-content: start;\\n}\\n\\n.item label {\\n  flex: 1;\\n  text-align: right;\\n}\\n\\n.item input {\\n  margin-left: 4px;\\n  width: 60px;\\n  padding: 4px;\\n}\\n\\n.total {\\n  height: 50px;\\n  line-height: 25px;\\n  display: flex;\\n  align-content: center;\\n  justify-content: space-between;\\n}\\n\\n.total div {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-end;\\n}\\n\\n.error {\\n  color: red;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"When clicking multiple times, it‚Äôs possible for previous requests to finish after later requests. When this happens, React currently has no way to know the intended order. This is because the updates are scheduled asynchronously, and React loses context of the order across the async boundary.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This is expected, because Actions within a Transition do not guarantee execution order. For common use cases, React provides higher-level abstractions like \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useActionState\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useActionState\"}]}],\" and \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/components/form\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"<form>\"}],\" actions\"]}],\" that handle ordering for you. For advanced use cases, you‚Äôll need to implement your own queuing and abort logic to handle this.\"]}]]}]]","meta":{"title":"useTransition"},"languages":null},"__N_SSG":true}
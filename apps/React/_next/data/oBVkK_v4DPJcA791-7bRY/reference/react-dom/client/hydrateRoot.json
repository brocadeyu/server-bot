{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"Reference \"},{\"url\":\"#hydrateroot\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"hydrateRoot(domNode, reactNode, options?)\"}],\" \"]},{\"url\":\"#root-render\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"root.render(reactNode)\"}],\" \"]},{\"url\":\"#root-unmount\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount()\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"Usage \"},{\"url\":\"#hydrating-server-rendered-html\",\"depth\":3,\"text\":\"Hydrating server-rendered HTML \"},{\"url\":\"#hydrating-an-entire-document\",\"depth\":3,\"text\":\"Hydrating an entire document \"},{\"url\":\"#suppressing-unavoidable-hydration-mismatch-errors\",\"depth\":3,\"text\":\"Suppressing unavoidable hydration mismatch errors \"},{\"url\":\"#handling-different-client-and-server-content\",\"depth\":3,\"text\":\"Handling different client and server content \"},{\"url\":\"#updating-a-hydrated-root-component\",\"depth\":3,\"text\":\"Updating a hydrated root component \"},{\"url\":\"#show-a-dialog-for-uncaught-errors\",\"depth\":3,\"text\":\"Show a dialog for uncaught errors \"},{\"url\":\"#displaying-error-boundary-errors\",\"depth\":3,\"text\":\"Displaying Error Boundary errors \"},{\"url\":\"#show-a-dialog-for-recoverable-hydration-mismatch-errors\",\"depth\":3,\"text\":\"Show a dialog for recoverable hydration mismatch errors \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"Troubleshooting \"},{\"url\":\"#im-getting-an-error-you-passed-a-second-argument-to-root-render\",\"depth\":3,\"text\":\"I’m getting an error: “You passed a second argument to root.render” \"}]","content":"[[\"$r\",\"MaxWidth\",\"94\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" lets you display React components inside a browser DOM node whose HTML content was previously generated by \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/server\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"react-dom/server\"}],\".\"]}]]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const root = hydrateRoot(domNode, reactNode, options?)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"Reference \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"hydrateroot\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"hydrateRoot(domNode, reactNode, options?)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" to “attach” React to existing HTML that was already rendered by React in a server environment.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\n\\nconst domNode = document.getElementById('root');\\nconst root = hydrateRoot(domNode, reactNode);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React will attach to the HTML that exists inside the \",[\"$r\",\"code\",null,{\"children\":\"domNode\"}],\", and take over managing the DOM inside it. An app fully built with React will usually only have one \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" call with its root component.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"See more examples below.\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"domNode\"}],\": A \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Element\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"DOM element\"}],\" that was rendered as the root element on the server.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"reactNode\"}],\": The “React node” used to render the existing HTML. This will usually be a piece of JSX like \",[\"$r\",\"code\",null,{\"children\":\"<App />\"}],\" which was rendered with a \",[\"$r\",\"code\",null,{\"children\":\"ReactDOM Server\"}],\" method such as \",[\"$r\",\"code\",null,{\"children\":\"renderToPipeableStream(<App />)\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"options\"}],\": An object with options for this React root.\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\": Callback called when React catches an error in an Error Boundary. Called with the \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" caught by the Error Boundary, and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\": Callback called when an error is thrown and not caught by an Error Boundary. Called with the \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" that was thrown and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\": Callback called when React automatically recovers from errors. Called with the \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" React throws, and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\". Some recoverable errors may include the original error cause as \",[\"$r\",\"code\",null,{\"children\":\"error.cause\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"identifierPrefix\"}],\": A string prefix React uses for IDs generated by \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useId\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useId\"}],\".\"]}],\" Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix as used on the server.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" returns an object with two methods: \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"render\"}]}],\" and \",[\"$r\",\"a\",null,{\"href\":\"#root-unmount\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"unmount\"}],\".\"]}]]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"Caveats \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"hydrateRoot()\"}],\" expects the rendered content to be identical with the server-rendered content. You should treat mismatches as bugs and fix them.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"In development mode, React warns about mismatches during hydration. There are no guarantees that attribute differences will be patched up in case of mismatches. This is important for performance reasons because in most apps, mismatches are rare, and so validating all markup would be prohibitively expensive.\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"You’ll likely have only one \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" call in your app. If you use a framework, it might do this call for you.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"If your app is client-rendered with no HTML rendered already, using \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot()\"}],\" is not supported. Use \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/createRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"createRoot()\"}]}],\" instead.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"root-render\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.render(reactNode)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" to update a React component inside a hydrated React root for a browser DOM element.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React will update \",[\"$r\",\"code\",null,{\"children\":\"<App />\"}],\" in the hydrated \",[\"$r\",\"code\",null,{\"children\":\"root\"}],\".\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"See more examples below.\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"reactNode\"}],\": A “React node” that you want to update. This will usually be a piece of JSX like \",[\"$r\",\"code\",null,{\"children\":\"<App />\"}],\", but you can also pass a React element constructed with \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/createElement\",\"children\":[\"$r\",\"code\",null,{\"children\":\"createElement()\"}]}],\", a string, a number, \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\", or \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" returns \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\".\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-caveats\",\"children\":\"Caveats \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"If you call \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" before the root has finished hydrating, React will clear the existing server-rendered HTML content and switch the entire root to client rendering.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"root-unmount\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount()\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Call \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" to destroy a rendered tree inside a React root.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.unmount();\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"An app fully built with React will usually not have any calls to \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\".\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This is mostly useful if your React root’s DOM node (or any of its ancestors) may get removed from the DOM by some other code. For example, imagine a jQuery tab panel that removes inactive tabs from the DOM. If a tab gets removed, everything inside it (including the React roots inside) would get removed from the DOM as well. You need to tell React to “stop” managing the removed root’s content by calling \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\". Otherwise, the components inside the removed root won’t clean up and free up resources like subscriptions.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Calling \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" will unmount all the components in the root and “detach” React from the root DOM node, including removing any event handlers or state in the tree.\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-parameters\",\"children\":\"Parameters \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" does not accept any parameters.\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-returns\",\"children\":\"Returns \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" returns \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\".\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-caveats\",\"children\":\"Caveats \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Calling \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" will unmount all the components in the tree and “detach” React from the root DOM node.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Once you call \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" you cannot call \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" again on the root. Attempting to call \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" on an unmounted root will throw a “Cannot update an unmounted root” error.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"Usage \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"hydrating-server-rendered-html\",\"children\":\"Hydrating server-rendered HTML \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If your app’s HTML was generated by \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/createRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"react-dom/server\"}]}],\", you need to \",[\"$r\",\"em\",null,{\"children\":\"hydrate\"}],\" it on the client.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 3, \\\"document.getElementById('root')\\\"], [2, 3, \\\"<App />\\\"]]\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\n\\nhydrateRoot(document.getElementById('root'), <App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This will hydrate the server HTML inside the \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"browser DOM node\"}],\" with the \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"React component\"}],\" for your app. Usually, you will do it once at startup. If you use a framework, it might do this behind the scenes for you.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"To hydrate your app, React will “attach” your components’ logic to the initial generated HTML from the server. Hydration turns the initial HTML snapshot from the server into a fully interactive app that runs in the browser.\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"public/index.html\",\"children\":\"<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><h1>Hello, world!</h1><button>You clicked me <!-- -->0<!-- --> times</button></div>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import './styles.css';\\nimport { hydrateRoot } from 'react-dom/client';\\nimport App from './App.js';\\n\\nhydrateRoot(\\n  document.getElementById('root'),\\n  <App />\\n);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function App() {\\n  return (\\n    <>\\n      <h1>Hello, world!</h1>\\n      <Counter />\\n    </>\\n  );\\n}\\n\\nfunction Counter() {\\n  const [count, setCount] = useState(0);\\n  return (\\n    <button onClick={() => setCount(count + 1)}>\\n      You clicked me {count} times\\n    </button>\\n  );\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"120\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You shouldn’t need to call \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" again or to call it in more places. From this point on, React will be managing the DOM of your application. To update the UI, your components will \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"use state\"}],\" instead.\"]}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"The React tree you pass to \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" needs to produce \",[\"$r\",\"strong\",null,{\"children\":\"the same output\"}],\" as it did on the server.\"]}],[\"$r\",\"p\",null,{\"children\":\"This is important for the user experience. The user will spend some time looking at the server-generated HTML before your JavaScript code loads. Server rendering creates an illusion that the app loads faster by showing the HTML snapshot of its output. Suddenly showing different content breaks that illusion. This is why the server render output must match the initial render output on the client.\"}],[\"$r\",\"p\",null,{\"children\":\"The most common causes leading to hydration errors include:\"}],[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"Extra whitespace (like newlines) around the React-generated HTML inside the root node.\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Using checks like \",[\"$r\",\"code\",null,{\"children\":\"typeof window !== 'undefined'\"}],\" in your rendering logic.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Using browser-only APIs like \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"window.matchMedia\"}]}],\" in your rendering logic.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"Rendering different data on the server and the client.\"}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":[\"React recovers from some hydration errors, but \",[\"$r\",\"strong\",null,{\"children\":\"you must fix them like other bugs.\"}],\" In the best case, they’ll lead to a slowdown; in the worst case, event handlers can get attached to the wrong elements.\"]}]]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"hydrating-an-entire-document\",\"children\":\"Hydrating an entire document \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Apps fully built with React can render the entire document as JSX, including the \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"<html>\"}]}],\" tag:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,13}\",\"children\":\"function App() {\\n  return (\\n    <html>\\n      <head>\\n        <meta charSet=\\\"utf-8\\\" />\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n        <link rel=\\\"stylesheet\\\" href=\\\"/styles.css\\\"></link>\\n        <title>My app</title>\\n      </head>\\n      <body>\\n        <Router />\\n      </body>\\n    </html>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To hydrate the entire document, pass the \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Window/document\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"document\"}]}],\" global as the first argument to \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4}\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\nimport App from './App.js';\\n\\nhydrateRoot(document, <App />);\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"suppressing-unavoidable-hydration-mismatch-errors\",\"children\":\"Suppressing unavoidable hydration mismatch errors \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"If a single element’s attribute or text content is unavoidably different between the server and the client (for example, a timestamp), you may silence the hydration mismatch warning.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To silence hydration warnings on an element, add \",[\"$r\",\"code\",null,{\"children\":\"suppressHydrationWarning={true}\"}],\":\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"public/index.html\",\"children\":\"<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><h1>Current Date: <!-- -->01/01/2020</h1></div>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js\",\"children\":\"import './styles.css';\\nimport { hydrateRoot } from 'react-dom/client';\\nimport App from './App.js';\\n\\nhydrateRoot(document.getElementById('root'), <App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js active\",\"children\":\"export default function App() {\\n  return (\\n    <h1 suppressHydrationWarning={true}>\\n      Current Date: {new Date().toLocaleDateString()}\\n    </h1>\\n  );\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"130\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"This only works one level deep, and is intended to be an escape hatch. Don’t overuse it. Unless it’s text content, React still won’t attempt to patch it up, so it may remain inconsistent until future updates.\"}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"handling-different-client-and-server-content\",\"children\":\"Handling different client and server content \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If you intentionally need to render something different on the server and the client, you can do a two-pass rendering. Components that render something different on the client can read a \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"state variable\"}],\" like \",[\"$r\",\"code\",null,{\"children\":\"isClient\"}],\", which you can set to \",[\"$r\",\"code\",null,{\"children\":\"true\"}],\" in an \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useEffect\",\"children\":\"Effect\"}],\":\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"public/index.html\",\"children\":\"<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><h1>Is Server</h1></div>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js\",\"children\":\"import './styles.css';\\nimport { hydrateRoot } from 'react-dom/client';\\nimport App from './App.js';\\n\\nhydrateRoot(document.getElementById('root'), <App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js active\",\"children\":\"import { useState, useEffect } from \\\"react\\\";\\n\\nexport default function App() {\\n  const [isClient, setIsClient] = useState(false);\\n\\n  useEffect(() => {\\n    setIsClient(true);\\n  }, []);\\n\\n  return (\\n    <h1>\\n      {isClient ? 'Is Client' : 'Is Server'}\\n    </h1>\\n  );\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"144\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"This way the initial render pass will render the same content as the server, avoiding mismatches, but an additional pass will happen synchronously right after hydration.\"}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":\"This approach makes hydration slower because your components have to render twice. Be mindful of the user experience on slow connections. The JavaScript code may load significantly later than the initial HTML render, so rendering a different UI immediately after hydration may also feel jarring to the user.\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-a-hydrated-root-component\",\"children\":\"Updating a hydrated root component \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"After the root has finished hydrating, you can call \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.render\"}]}],\" to update the root React component. \",[\"$r\",\"strong\",null,{\"children\":[\"Unlike with \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/createRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"createRoot\"}]}],\", you don’t usually need to do this because the initial content was already rendered as HTML.\"]}]]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If you call \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" at some point after hydration, and the component tree structure matches up with what was previously rendered, React will \",[\"$r\",\"a\",null,{\"href\":\"/learn/preserving-and-resetting-state\",\"children\":\"preserve the state.\"}],\" Notice how you can type in the input, which means that the updates from repeated \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\" calls every second in this example are not destructive:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"public/index.html\",\"children\":\"<!--\\n  All HTML content inside <div id=\\\"root\\\">...</div> was\\n  generated by rendering <App /> with react-dom/server.\\n-->\\n<div id=\\\"root\\\"><h1>Hello, world! <!-- -->0</h1><input placeholder=\\\"Type something here\\\"/></div>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\nimport './styles.css';\\nimport App from './App.js';\\n\\nconst root = hydrateRoot(\\n  document.getElementById('root'),\\n  <App counter={0} />\\n);\\n\\nlet i = 0;\\nsetInterval(() => {\\n  root.render(<App counter={i} />);\\n  i++;\\n}, 1000);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"export default function App({counter}) {\\n  return (\\n    <>\\n      <h1>Hello, world! {counter}</h1>\\n      <input placeholder=\\\"Type something here\\\" />\\n    </>\\n  );\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"160\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"It is uncommon to call \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.render\"}]}],\" on a hydrated root. Usually, you’ll \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"update state\"}],\" inside one of the components instead.\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"show-a-dialog-for-uncaught-errors\",\"children\":\"Show a dialog for uncaught errors \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"By default, React will log all uncaught errors to the console. To implement your own error reporting, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\" root option:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 7, \\\"onUncaughtError\\\"], [2, 7, \\\"error\\\", 1], [3, 7, \\\"errorInfo\\\"], [4, 11, \\\"componentStack\\\"]]\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\n\\nconst root = hydrateRoot(\\n  document.getElementById('root'),\\n  <App />,\\n  {\\n    onUncaughtError: (error, errorInfo) => {\\n      console.error(\\n        'Uncaught error',\\n        error,\\n        errorInfo.componentStack\\n      );\\n    }\\n  }\\n);\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onUncaughtError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" that was thrown.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\" root option to display error dialogs:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\n<html>\\n<head>\\n  <title>My app</title>\\n</head>\\n<body>\\n<!--\\n  Error dialog in raw HTML\\n  since an error in the React app may crash.\\n-->\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\n  <h3>\\n    <pre id=\\\"error-message\\\"></pre>\\n  </h3>\\n  <p>\\n    <pre id=\\\"error-body\\\"></pre>\\n  </p>\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <div id=\\\"error-cause\\\">\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\n    <pre id=\\\"error-cause-message\\\"></pre>\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\n  </div>\\n  <button\\n    id=\\\"error-close\\\"\\n    class=\\\"mb-10\\\"\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\n  >\\n    Close\\n  </button>\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\n</div>\\n<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><div><span>This error shows the error dialog:</span><button>Throw error</button></div></div>\\n</body>\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\nhtml, body { min-height: 300px; }\\n\\n#error-dialog {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  background-color: white;\\n  padding: 15px;\\n  opacity: 0.9;\\n  text-wrap: wrap;\\n  overflow: scroll;\\n}\\n\\n.text-red {\\n  color: red;\\n}\\n\\n.-mb-20 {\\n  margin-bottom: -20px;\\n}\\n\\n.mb-0 {\\n  margin-bottom: 0;\\n}\\n\\n.mb-10 {\\n  margin-bottom: 10px;\\n}\\n\\npre {\\n  text-wrap: wrap;\\n}\\n\\npre.nowrap {\\n  text-wrap: nowrap;\\n}\\n\\n.hidden {\\n display: none;  \\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\n  \\n  // Set the title\\n  errorTitle.innerText = title;\\n  \\n  // Display error message and body\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\n  errorMessage.innerText = heading;\\n  if (body) {\\n    errorBody.innerText = body;\\n  } else {\\n    errorBody.innerText = '';\\n  }\\n\\n  // Display component stack\\n  errorComponentStack.innerText = componentStack;\\n\\n  // Display the call stack\\n  // Since we already displayed the message, strip it, and the first Error: line.\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\n  \\n  // Display the cause, if available\\n  if (error.cause) {\\n    errorCauseMessage.innerText = error.cause.message;\\n    errorCauseStack.innerText = error.cause.stack;\\n    errorCause.classList.remove('hidden');\\n  } else {\\n    errorCause.classList.add('hidden');\\n  }\\n  // Display the close button, if dismissible\\n  if (dismissable) {\\n    errorNotDismissible.classList.add('hidden');\\n    errorClose.classList.remove(\\\"hidden\\\");\\n  } else {\\n    errorNotDismissible.classList.remove('hidden');\\n    errorClose.classList.add(\\\"hidden\\\");\\n  }\\n  \\n  // Show the dialog\\n  errorDialog.classList.remove(\\\"hidden\\\");\\n}\\n\\nexport function reportCaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\n}\\n\\nexport function reportUncaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\n}\\n\\nexport function reportRecoverableError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { hydrateRoot } from \\\"react-dom/client\\\";\\nimport App from \\\"./App.js\\\";\\nimport {reportUncaughtError} from \\\"./reportError\\\";\\nimport \\\"./styles.css\\\";\\nimport {renderToString} from 'react-dom/server';\\n\\nconst container = document.getElementById(\\\"root\\\");\\nconst root = hydrateRoot(container, <App />, {\\n  onUncaughtError: (error, errorInfo) => {\\n    if (error.message !== 'Known error') {\\n      reportUncaughtError({\\n        error,\\n        componentStack: errorInfo.componentStack\\n      });\\n    }\\n  }\\n});\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function App() {\\n  const [throwError, setThrowError] = useState(false);\\n  \\n  if (throwError) {\\n    foo.bar = 'baz';\\n  }\\n  \\n  return (\\n    <div>\\n      <span>This error shows the error dialog:</span>\\n      <button onClick={() => setThrowError(true)}>\\n        Throw error\\n      </button>\\n    </div>\\n  );\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"174\",{\"children\":[\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-error-boundary-errors\",\"children\":\"Displaying Error Boundary errors \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"By default, React will log all errors caught by an Error Boundary to \",[\"$r\",\"code\",null,{\"children\":\"console.error\"}],\". To override this behavior, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\" root option for errors caught by an \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Component#catching-rendering-errors-with-an-error-boundary\",\"children\":\"Error Boundary\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 7, \\\"onCaughtError\\\"], [2, 7, \\\"error\\\", 1], [3, 7, \\\"errorInfo\\\"], [4, 11, \\\"componentStack\\\"]]\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\n\\nconst root = hydrateRoot(\\n  document.getElementById('root'),\\n  <App />,\\n  {\\n    onCaughtError: (error, errorInfo) => {\\n      console.error(\\n        'Caught error',\\n        error,\\n        errorInfo.componentStack\\n      );\\n    }\\n  }\\n);\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onCaughtError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" that was caught by the boundary.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\" root option to display error dialogs or filter known errors from logging:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\n<html>\\n<head>\\n  <title>My app</title>\\n</head>\\n<body>\\n<!--\\n  Error dialog in raw HTML\\n  since an error in the React app may crash.\\n-->\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\n  <h3>\\n    <pre id=\\\"error-message\\\"></pre>\\n  </h3>\\n  <p>\\n    <pre id=\\\"error-body\\\"></pre>\\n  </p>\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <div id=\\\"error-cause\\\">\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\n    <pre id=\\\"error-cause-message\\\"></pre>\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\n  </div>\\n  <button\\n    id=\\\"error-close\\\"\\n    class=\\\"mb-10\\\"\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\n  >\\n    Close\\n  </button>\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\n</div>\\n<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><span>This error will not show the error dialog:</span><button>Throw known error</button><span>This error will show the error dialog:</span><button>Throw unknown error</button></div>\\n</body>\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\nhtml, body { min-height: 300px; }\\n\\n#error-dialog {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  background-color: white;\\n  padding: 15px;\\n  opacity: 0.9;\\n  text-wrap: wrap;\\n  overflow: scroll;\\n}\\n\\n.text-red {\\n  color: red;\\n}\\n\\n.-mb-20 {\\n  margin-bottom: -20px;\\n}\\n\\n.mb-0 {\\n  margin-bottom: 0;\\n}\\n\\n.mb-10 {\\n  margin-bottom: 10px;\\n}\\n\\npre {\\n  text-wrap: wrap;\\n}\\n\\npre.nowrap {\\n  text-wrap: nowrap;\\n}\\n\\n.hidden {\\n display: none;  \\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\n  \\n  // Set the title\\n  errorTitle.innerText = title;\\n  \\n  // Display error message and body\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\n  errorMessage.innerText = heading;\\n  if (body) {\\n    errorBody.innerText = body;\\n  } else {\\n    errorBody.innerText = '';\\n  }\\n\\n  // Display component stack\\n  errorComponentStack.innerText = componentStack;\\n\\n  // Display the call stack\\n  // Since we already displayed the message, strip it, and the first Error: line.\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\n  \\n  // Display the cause, if available\\n  if (error.cause) {\\n    errorCauseMessage.innerText = error.cause.message;\\n    errorCauseStack.innerText = error.cause.stack;\\n    errorCause.classList.remove('hidden');\\n  } else {\\n    errorCause.classList.add('hidden');\\n  }\\n  // Display the close button, if dismissible\\n  if (dismissable) {\\n    errorNotDismissible.classList.add('hidden');\\n    errorClose.classList.remove(\\\"hidden\\\");\\n  } else {\\n    errorNotDismissible.classList.remove('hidden');\\n    errorClose.classList.add(\\\"hidden\\\");\\n  }\\n  \\n  // Show the dialog\\n  errorDialog.classList.remove(\\\"hidden\\\");\\n}\\n\\nexport function reportCaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\n}\\n\\nexport function reportUncaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\n}\\n\\nexport function reportRecoverableError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { hydrateRoot } from \\\"react-dom/client\\\";\\nimport App from \\\"./App.js\\\";\\nimport {reportCaughtError} from \\\"./reportError\\\";\\nimport \\\"./styles.css\\\";\\n\\nconst container = document.getElementById(\\\"root\\\");\\nconst root = hydrateRoot(container, <App />, {\\n  onCaughtError: (error, errorInfo) => {\\n    if (error.message !== 'Known error') {\\n      reportCaughtError({\\n        error,\\n        componentStack: errorInfo.componentStack\\n      });\\n    }\\n  }\\n});\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\n\\nexport default function App() {\\n  const [error, setError] = useState(null);\\n  \\n  function handleUnknown() {\\n    setError(\\\"unknown\\\");\\n  }\\n\\n  function handleKnown() {\\n    setError(\\\"known\\\");\\n  }\\n  \\n  return (\\n    <>\\n      <ErrorBoundary\\n        fallbackRender={fallbackRender}\\n        onReset={(details) => {\\n          setError(null);\\n        }}\\n      >\\n        {error != null && <Throw error={error} />}\\n        <span>This error will not show the error dialog:</span>\\n        <button onClick={handleKnown}>\\n          Throw known error\\n        </button>\\n        <span>This error will show the error dialog:</span>\\n        <button onClick={handleUnknown}>\\n          Throw unknown error\\n        </button>\\n      </ErrorBoundary>\\n      \\n    </>\\n  );\\n}\\n\\nfunction fallbackRender({ resetErrorBoundary }) {\\n  return (\\n    <div role=\\\"alert\\\">\\n      <h3>Error Boundary</h3>\\n      <p>Something went wrong.</p>\\n      <button onClick={resetErrorBoundary}>Reset</button>\\n    </div>\\n  );\\n}\\n\\nfunction Throw({error}) {\\n  if (error === \\\"known\\\") {\\n    throw new Error('Known error')\\n  } else {\\n    foo.bar = 'baz';\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-dom\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\n  },\\n  \\\"main\\\": \\\"/index.js\\\"\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"188\",{\"children\":[\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"show-a-dialog-for-recoverable-hydration-mismatch-errors\",\"children\":\"Show a dialog for recoverable hydration mismatch errors \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"When React encounters a hydration mismatch, it will automatically attempt to recover by rendering on the client. By default, React will log hydration mismatch errors to \",[\"$r\",\"code\",null,{\"children\":\"console.error\"}],\". To override this behavior, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\" root option:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 7, \\\"onRecoverableError\\\"], [2, 7, \\\"error\\\", 1], [3, 11, \\\"error.cause\\\", 1], [4, 7, \\\"errorInfo\\\"], [5, 12, \\\"componentStack\\\"]]\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\n\\nconst root = hydrateRoot(\\n  document.getElementById('root'),\\n  <App />,\\n  {\\n    onRecoverableError: (error, errorInfo) => {\\n      console.error(\\n        'Caught error',\\n        error,\\n        error.cause,\\n        errorInfo.componentStack\\n      );\\n    }\\n  }\\n);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onRecoverableError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" React throws. Some errors may include the original cause as \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"error.cause\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":5,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\" root option to display error dialogs for hydration mismatches:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\n<html>\\n<head>\\n  <title>My app</title>\\n</head>\\n<body>\\n<!--\\n  Error dialog in raw HTML\\n  since an error in the React app may crash.\\n-->\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\n  <h3>\\n    <pre id=\\\"error-message\\\"></pre>\\n  </h3>\\n  <p>\\n    <pre id=\\\"error-body\\\"></pre>\\n  </p>\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\n  <div id=\\\"error-cause\\\">\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\n    <pre id=\\\"error-cause-message\\\"></pre>\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\n  </div>\\n  <button\\n    id=\\\"error-close\\\"\\n    class=\\\"mb-10\\\"\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\n  >\\n    Close\\n  </button>\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\n</div>\\n<!--\\n  HTML content inside <div id=\\\"root\\\">...</div>\\n  was generated from App by react-dom/server.\\n-->\\n<div id=\\\"root\\\"><span>Server</span></div>\\n</body>\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\nhtml, body { min-height: 300px; }\\n\\n#error-dialog {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  background-color: white;\\n  padding: 15px;\\n  opacity: 0.9;\\n  text-wrap: wrap;\\n  overflow: scroll;\\n}\\n\\n.text-red {\\n  color: red;\\n}\\n\\n.-mb-20 {\\n  margin-bottom: -20px;\\n}\\n\\n.mb-0 {\\n  margin-bottom: 0;\\n}\\n\\n.mb-10 {\\n  margin-bottom: 10px;\\n}\\n\\npre {\\n  text-wrap: wrap;\\n}\\n\\npre.nowrap {\\n  text-wrap: nowrap;\\n}\\n\\n.hidden {\\n display: none;  \\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\n  \\n  // Set the title\\n  errorTitle.innerText = title;\\n  \\n  // Display error message and body\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\n  errorMessage.innerText = heading;\\n  if (body) {\\n    errorBody.innerText = body;\\n  } else {\\n    errorBody.innerText = '';\\n  }\\n\\n  // Display component stack\\n  errorComponentStack.innerText = componentStack;\\n\\n  // Display the call stack\\n  // Since we already displayed the message, strip it, and the first Error: line.\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\n  \\n  // Display the cause, if available\\n  if (error.cause) {\\n    errorCauseMessage.innerText = error.cause.message;\\n    errorCauseStack.innerText = error.cause.stack;\\n    errorCause.classList.remove('hidden');\\n  } else {\\n    errorCause.classList.add('hidden');\\n  }\\n  // Display the close button, if dismissible\\n  if (dismissable) {\\n    errorNotDismissible.classList.add('hidden');\\n    errorClose.classList.remove(\\\"hidden\\\");\\n  } else {\\n    errorNotDismissible.classList.remove('hidden');\\n    errorClose.classList.add(\\\"hidden\\\");\\n  }\\n  \\n  // Show the dialog\\n  errorDialog.classList.remove(\\\"hidden\\\");\\n}\\n\\nexport function reportCaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\n}\\n\\nexport function reportUncaughtError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\n}\\n\\nexport function reportRecoverableError({error, cause, componentStack}) {\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { hydrateRoot } from \\\"react-dom/client\\\";\\nimport App from \\\"./App.js\\\";\\nimport {reportRecoverableError} from \\\"./reportError\\\";\\nimport \\\"./styles.css\\\";\\n\\nconst container = document.getElementById(\\\"root\\\");\\nconst root = hydrateRoot(container, <App />, {\\n  onRecoverableError: (error, errorInfo) => {\\n    reportRecoverableError({\\n      error,\\n      cause: error.cause,\\n      componentStack: errorInfo.componentStack\\n    });\\n  }\\n});\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\n\\nexport default function App() {\\n  const [error, setError] = useState(null);\\n  \\n  function handleUnknown() {\\n    setError(\\\"unknown\\\");\\n  }\\n\\n  function handleKnown() {\\n    setError(\\\"known\\\");\\n  }\\n  \\n  return (\\n    <span>{typeof window !== 'undefined' ? 'Client' : 'Server'}</span>\\n  );\\n}\\n\\nfunction fallbackRender({ resetErrorBoundary }) {\\n  return (\\n    <div role=\\\"alert\\\">\\n      <h3>Error Boundary</h3>\\n      <p>Something went wrong.</p>\\n      <button onClick={resetErrorBoundary}>Reset</button>\\n    </div>\\n  );\\n}\\n\\nfunction Throw({error}) {\\n  if (error === \\\"known\\\") {\\n    throw new Error('Known error')\\n  } else {\\n    foo.bar = 'baz';\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-dom\\\": \\\"19.0.0-rc-3edc000d-20240926\\\",\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\n  },\\n  \\\"main\\\": \\\"/index.js\\\"\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"Troubleshooting \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-you-passed-a-second-argument-to-root-render\",\"children\":\"I’m getting an error: “You passed a second argument to root.render” \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"A common mistake is to pass the options for \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}],\" to \",[\"$r\",\"code\",null,{\"children\":\"root.render(...)\"}],\":\"]}],\"\\n\",[\"$r\",\"ConsoleBlock\",null,{\"level\":\"error\",\"children\":[\"$r\",\"p\",null,{\"children\":\"Warning: You passed a second argument to root.render(…) but it only accepts one argument.\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To fix, pass the root options to \",[\"$r\",\"code\",null,{\"children\":\"hydrateRoot(...)\"}],\", not \",[\"$r\",\"code\",null,{\"children\":\"root.render(...)\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5}\",\"children\":\"// 🚩 Wrong: root.render only takes one argument.\\nroot.render(App, {onUncaughtError});\\n\\n// ✅ Correct: pass options to createRoot.\\nconst root = hydrateRoot(container, <App />, {onUncaughtError});\\n\"}]}]]}]]","meta":{"title":"hydrateRoot"},"languages":null},"__N_SSG":true}
import{t as x}from"./index.DRIJlSxF.js";import{t as z}from"./index.BaP1Ew-9.js";import{d as D}from"./configurable.C7TV9RQd.js";import{u as H,g as j}from"./index.CGnDy86n.js";import{u as B}from"./index.CFoihoJv.js";import{u as N}from"./index.HhnJSijj.js";import{f as m,x as _}from"./vue.CliZxonC.js";const q="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function J(i={}){const{selector:k="html",attribute:b="class",initialValue:f="auto",window:t=D,storage:A,storageKey:p="vueuse-color-scheme",listenToStorageChanges:L=!0,storageRef:M,emitAuto:R,disableTransition:g=!0}=i,h={auto:"",light:"light",dark:"dark",...i.modes||{}},E=N({window:t}),C=m(()=>E.value?"dark":"light"),o=M||(p==null?x(f):H(p,f,A,{window:t,listenToStorageChanges:L})),u=m(()=>o.value==="auto"?C.value:o.value),O=j("updateHTMLAttrs",(e,y,T)=>{const l=typeof e=="string"?t==null?void 0:t.document.querySelector(e):B(e);if(!l)return;const c=new Set,d=new Set;let a=null;if(y==="class"){const s=T.split(/\s/g);Object.values(h).flatMap(r=>(r||"").split(/\s/g)).filter(Boolean).forEach(r=>{s.includes(r)?c.add(r):d.add(r)})}else a={key:y,value:T};if(c.size===0&&d.size===0&&a===null)return;let n;g&&(n=t.document.createElement("style"),n.appendChild(document.createTextNode(q)),t.document.head.appendChild(n));for(const s of c)l.classList.add(s);for(const s of d)l.classList.remove(s);a&&l.setAttribute(a.key,a.value),g&&(t.getComputedStyle(n).opacity,document.head.removeChild(n))});function S(e){O(k,b,h[e]??e)}function v(e){i.onChanged?i.onChanged(e,S):S(e)}_(u,v,{flush:"post",immediate:!0}),z(()=>v(u.value));const w=m({get(){return R?o.value:u.value},set(e){o.value=e}});return Object.assign(w,{store:o,system:C,state:u})}export{J as u};

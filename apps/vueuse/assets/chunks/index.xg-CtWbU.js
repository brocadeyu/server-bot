import{c as m}from"./index.BaH89Rsy.js";import{c as p}from"./configurable.C7TV9RQd.js";import{u as v}from"./index.C2bU4x7s.js";import{u as d}from"./index.BZhC5QYF.js";import{v as l,Q as y}from"./vue.CliZxonC.js";function P(e,c={}){const{controls:r=!1,navigator:a=p}=c,s=d(()=>a&&"permissions"in a),t=l(),f=typeof e=="string"?{name:e}:e,o=l(),n=()=>{var u;o.value=((u=t.value)==null?void 0:u.state)??"prompt"};v(t,"change",n);const i=m(async()=>{if(s.value){if(!t.value)try{t.value=await a.permissions.query(f)}catch{t.value=void 0}finally{n()}if(r)return y(t.value)}});return i(),r?{state:o,isSupported:s,query:i}:o}export{P as u};

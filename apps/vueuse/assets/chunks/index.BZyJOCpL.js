import{n as l,e as w,d as I,t as a}from"./configurable.C7TV9RQd.js";import{u as i}from"./index.CFoihoJv.js";import{u as d}from"./index.C2bU4x7s.js";let h=!1;function S(s,m,E={}){const{window:r=I,ignore:k=[],capture:y=!0,detectIframe:A=!1}=E;if(!r)return l;w&&!h&&(h=!0,Array.from(r.document.body.children).forEach(e=>e.addEventListener("click",l)),r.document.documentElement.addEventListener("click",l));let n=!0;const f=e=>a(k).some(t=>{if(typeof t=="string")return Array.from(r.document.querySelectorAll(t)).some(o=>o===e.target||e.composedPath().includes(o));{const o=i(t);return o&&(e.target===o||e.composedPath().includes(o))}});function P(e){const t=a(e);return t&&t.$.subTree.shapeFlag===16}function b(e,t){const o=a(e),c=o.$.subTree&&o.$.subTree.children;return c==null||!Array.isArray(c)?!1:c.some(p=>p.el===t.target||t.composedPath().includes(p.el))}const g=e=>{const t=i(s);if(e.target!=null&&!(!(t instanceof Element)&&P(s)&&b(s,e))&&!(!t||t===e.target||e.composedPath().includes(t))){if(e.detail===0&&(n=!f(e)),!n){n=!0;return}m(e)}};let u=!1;const T=[d(r,"click",e=>{u||(u=!0,setTimeout(()=>{u=!1},0),g(e))},{passive:!0,capture:y}),d(r,"pointerdown",e=>{const t=i(s);n=!f(e)&&!!(t&&!e.composedPath().includes(t))},{passive:!0}),A&&d(r,"blur",e=>{setTimeout(()=>{var o;const t=i(s);((o=r.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(t!=null&&t.contains(r.document.activeElement))&&m(e)},0)})].filter(Boolean);return()=>T.forEach(e=>e())}export{S as o};

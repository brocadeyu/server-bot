import{c as i}from"./index.RaJregKa.js";import{r as l,f as o,m as _}from"./vue.CliZxonC.js";import{j as F}from"./configurable.C7TV9RQd.js";function v(t){return t}function H(t,s){return t.value=s}function O(t){return t?typeof t=="function"?t:i:v}function P(t){return t?typeof t=="function"?t:i:v}function w(t,s={}){const{clone:r=!1,dump:p=O(r),parse:m=P(r),setSource:h=H}=s;function f(){return _({snapshot:p(t.value),timestamp:F()})}const u=l(f()),e=l([]),a=l([]),c=n=>{h(t,m(n.snapshot)),u.value=n},d=()=>{e.value.unshift(u.value),u.value=f(),s.capacity&&e.value.length>s.capacity&&e.value.splice(s.capacity,Number.POSITIVE_INFINITY),a.value.length&&a.value.splice(0,a.value.length)},y=()=>{e.value.splice(0,e.value.length),a.value.splice(0,a.value.length)},S=()=>{const n=e.value.shift();n&&(a.value.unshift(u.value),c(n))},g=()=>{const n=a.value.shift();n&&(e.value.unshift(u.value),c(n))},I=()=>{c(u.value)},N=o(()=>[u.value,...e.value]),R=o(()=>e.value.length>0),k=o(()=>a.value.length>0);return{source:t,undoStack:e,redoStack:a,last:u,history:N,canUndo:R,canRedo:k,clear:y,commit:d,reset:I,undo:S,redo:g}}export{w as u};

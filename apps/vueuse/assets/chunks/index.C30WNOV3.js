import{w as E}from"./index._Xu8Z1If.js";import{d as O}from"./configurable.C7TV9RQd.js";import{u as d}from"./index.C2bU4x7s.js";import{y}from"./vue.CliZxonC.js";function R(i="history",m={}){const{initialValue:o={},removeNullishValues:$=!0,removeFalsyValues:w=!1,write:g=!0,writeMode:S="replace",window:t=O}=m;if(!t)return y(o);const s=y({});function x(){if(i==="history")return t.location.search||"";if(i==="hash"){const r=t.location.hash||"",e=r.indexOf("?");return e>0?r.slice(e):""}else return(t.location.hash||"").replace(/^#/,"")}function c(r){const e=r.toString();if(i==="history")return`${e?`?${e}`:""}${t.location.hash||""}`;if(i==="hash-params")return`${t.location.search||""}${e?`#${e}`:""}`;const a=t.location.hash||"#",n=a.indexOf("?");return n>0?`${t.location.search||""}${a.slice(0,n)}${e?`?${e}`:""}`:`${t.location.search||""}${a}${e?`?${e}`:""}`}function l(){return new URLSearchParams(x())}function h(r){const e=new Set(Object.keys(s));for(const a of r.keys()){const n=r.getAll(a);s[a]=n.length>1?n:r.get(a)||"",e.delete(a)}Array.from(e).forEach(a=>delete s[a])}const{pause:b,resume:v}=E(s,()=>{const r=new URLSearchParams("");Object.keys(s).forEach(e=>{const a=s[e];Array.isArray(a)?a.forEach(n=>r.append(e,n)):$&&a==null||w&&!a?r.delete(e):r.set(e,a)}),u(r,!1)},{deep:!0});function u(r,e){b(),e&&h(r),S==="replace"?t.history.replaceState(t.history.state,t.document.title,t.location.pathname+c(r)):t.history.pushState(t.history.state,t.document.title,t.location.pathname+c(r)),v()}function f(){g&&u(l(),!0)}d(t,"popstate",f,!1),i!=="history"&&d(t,"hashchange",f,!1);const p=l();return p.keys().next().value?h(p):Object.assign(s,o),s}export{R as u};

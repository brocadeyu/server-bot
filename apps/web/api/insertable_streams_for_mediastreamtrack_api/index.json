{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Insertable Streams for MediaStreamTrack API","mdn_url":"/en-US/docs/Web/API/Insertable_Streams_for_MediaStreamTrack_API","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li class=\"section\"><em><a href=\"/en-US/docs/Web/API/Insertable_Streams_for_MediaStreamTrack_API\" aria-current=\"page\">Insertable Streams for MediaStreamTrack API</a></em></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaStreamTrackGenerator\"><code>MediaStreamTrackGenerator</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaStreamTrackProcessor\"><code>MediaStreamTrackProcessor</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong>Insertable Streams for MediaStreamTrack API</strong> provides a method of adding new components to a <a href=\"/en-US/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a>.</p>"}},{"type":"prose","value":{"id":"concepts_and_usage","title":"Concepts and Usage","isH3":false,"content":"<p>When processing video or audio, you sometimes want to insert additional elements or otherwise process the stream. For example, an application might include two tracks that need to be combined, such as a weather map and video of a presenter explaining the map. Or, you may want to do processing on a track to blur backgrounds, remove background noise, or introduce other elements (such as adding funny hats to people, and so on). This API provides a method to do this by giving direct access to the stream, thus allowing it to be manipulated.</p>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"mediastreamtrackgenerator\"><a href=\"/en-US/docs/Web/API/MediaStreamTrackGenerator\"><code>MediaStreamTrackGenerator</code></a></dt>\n  <dd>\n    <p>Creates a <a href=\"/en-US/docs/Web/API/WritableStream\"><code>WritableStream</code></a> that acts as a <a href=\"/en-US/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a> source.</p>\n  </dd>\n  <dt id=\"mediastreamtrackprocessor\"><a href=\"/en-US/docs/Web/API/MediaStreamTrackProcessor\"><code>MediaStreamTrackProcessor</code></a></dt>\n  <dd>\n    <p>Consumes a <a href=\"/en-US/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a> object's source and generates a stream of media frames.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>The following example is from the article <a href=\"https://developer.chrome.com/docs/capabilities/web-apis/mediastreamtrack-insertable-media-processing\" class=\"external\" target=\"_blank\">Insertable streams for MediaStreamTrack</a>, and demonstrates a barcode scanner application that highlights a barcode in a video stream. This transforms the stream accessed via <a href=\"/en-US/docs/Web/API/MediaStreamTrackProcessor/readable\"><code>MediaStreamTrackProcessor.readable</code></a>.</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const stream = await getUserMedia({ video: true });\nconst videoTrack = stream.getVideoTracks()[0];\n\nconst trackProcessor = new MediaStreamTrackProcessor({ track: videoTrack });\nconst trackGenerator = new MediaStreamTrackGenerator({ kind: \"video\" });\n\nconst transformer = new TransformStream({\n  async transform(videoFrame, controller) {\n    const barcodes = await detectBarcodes(videoFrame);\n    const newFrame = highlightBarcodes(videoFrame, barcodes);\n    videoFrame.close();\n    controller.enqueue(newFrame);\n  },\n});\n\ntrackProcessor.readable\n  .pipeThrough(transformer)\n  .pipeTo(trackGenerator.writable);\n</code></pre></div>"}}],"toc":[{"text":"Concepts and Usage","id":"concepts_and_usage"},{"text":"Interfaces","id":"interfaces"},{"text":"Examples","id":"examples"}],"summary":"The Insertable Streams for MediaStreamTrack API provides a method of adding new components to a MediaStreamTrack.","popularity":0.0018,"modified":null,"other_translations":[],"pageType":"web-api-overview","source":{"folder":"en-us/web/api/insertable_streams_for_mediastreamtrack_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/insertable_streams_for_mediastreamtrack_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/null","filename":"index.md"},"short_title":"Insertable Streams for MediaStreamTrack API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Insertable_Streams_for_MediaStreamTrack_API","title":"Insertable Streams for MediaStreamTrack API"}],"pageTitle":"Insertable Streams for MediaStreamTrack API - Web APIs | MDN","noIndexing":false},"url":"/en-US/docs/Web/API/Insertable_Streams_for_MediaStreamTrack_API"}
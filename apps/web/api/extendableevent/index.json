{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"ExtendableEvent","mdn_url":"/en-US/docs/Web/API/ExtendableEvent","locale":"en-US","native":"English (US)","browserCompat":["api.ExtendableEvent"],"baseline":{"baseline":"high","baseline_high_date":"2020-10-30","baseline_low_date":"2018-04-30","support":{"chrome":"45","chrome_android":"45","edge":"17","firefox":"44","firefox_android":"44","safari":"11.1","safari_ios":"11.3"}},"sidebarHTML":"<ol><li class=\"section\"><a href=\"/en-US/docs/Web/API/Service_Worker_API\">Service Worker API</a></li><li class=\"section\"><em><a href=\"/en-US/docs/Web/API/ExtendableEvent\" aria-current=\"page\"><code>ExtendableEvent</code></a></em></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/ExtendableEvent/ExtendableEvent\"><code>ExtendableEvent()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\"><code>waitUntil()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance</summary><ol><li><a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Service Workers API</summary><ol><li><a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a></li><li><a href=\"/en-US/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></li><li><a href=\"/en-US/docs/Web/API/Client\"><code>Client</code></a></li><li><a href=\"/en-US/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/en-US/docs/Web/API/ExtendableMessageEvent\"><code>ExtendableMessageEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/NavigationPreloadManager\"><code>NavigationPreloadManager</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a href=\"/en-US/docs/Web/API/Window/caches\"><code>Window.caches</code></a></li><li><a href=\"/en-US/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerGlobalScope/caches\"><code>WorkerGlobalScope.caches</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator/serviceWorker\"><code>WorkerNavigator.serviceWorker</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard note\">\n  <p><strong>Note:</strong> This feature is only available in <a href=\"/en-US/docs/Web/API/Service_Worker_API\">Service Workers</a>.</p>\n</div>\n<p>The <strong><code>ExtendableEvent</code></strong> interface extends the lifetime of the <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\"><code>install</code></a> and <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\"><code>activate</code></a> events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like <a href=\"/en-US/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a>) are not dispatched until it upgrades database schemas and deletes the outdated cache entries.</p>\n<p>If <a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\" title=\"waitUntil()\"><code>waitUntil()</code></a> is called outside of the <code>ExtendableEvent</code> handler, the browser should throw an <code>InvalidStateError</code>; note also that multiple calls will stack up, and the resulting promises will be added to the list of <a href=\"https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises\" class=\"external\" target=\"_blank\">extend lifetime promises</a>.</p>\n<p>This interface inherits from the <a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a> interface.</p><svg viewBox=\"-1 -1 650 42\" preserveAspectRatio=\"xMinYMin meet\">\n  <a style=\"text-decoration: none;\" href=\"/en-US/docs/Web/API/Event\">\n    <rect x=\"0\" y=\"0\" width=\"75\" height=\"25\" fill=\"#fff\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"37.5\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      Event\n    </text>\n  </a>\n  <line x1=\"75\" y1=\"14\" x2=\"105\" y2=\"14\" stroke=\"#D4DDE4\"></line>\n  <polyline points=\"75,14 85,9 85,19 75,14\" stroke=\"#D4DDE4\" fill=\"#fff\"></polyline>\n  <a style=\"text-decoration: none;\" href=\"/en-US/docs/Web/API/ExtendableEvent\" aria-current=\"page\">\n    <rect x=\"105\" y=\"0\" width=\"120\" height=\"25\" fill=\"#F4F7F8\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"165\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      ExtendableEvent\n    </text>\n  </a></svg>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> This interface is only available when the global scope is a <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a>. It is not available when it is a <a href=\"/en-US/docs/Web/API/Window\"><code>Window</code></a>, or the scope of another kind of worker.</p>\n</div>"}},{"type":"prose","value":{"id":"constructor","title":"Constructor","isH3":false,"content":"<dl>\n  <dt id=\"extendableevent\"><a href=\"/en-US/docs/Web/API/ExtendableEvent/ExtendableEvent\" title=\"ExtendableEvent()\"><code>ExtendableEvent()</code></a></dt>\n  <dd>\n    <p>Creates a new <code>ExtendableEvent</code> object.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"instance_properties","title":"Instance properties","isH3":false,"content":"<p><em>Doesn't implement any specific properties, but inherits properties from its parent, <a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a>.</em></p>"}},{"type":"prose","value":{"id":"instance_methods","title":"Instance methods","isH3":false,"content":"<p><em>Inherits methods from its parent, <a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a></em>.</p>\n<dl>\n  <dt id=\"extendableevent.waituntil\"><a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\" title=\"ExtendableEvent.waitUntil()\"><code>ExtendableEvent.waitUntil()</code></a></dt>\n  <dd>\n    <p>Extends the lifetime of the event. It is intended to be called in the <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\"><code>install</code></a> <a href=\"/en-US/docs/Web/Events/Event_handlers\">event handler</a> for the <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/installing\" title=\"installing\"><code>installing</code></a> worker and on the <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\"><code>activate</code></a> <a href=\"/en-US/docs/Web/Events/Event_handlers\">event handler</a> for the <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/active\" title=\"active\"><code>active</code></a> worker.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>This code snippet is from the <a href=\"https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/prefetch/service-worker.js\" class=\"external\" target=\"_blank\">service worker prefetch sample</a> (see <a href=\"https://googlechrome.github.io/samples/service-worker/prefetch/\" class=\"external\" target=\"_blank\">prefetch example live</a>.) The code calls <a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\"><code>ExtendableEvent.waitUntil()</code></a> in <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\" title=\"oninstall\"><code>oninstall</code></a>, delaying treating the <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/installing\"><code>ServiceWorkerRegistration.installing</code></a> worker as installed until the passed promise resolves successfully. The promise resolves when all resources have been fetched and cached, or else when any exception occurs.</p>\n<p>The code snippet also shows a best practice for versioning caches used by the service worker. Though there's only one cache in this example, the same approach can be used for multiple caches. It maps a shorthand identifier for a cache to a specific, versioned cache name.</p>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> In Chrome, logging statements are visible via the \"Inspect\" interface for the relevant service worker accessed via chrome://serviceworker-internals.</p>\n</div>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const CACHE_VERSION = 1;\nconst CURRENT_CACHES = {\n  prefetch: `prefetch-cache-v${CACHE_VERSION}`,\n};\n\nself.addEventListener(\"install\", (event) =&gt; {\n  const urlsToPrefetch = [\n    \"./static/pre_fetched.txt\",\n    \"./static/pre_fetched.html\",\n    \"https://www.chromium.org/_/rsrc/1302286216006/config/customLogo.gif\",\n  ];\n\n  console.log(\n    \"Handling install event. Resources to pre-fetch:\",\n    urlsToPrefetch,\n  );\n\n  event.waitUntil(\n    caches\n      .open(CURRENT_CACHES[\"prefetch\"])\n      .then((cache) =&gt; {\n        return cache\n          .addAll(\n            urlsToPrefetch.map((urlToPrefetch) =&gt; {\n              return new Request(urlToPrefetch, { mode: \"no-cors\" });\n            }),\n          )\n          .then(() =&gt; {\n            console.log(\"All resources have been fetched and cached.\");\n          });\n      })\n      .catch((error) =&gt; {\n        console.error(\"Pre-fetching failed:\", error);\n      }),\n  );\n});\n</code></pre></div>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> When fetching resources, it's very important to use <code>{mode: 'no-cors'}</code> if there is any chance that the resources are served off of a server that doesn't support <a href=\"/en-US/docs/Glossary/CORS\">CORS</a>. In this example, <a href=\"https://www.chromium.org/\" class=\"external\" target=\"_blank\">www.chromium.org</a> doesn't support CORS.</p>\n</div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#extendableevent-interface","title":"Service Workers"}],"query":"api.ExtendableEvent"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.ExtendableEvent"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers\">Using Service Workers</a></li>\n  <li><a href=\"https://github.com/mdn/dom-examples/tree/main/service-worker/simple-service-worker\" class=\"external\" target=\"_blank\">Service workers basic code example</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">Using web workers</a></li>\n</ul>"}}],"toc":[{"text":"Constructor","id":"constructor"},{"text":"Instance properties","id":"instance_properties"},{"text":"Instance methods","id":"instance_methods"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The ExtendableEvent interface extends the lifetime of the install and activate events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like FetchEvent) are not dispatched until it upgrades database schemas and deletes the outdated cache entries.","popularity":0.0012,"modified":"2020-10-15T21:31:17.228Z","other_translations":[],"pageType":"web-api-interface","source":{"folder":"en-us/web/api/extendableevent","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/extendableevent/index.md","last_commit_url":"https://github.com/mdn/content/commit/null","filename":"index.md"},"short_title":"ExtendableEvent","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/ExtendableEvent","title":"ExtendableEvent"}],"pageTitle":"ExtendableEvent - Web APIs | MDN","noIndexing":false},"url":"/en-US/docs/Web/API/ExtendableEvent"}
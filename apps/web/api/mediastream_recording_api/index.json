{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"MediaStream Recording API","mdn_url":"/en-US/docs/Web/API/MediaStream_Recording_API","locale":"en-US","native":"English (US)","browserCompat":["api.MediaRecorder"],"sidebarHTML":"<ol><li class=\"section\"><em><a href=\"/en-US/docs/Web/API/MediaStream_Recording_API\" aria-current=\"page\">MediaStream Recording API</a></em></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API\">Using the MediaStream Recording API</a></li><li><a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element\">Recording a media element</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaRecorder\"><code>MediaRecorder</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaRecorderErrorEvent\"><code>MediaRecorderErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/BlobEvent\"><code>BlobEvent</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong>MediaStream Recording API</strong>, sometimes referred to as the <em>Media Recording API</em> or the <em>MediaRecorder API</em>, is closely affiliated with the <a href=\"/en-US/docs/Web/API/Media_Capture_and_Streams_API\">Media Capture and Streams API</a> and the <a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a>. The MediaStream Recording API makes it possible to capture the data generated by a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> or <a href=\"/en-US/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a> object for analysis, processing, or saving to disk. It's also surprisingly easy to work with.</p>"}},{"type":"prose","value":{"id":"concepts_and_usage","title":"Concepts and usage","isH3":false,"content":"<p>The MediaStream Recording API is comprised of a single major interface, <a href=\"/en-US/docs/Web/API/MediaRecorder\"><code>MediaRecorder</code></a>, which does all the work of taking the data from a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> and delivering it to you for processing. The data is delivered by a series of <a href=\"/en-US/docs/Web/API/MediaRecorder/dataavailable_event\" title=\"dataavailable\"><code>dataavailable</code></a> events, already in the format you specify when creating the <code>MediaRecorder</code>. You can then process the data further or write it to file as desired.</p>"}},{"type":"prose","value":{"id":"overview_of_the_recording_process","title":"Overview of the recording process","isH3":true,"content":"<p>The process of recording a stream is simple:</p>\n<ol>\n  <li>Set up a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> or <a href=\"/en-US/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a> (in the form of an <a href=\"/en-US/docs/Web/HTML/Element/audio\"><code>&lt;audio&gt;</code></a> or <a href=\"/en-US/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a> element) to serve as the source of the media data.</li>\n  <li>Create a <a href=\"/en-US/docs/Web/API/MediaRecorder\"><code>MediaRecorder</code></a> object, specifying the source stream and any desired options (such as the container's MIME type or the desired bit rates of its tracks).</li>\n  <li>Set <a href=\"/en-US/docs/Web/API/MediaRecorder/dataavailable_event\" title=\"ondataavailable\"><code>ondataavailable</code></a> to an event handler for the <a href=\"/en-US/docs/Web/API/MediaRecorder/dataavailable_event\" title=\"dataavailable\"><code>dataavailable</code></a> event; this will be called whenever data is available for you.</li>\n  <li>Once the source media is playing and you've reached the point where you're ready to record video, call <a href=\"/en-US/docs/Web/API/MediaRecorder/start\"><code>MediaRecorder.start()</code></a> to begin recording.</li>\n  <li>Your <a href=\"/en-US/docs/Web/API/MediaRecorder/dataavailable_event\" title=\"dataavailable\"><code>dataavailable</code></a> event handler gets called every time there's data ready for you to do with as you will; the event has a <code>data</code> attribute whose value is a <a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a> that contains the media data. You can force a <code>dataavailable</code> event to occur, thereby delivering the latest sound to you so you can filter it, save it, or whatever.</li>\n  <li>Recording stops automatically when the source media stops playing.</li>\n  <li>You can stop recording at any time by calling <a href=\"/en-US/docs/Web/API/MediaRecorder/stop\"><code>MediaRecorder.stop()</code></a>.</li>\n</ol>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> Individual <a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a>s containing slices of the recorded media will not necessarily be individually playable. The media needs to be reassembled before playback.</p>\n</div>\n<p>If anything goes wrong during recording, an <a href=\"/en-US/docs/Web/API/MediaRecorder/error_event\" title=\"error\"><code>error</code></a> event is sent to the <code>MediaRecorder</code>. You can listen for <code>error</code> events by setting up a <a href=\"/en-US/docs/Web/API/MediaRecorder/error_event\" title=\"onerror\"><code>onerror</code></a> event handler.</p>\n<p>Example here, we use an HTML Canvas as source of the <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a>, and stop recording after 9 seconds.</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const canvas = document.querySelector(\"canvas\");\n\n// Optional frames per second argument.\nconst stream = canvas.captureStream(25);\nconst recordedChunks = [];\n\nconsole.log(stream);\nconst options = { mimeType: \"video/webm; codecs=vp9\" };\nconst mediaRecorder = new MediaRecorder(stream, options);\n\nmediaRecorder.ondataavailable = handleDataAvailable;\nmediaRecorder.start();\n\nfunction handleDataAvailable(event) {\n  console.log(\"data-available\");\n  if (event.data.size &gt; 0) {\n    recordedChunks.push(event.data);\n    console.log(recordedChunks);\n    download();\n  } else {\n    // â€¦\n  }\n}\nfunction download() {\n  const blob = new Blob(recordedChunks, {\n    type: \"video/webm\",\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  document.body.appendChild(a);\n  a.style = \"display: none\";\n  a.href = url;\n  a.download = \"test.webm\";\n  a.click();\n  window.URL.revokeObjectURL(url);\n}\n\n// demo: to download after 9sec\nsetTimeout((event) =&gt; {\n  console.log(\"stopping\");\n  mediaRecorder.stop();\n}, 9000);\n</code></pre></div>"}},{"type":"prose","value":{"id":"examining_and_controlling_the_recorder_status","title":"Examining and controlling the recorder status","isH3":true,"content":"<p>You can also use the properties of the <code>MediaRecorder</code> object to determine the state of the recording process, and its <a href=\"/en-US/docs/Web/API/MediaRecorder/pause\" title=\"pause()\"><code>pause()</code></a> and <a href=\"/en-US/docs/Web/API/MediaRecorder/resume\" title=\"resume()\"><code>resume()</code></a> methods to pause and resume recording of the source media.</p>\n<p>If you need or want to check to see if a specific MIME type is supported, that's possible as well. Just call <a href=\"/en-US/docs/Web/API/MediaRecorder/isTypeSupported_static\" title=\"MediaRecorder.isTypeSupported()\"><code>MediaRecorder.isTypeSupported()</code></a>.</p>"}},{"type":"prose","value":{"id":"examining_potential_input_sources","title":"Examining potential input sources","isH3":true,"content":"<p>If your goal is to record camera and/or microphone input, you may wish to examine the available input devices before beginning the process of constructing the <code>MediaRecorder</code>. To do so, you'll need to call <a href=\"/en-US/docs/Web/API/MediaDevices/enumerateDevices\" title=\"navigator.mediaDevices.enumerateDevices()\"><code>navigator.mediaDevices.enumerateDevices()</code></a> to get a list of the available media devices. You can then examine that list and identify the potential input sources, and even filter the list based on desired criteria.</p>\n<p>In this code snippet, <code>enumerateDevices()</code> is used to examine the available input devices, locate those which are audio input devices, and create <a href=\"/en-US/docs/Web/HTML/Element/option\"><code>&lt;option&gt;</code></a> elements that are then added to a <a href=\"/en-US/docs/Web/HTML/Element/select\"><code>&lt;select&gt;</code></a> element representing an input source picker.</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>navigator.mediaDevices.enumerateDevices().then((devices) =&gt; {\n  devices.forEach((device) =&gt; {\n    const menu = document.getElementById(\"input-devices\");\n    if (device.kind === \"audioinput\") {\n      const item = document.createElement(\"option\");\n      item.textContent = device.label;\n      item.value = device.deviceId;\n      menu.appendChild(item);\n    }\n  });\n});\n</code></pre></div>\n<p>Code similar to this can be used to let the user restrict the set of devices they wish to use.</p>"}},{"type":"prose","value":{"id":"for_more_information","title":"For more information","isH3":true,"content":"<p>To learn more about using the MediaStream Recording API, see <a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API\">Using the MediaStream Recording API</a>, which shows how to use the API to record audio clips. A second article, <a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element\">Recording a media element</a>, describes how to receive a stream from an <a href=\"/en-US/docs/Web/HTML/Element/audio\"><code>&lt;audio&gt;</code></a> or <a href=\"/en-US/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a> element and use the captured stream (in this case, recording it and saving it to a local disk).</p>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"blobevent\"><a href=\"/en-US/docs/Web/API/BlobEvent\"><code>BlobEvent</code></a></dt>\n  <dd>\n    <p>Each time a chunk of media data is finished being recorded, it's delivered to consumers in <a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a> form using a <a href=\"/en-US/docs/Web/API/BlobEvent\"><code>BlobEvent</code></a> of type <code>dataavailable</code>.</p>\n  </dd>\n  <dt id=\"mediarecorder\"><a href=\"/en-US/docs/Web/API/MediaRecorder\"><code>MediaRecorder</code></a></dt>\n  <dd>\n    <p>The primary interface that implements the MediaStream Recording API.</p>\n  </dd>\n  <dt id=\"mediarecordererrorevent\"><a href=\"/en-US/docs/Web/API/MediaRecorderErrorEvent\"><code>MediaRecorderErrorEvent</code></a> <abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr> <abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr></dt>\n  <dd>\n    <p>The interface that represents errors thrown by the MediaStream Recording API. Its <a href=\"/en-US/docs/Web/API/MediaRecorderErrorEvent/error\" title=\"error\"><code>error</code></a> property is a <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a> that specifies that error occurred.</p>\n  </dd>\n</dl>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/mediacapture-record/","title":"MediaStream Recording"}],"query":"api.MediaRecorder"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.MediaRecorder"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Media_Capture_and_Streams_API\">Media Capture and Streams API</a> landing page</li>\n  <li><a href=\"/en-US/docs/Web/API/MediaDevices/getUserMedia\"><code>MediaDevices.getUserMedia()</code></a></li>\n  <li><a href=\"https://simpl.info/mediarecorder/\" class=\"external\" target=\"_blank\">simpl.info MediaStream Recording demo</a>, by <a href=\"https://github.com/samdutton\" class=\"external\" target=\"_blank\">Sam Dutton</a></li>\n  <li><a href=\"https://blog.addpipe.com/mediarecorder-api/\" class=\"external\" target=\"_blank\">HTML5's Media Recorder API in Action on Chrome and Firefox</a></li>\n  <li><a href=\"https://github.com/ai/audio-recorder-polyfill\" class=\"external\" target=\"_blank\">MediaRecorder polyfill</a> for Safari and Edge</li>\n  <li><a href=\"https://github.com/chrisjohndigital/TutorRoom\" class=\"external\" target=\"_blank\">TutorRoom</a>: HTML video capture/playback/download using getUserMedia and the MediaStream Recording API (<a href=\"https://github.com/chrisjohndigital/TutorRoom\" class=\"external\" target=\"_blank\">source on GitHub</a>)</li>\n  <li><a href=\"https://codepen.io/anon/pen/gpmPzm\" class=\"external\" target=\"_blank\">Simple video recording demo</a></li>\n  <li><a href=\"https://quickblox.github.io/javascript-media-recorder/sample/\" class=\"external\" target=\"_blank\">Advanced media stream recorder sample</a></li>\n  <li><a href=\"https://github.com/chrisjohndigital/OpenLang\" class=\"external\" target=\"_blank\">OpenLang</a>: HTML video language lab web application using MediaDevices and the MediaStream Recording API for video recording (<a href=\"https://github.com/chrisjohndigital/OpenLang\" class=\"external\" target=\"_blank\">source on GitHub</a>)</li>\n  <li><a href=\"https://blog.addpipe.com/safari-technology-preview-73-adds-limited-mediastream-recorder-api-support/\" class=\"external\" target=\"_blank\">MediaStream Recorder API Now Available in Safari Technology Preview 73</a></li>\n</ul>"}}],"toc":[{"text":"Concepts and usage","id":"concepts_and_usage"},{"text":"Interfaces","id":"interfaces"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The MediaStream Recording API, sometimes referred to as the Media Recording API or the MediaRecorder API, is closely affiliated with the Media Capture and Streams API and the WebRTC API. The MediaStream Recording API makes it possible to capture the data generated by a MediaStream or HTMLMediaElement object for analysis, processing, or saving to disk. It's also surprisingly easy to work with.","popularity":0.0093,"modified":"2020-10-15T21:50:13.013Z","other_translations":[],"pageType":"web-api-overview","source":{"folder":"en-us/web/api/mediastream_recording_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/mediastream_recording_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/null","filename":"index.md"},"short_title":"MediaStream Recording API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/MediaStream_Recording_API","title":"MediaStream Recording API"}],"pageTitle":"MediaStream Recording API - Web APIs | MDN","noIndexing":false},"url":"/en-US/docs/Web/API/MediaStream_Recording_API"}
{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"CloseWatcher","mdn_url":"/en-US/docs/Web/API/CloseWatcher","locale":"en-US","native":"English (US)","browserCompat":["api.CloseWatcher"],"baseline":{"baseline":false,"support":{"chrome":"126","chrome_android":"126","edge":"126"}},"sidebarHTML":"<ol><li class=\"section\"><a href=\"/en-US/docs/Web/API/HTML_DOM_API\">HTML DOM API</a></li><li class=\"section\"><em><a href=\"/en-US/docs/Web/API/CloseWatcher\" aria-current=\"page\"><code>CloseWatcher</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></em></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/CloseWatcher/CloseWatcher\"><code>CloseWatcher()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/CloseWatcher/close\"><code>close()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/CloseWatcher/destroy\"><code>destroy()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/CloseWatcher/requestClose\"><code>requestClose()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/CloseWatcher/cancel_event\"><code>cancel</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/CloseWatcher/close_event\"><code>close</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for HTML DOM</summary><ol><li><a href=\"/en-US/docs/Web/API/BeforeUnloadEvent\"><code>BeforeUnloadEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/DOMStringMap\"><code>DOMStringMap</code></a></li><li><a href=\"/en-US/docs/Web/API/ErrorEvent\"><code>ErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLAnchorElement\"><code>HTMLAnchorElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLAreaElement\"><code>HTMLAreaElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLAudioElement\"><code>HTMLAudioElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLBRElement\"><code>HTMLBRElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLBaseElement\"><code>HTMLBaseElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLBodyElement\"><code>HTMLBodyElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLButtonElement\"><code>HTMLButtonElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLCanvasElement\"><code>HTMLCanvasElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDListElement\"><code>HTMLDListElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDataElement\"><code>HTMLDataElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDataListElement\"><code>HTMLDataListElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDialogElement\"><code>HTMLDialogElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDivElement\"><code>HTMLDivElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLDocument\"><code>HTMLDocument</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLElement\"><code>HTMLElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLEmbedElement\"><code>HTMLEmbedElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLFieldSetElement\"><code>HTMLFieldSetElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLFormControlsCollection\"><code>HTMLFormControlsCollection</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLFormElement\"><code>HTMLFormElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLFrameSetElement\"><code>HTMLFrameSetElement</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/HTMLHRElement\"><code>HTMLHRElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLHeadElement\"><code>HTMLHeadElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLHeadingElement\"><code>HTMLHeadingElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLHtmlElement\"><code>HTMLHtmlElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLIFrameElement\"><code>HTMLIFrameElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLImageElement\"><code>HTMLImageElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLInputElement\"><code>HTMLInputElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLLIElement\"><code>HTMLLIElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLLabelElement\"><code>HTMLLabelElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLLegendElement\"><code>HTMLLegendElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLLinkElement\"><code>HTMLLinkElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMapElement\"><code>HTMLMapElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMenuElement\"><code>HTMLMenuElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMetaElement\"><code>HTMLMetaElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMeterElement\"><code>HTMLMeterElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLModElement\"><code>HTMLModElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLOListElement\"><code>HTMLOListElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLObjectElement\"><code>HTMLObjectElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLOptGroupElement\"><code>HTMLOptGroupElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLOptionElement\"><code>HTMLOptionElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLOptionsCollection\"><code>HTMLOptionsCollection</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLOutputElement\"><code>HTMLOutputElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLParagraphElement\"><code>HTMLParagraphElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLPictureElement\"><code>HTMLPictureElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLPreElement\"><code>HTMLPreElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLProgressElement\"><code>HTMLProgressElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLQuoteElement\"><code>HTMLQuoteElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLScriptElement\"><code>HTMLScriptElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLSelectElement\"><code>HTMLSelectElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLSourceElement\"><code>HTMLSourceElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLSpanElement\"><code>HTMLSpanElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLStyleElement\"><code>HTMLStyleElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableCaptionElement\"><code>HTMLTableCaptionElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableCellElement\"><code>HTMLTableCellElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableColElement\"><code>HTMLTableColElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableElement\"><code>HTMLTableElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableRowElement\"><code>HTMLTableRowElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTableSectionElement\"><code>HTMLTableSectionElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTemplateElement\"><code>HTMLTemplateElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTextAreaElement\"><code>HTMLTextAreaElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTimeElement\"><code>HTMLTimeElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTitleElement\"><code>HTMLTitleElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLTrackElement\"><code>HTMLTrackElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLUListElement\"><code>HTMLUListElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLUnknownElement\"><code>HTMLUnknownElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a></li><li><a href=\"/en-US/docs/Web/API/HashChangeEvent\"><code>HashChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/History\"><code>History</code></a></li><li><a href=\"/en-US/docs/Web/API/ImageData\"><code>ImageData</code></a></li><li><a href=\"/en-US/docs/Web/API/Location\"><code>Location</code></a></li><li><a href=\"/en-US/docs/Web/API/MessageChannel\"><code>MessageChannel</code></a></li><li><a href=\"/en-US/docs/Web/API/MessageEvent\"><code>MessageEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/MessagePort\"><code>MessagePort</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator\"><code>Navigator</code></a></li><li><a href=\"/en-US/docs/Web/API/PageRevealEvent\"><code>PageRevealEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PageSwapEvent\"><code>PageSwapEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PageTransitionEvent\"><code>PageTransitionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/Plugin\"><code>Plugin</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PluginArray\"><code>PluginArray</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PromiseRejectionEvent\"><code>PromiseRejectionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RadioNodeList\"><code>RadioNodeList</code></a></li><li><a href=\"/en-US/docs/Web/API/UserActivation\"><code>UserActivation</code></a></li><li><a href=\"/en-US/docs/Web/API/ValidityState\"><code>ValidityState</code></a></li><li><a href=\"/en-US/docs/Web/API/Window\"><code>Window</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkletGlobalScope\"><code>WorkletGlobalScope</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <code>CloseWatcher</code> interface allows a custom UI component with open and close semantics to respond to device-specific close actions in the same way as a built-in component.</p><svg viewBox=\"-1 -1 650 42\" preserveAspectRatio=\"xMinYMin meet\">\n  <a style=\"text-decoration: none;\" href=\"/en-US/docs/Web/API/EventTarget\">\n    <rect x=\"0\" y=\"0\" width=\"88\" height=\"25\" fill=\"#fff\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"44\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      EventTarget\n    </text>\n  </a>\n  <line x1=\"88\" y1=\"14\" x2=\"118\" y2=\"14\" stroke=\"#D4DDE4\"></line>\n  <polyline points=\"88,14 98,9 98,19 88,14\" stroke=\"#D4DDE4\" fill=\"#fff\"></polyline>\n  <a style=\"text-decoration: none;\" href=\"/en-US/docs/Web/API/CloseWatcher\" aria-current=\"page\">\n    <rect x=\"118\" y=\"0\" width=\"96\" height=\"25\" fill=\"#F4F7F8\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"166\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      CloseWatcher\n    </text>\n  </a></svg>\n<p>The <code>CloseWatcher</code> interface inherits from <a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a>.</p>"}},{"type":"prose","value":{"id":"constructor","title":"Constructor","isH3":false,"content":"<dl>\n  <dt id=\"closewatcher\"><a href=\"/en-US/docs/Web/API/CloseWatcher/CloseWatcher\" title=\"CloseWatcher()\"><code>CloseWatcher()</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Creates a new <code>CloseWatcher</code> instance.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"instance_methods","title":"Instance methods","isH3":false,"content":"<p><em>This interface also inherits methods from its parent, <a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a>.</em></p>\n<dl>\n  <dt id=\"closewatcher.requestclose\"><a href=\"/en-US/docs/Web/API/CloseWatcher/requestClose\"><code>CloseWatcher.requestClose()</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Fires a <code>cancel</code> event and if that event is not canceled with <a href=\"/en-US/docs/Web/API/Event/preventDefault\"><code>Event.preventDefault()</code></a>, proceeds to fire a <code>close</code> event, and then finally deactivates the close watcher as if <code>destroy()</code> was called.</p>\n  </dd>\n  <dt id=\"closewatcher.close\"><a href=\"/en-US/docs/Web/API/CloseWatcher/close\"><code>CloseWatcher.close()</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Immediately fires the <code>close</code> event, without firing <code>cancel</code> first, and deactivates the close watcher as if <code>destroy()</code> was called.</p>\n  </dd>\n  <dt id=\"closewatcher.destroy\"><a href=\"/en-US/docs/Web/API/CloseWatcher/destroy\"><code>CloseWatcher.destroy()</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Deactivates the close watcher so that it will no longer receive <code>close</code> events.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"events","title":"Events","isH3":false,"content":"<dl>\n  <dt id=\"cancel\"><a href=\"/en-US/docs/Web/API/CloseWatcher/cancel_event\" title=\"cancel\"><code>cancel</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>An event fired before the <code>close</code> event, so that <code>close</code> can be prevented from firing.</p>\n  </dd>\n  <dt id=\"close\"><a href=\"/en-US/docs/Web/API/CloseWatcher/close_event\" title=\"close\"><code>close</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>An event fired when a close request was received.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"description","title":"Description","isH3":false,"content":"<p>Some UI components have \"close behavior\", meaning that the component appears, and the user can close it when they are finished with it. For example: sidebars, popups, dialogs, or notifications.</p>\n<p>Users generally expect to be able to use a particular mechanism to close these elements, and the mechanism tends to be device-specific. For example, on a device with a keyboard it might be the <kbd>Esc</kbd> key, but Android might use the back button. For built-in components, such as <a href=\"/en-US/docs/Web/API/Popover_API\">popover</a> or <a href=\"/en-US/docs/Web/HTML/Element/dialog\"><code>&lt;dialog&gt;</code></a> elements, the browser takes care of these differences, closing the element when the user performs the close action appropriate for the device. However, when a web developer implements their own closable UI component (for example, a sidebar), it is hard to implement this kind of device-specific close behavior.</p>\n<p>\n  The <code>CloseWatcher</code> interface solves this problem by delivering a <code>cancel</code> event, followed by a <code>close</code> event, when the user executes the device-specific close action.\n  Web applications can use the <code>onclose</code> handler to close the UI element in response to the device-specific event.\n  They can also trigger these same events in response to the UI element's normal closing mechanism, and then implement common <code>close</code> event handling for both the application- and device-specific close action.\n  Once the <code>onclose</code> event handler completes the <code>CloseWatcher</code> is destroyed and the events will no longer be fired.\n</p>\n<p>\n  In some applications the UI element may only be allowed to close when it is in a particular state; for example, when some needed information is populated.\n  To address these cases, applications can prevent the <code>close</code> event from being emitted by implementing a handler for the <code>cancel</code> event that calls <a href=\"/en-US/docs/Web/API/Event/preventDefault\"><code>Event.preventDefault()</code></a> if the UI element is not ready to close.\n</p>\n<p>\n  You can create <code>CloseWatcher</code> instances without <a href=\"/en-US/docs/Web/Security/User_activation\">user activation</a>, and this can be useful to implement cases like session inactivity timeout dialogs. However, if you create more than one <code>CloseWatcher</code> without user activation, then the watchers will be grouped, so a single close request will close them both.\n  In addition, the first close watcher does not necessarily have to be a <code>CloseWatcher</code> object: it could be a modal dialog element, or a popover generated by an element with the popover attribute\n</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"processing_close_requests","title":"Processing close requests","isH3":true,"content":"<p>In this example, you have your own UI component (a picker) and you want to support both, the platform's default close method (e.g. the <kbd>Esc</kbd> key) and your custom close method (a close button).</p>\n<p>You create a <code>CloseWatcher</code> to handle all <code>close</code> events.</p>\n<p>The <code>onclick</code> handler of your UI component can call <code>requestClose</code> to request a close and to route your close request through the same <code>onclose</code> handler the platform close method uses.</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const watcher = new CloseWatcher();\nconst picker = setUpAndShowPickerDOMElement();\nlet chosenValue = null;\n\nwatcher.onclose = () =&gt; {\n  chosenValue = picker.querySelector(\"input\").value;\n  picker.remove();\n};\n\npicker.querySelector(\".close-button\").onclick = () =&gt; watcher.requestClose();\n</code></pre></div>"}},{"type":"prose","value":{"id":"closing_a_sidebar_using_a_platform_close_request","title":"Closing a sidebar using a platform close request","isH3":true,"content":"<p>\n  In this example we have a sidebar component that is displayed when an \"Open\" button is selected, and hidden using either a \"Close\" button or platform-native mechanisms.\n  To make it more interesting, this is a live example!\n</p>\n<p>\n  Note also that the example is a little contrived, because normally we would use a toggle button to change a sidebar state.\n  We could certainly do that, but using separate \"Open\" and \"Close\" buttons makes it easier to demonstrate the feature.\n</p>\n<h4 id=\"html\">HTML</h4>\n<p>\n  The HTML defines \"Open\" and \"Close\" <a href=\"/en-US/docs/Web/HTML/Element/button\"><code>&lt;button&gt;</code></a> elements, along with <a href=\"/en-US/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> elements for the main content and the sidebar.\n  CSS is used to animate the display of the sidebar element when the <code>open</code> class is added or removed from the sidebar and content elements (this CSS is hidden because it is not relevant to the example).\n</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">html</span></div><pre class=\"brush: html notranslate\"><code>&lt;button id=\"sidebar-open\" type=\"button\"&gt;Open&lt;/button&gt;\n&lt;button id=\"sidebar-close\" type=\"button\"&gt;Close&lt;/button&gt;\n&lt;div class=\"sidebar\"&gt;Sidebar&lt;/div&gt;\n&lt;div class=\"main-content\"&gt;Main content&lt;/div&gt;\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code>.sidebar {\n  position: fixed;\n  top: 20px;\n  left: -300px;\n  right: auto;\n  bottom: 0;\n  width: 300px; /* Adjust the width as needed */\n  background-color: lightblue;\n}\n\n.main-content {\n  position: fixed;\n  top: 20px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: auto; /* Adjust the width as needed */\n  background-color: green;\n  margin-left: 0px; /* Adjust for the sidebar width */\n}\n\n.sidebar.open {\n  left: 0; /* Slide the sidebar to the right when open */\n  transition: left 0.3s ease-in-out; /* Add a smooth transition effect */\n}\n\n.main-content.open {\n  margin-left: 300px; /* Adjust for the sidebar width */\n  transition: margin-left 0.3s ease-in-out;\n  background-color: green;\n}\n</code></pre></div>\n<h4 id=\"javascript\">JavaScript</h4>\n<p>\n  The code first gets variables for the buttons and <code>&lt;div&gt;</code> elements defined in the HTML.\n  It also defines a function <code>closeSidebar()</code> that is called when the sidebar is closed, to remove the <code>open</code> class from the <code>&lt;div&gt;</code> elements, and adds a <code>click</code> event listener that calls the <code>openSidebar()</code> method when the \"Open\" button is clicked.\n</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const sidebar = document.querySelector(\".sidebar\");\nconst mainContent = document.querySelector(\".main-content\");\nconst sidebarOpen = document.getElementById(\"sidebar-open\");\nconst sidebarClose = document.getElementById(\"sidebar-close\");\n\nfunction closeSidebar() {\n  sidebar.classList.remove(\"open\");\n  mainContent.classList.remove(\"open\");\n}\n\nsidebarOpen.addEventListener(\"click\", openSidebar);\n</code></pre></div>\n<p>\n  The implementation of <code>openSidebar()</code> is given below.\n  The method first checks if the sidebar is already open, and if not, adds the <code>open</code> class to the elements so that the sidebar is displayed.\n</p>\n<p>\n  We then create a new <code>CloseWatcher</code> and add a listener that will call <a href=\"/en-US/docs/Web/API/CloseWatcher/close\" title=\"close()\"><code>close()</code></a> on it if the \"Close\" button is clicked.\n  This ensures that the <code>close</code> event is called when either platform native close methods or the \"Close\" button are used.\n  The implementation of the <code>onclose()</code> event handler simply closes the sidebar, and the <code>CloseWatcher</code> is then destroyed automatically.\n</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>function openSidebar() {\n  if (!sidebar.classList.contains(\"open\")) {\n    sidebar.classList.add(\"open\");\n    mainContent.classList.add(\"open\");\n\n    //Add new CloseWatcher\n    const watcher = new CloseWatcher();\n\n    sidebarClose.addEventListener(\"click\", () =&gt; watcher.close());\n\n    // Handle close event, invoked by platform mechanisms or \"Close\" button\n    watcher.onclose = () =&gt; {\n      closeSidebar();\n    };\n  }\n}\n</code></pre></div>\n<p>Note that we chose to call <code>close()</code> on the watcher instead of <a href=\"/en-US/docs/Web/API/CloseWatcher/requestClose\"><code>CloseWatcher.requestClose()</code></a> because we don't need the <code>cancel</code> event to be emitted (we would use <code>requestClose()</code> and the <code>cancel</code> event handler if there was a reason to ever prevent the sidebar from closing prematurely).</p>\n<h4 id=\"result\">Result</h4>\n<p>Select the \"Open\" button to open the sidebar. You should be able to close the sidebar using the \"Close\" button or the usual platform method, such as the <kbd>Esc</kbd> key on Windows.</p><div class=\"code-example\"><div class=\"example-header\"></div><iframe class=\"sample-code-frame\" title=\"Closing a sidebar using a platform close request sample\" id=\"frame_closing_a_sidebar_using_a_platform_close_request\" width=\"100%\" height=\"200\" src=\"about:blank\" data-live-path=\"/en-US/docs/Web/API/CloseWatcher\" data-live-id=\"closing_a_sidebar_using_a_platform_close_request\" sandbox=\"allow-same-origin allow-scripts\" loading=\"lazy\"></iframe></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://html.spec.whatwg.org/multipage/interaction.html#closewatcher","title":"HTML Standard"}],"query":"api.CloseWatcher"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.CloseWatcher"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/HTMLDialogElement/close_event\" title=\"close\"><code>close</code></a> event on <a href=\"/en-US/docs/Web/API/HTMLDialogElement\"><code>HTMLDialogElement</code></a></li>\n</ul>"}}],"toc":[{"text":"Constructor","id":"constructor"},{"text":"Instance methods","id":"instance_methods"},{"text":"Events","id":"events"},{"text":"Description","id":"description"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The CloseWatcher interface allows a custom UI component with open and close semantics to respond to device-specific close actions in the same way as a built-in component.","popularity":0.0006,"modified":null,"other_translations":[],"pageType":"web-api-interface","source":{"folder":"en-us/web/api/closewatcher","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/closewatcher/index.md","last_commit_url":"https://github.com/mdn/content/commit/null","filename":"index.md"},"short_title":"CloseWatcher","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/CloseWatcher","title":"CloseWatcher"}],"pageTitle":"CloseWatcher - Web APIs | MDN","noIndexing":false},"url":"/en-US/docs/Web/API/CloseWatcher"}
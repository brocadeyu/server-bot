{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"FencedFrameConfig","mdn_url":"/en-US/docs/Web/API/FencedFrameConfig","locale":"en-US","native":"English (US)","browserCompat":["api.FencedFrameConfig"],"baseline":{"baseline":false,"support":{"chrome":"120","chrome_android":"120","edge":"120"}},"sidebarHTML":"<ol><li class=\"section\"><a href=\"/en-US/docs/Web/API/Fenced_frame_API\">Fenced Frame API</a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li class=\"section\"><em><a href=\"/en-US/docs/Web/API/FencedFrameConfig\" aria-current=\"page\"><code>FencedFrameConfig</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></em></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/FencedFrameConfig/setSharedStorageContext\"><code>setSharedStorageContext()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Fenced Frame API</summary><ol><li><a href=\"/en-US/docs/Web/API/Fence\"><code>Fence</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/HTMLFencedFrameElement\"><code>HTMLFencedFrameElement</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Navigator/deprecatedReplaceInURN\"><code>Navigator.deprecatedReplaceInURN</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Window/fence\"><code>Window.fence</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <strong><code>FencedFrameConfig</code></strong> interface represents the navigation of a <a href=\"/en-US/docs/Web/HTML/Element/fencedframe\"><code>&lt;fencedframe&gt;</code></a>, i.e. what content will be displayed in it.</p>\n<p><code>FencedFrameConfig</code> objects cannot be constructed manually via JavaScript. They are returned from a source such as the <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/protected-audience\" class=\"external\" target=\"_blank\">Protected Audience API</a> and set as the value of <a href=\"/en-US/docs/Web/API/HTMLFencedFrameElement/config\"><code>HTMLFencedFrameElement.config</code></a>.</p>\n<p>A <code>FencedFrameConfig</code> object instance has an exposed method, but it also maps to internal config information containing opaque properties not accessible from JavaScript. This includes information such as the source of the loaded content and interest groups for advertising purposes. It is key to how fenced frames help to implement key use cases while respecting user privacy.</p>"}},{"type":"prose","value":{"id":"instance_methods","title":"Instance methods","isH3":false,"content":"<dl>\n  <dt id=\"setsharedstoragecontext\"><a href=\"/en-US/docs/Web/API/FencedFrameConfig/setSharedStorageContext\" title=\"setSharedStorageContext()\"><code>setSharedStorageContext()</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Passes in data from the embedding document to the <code>&lt;fencedframe&gt;</code>'s shared storage.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"basic_usage","title":"Basic usage","isH3":true,"content":"<p>To set what content will be shown in a <code>&lt;fencedframe&gt;</code>, a utilizing API (such as <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/protected-audience\" class=\"external\" target=\"_blank\">Protected Audience</a> or <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/shared-storage\" class=\"external\" target=\"_blank\">Shared Storage</a>) generates a <code>FencedFrameConfig</code> object, which is then set as the value of the <code>&lt;fencedframe&gt;</code>'s <code>config</code> property.</p>\n<p>The following example gets a <code>FencedFrameConfig</code> from a Protected Audience API's ad auction, which is then used to display the winning ad in a <code>&lt;fencedframe&gt;</code>:</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const frameConfig = await navigator.runAdAuction({\n  // ...auction configuration\n  resolveToConfig: true,\n});\n\nconst frame = document.createElement(\"fencedframe\");\nframe.config = frameConfig;\n</code></pre></div>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> <code>resolveToConfig: true</code> must be passed in to the <code>runAdAuction()</code> call to obtain a <code>FencedFrameConfig</code> object. If it is not set, the resulting <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> will resolve to a URN that can only be used in an <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>.</p>\n</div>"}},{"type":"prose","value":{"id":"passing_contextual_data_via_setsharedstoragecontext","title":"Passing contextual data via <code>setSharedStorageContext()</code>","isH3":true,"content":"<p>You can use the <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/private-aggregation\" class=\"external\" target=\"_blank\">Private Aggregation API</a> to create reports that combine event-level data inside fenced frames with contextual data from the embedding document. <code>setSharedStorageContext()</code> can be used to pass contextual data from the embedder to shared storage worklets initiated by the <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/protected-audience\" class=\"external\" target=\"_blank\">Protected Audience API</a>.</p>\n<p>In the following example, we store data from both the embedding page and the fenced frame in <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/shared-storage\" class=\"external\" target=\"_blank\">shared storage</a>.</p>\n<p>In the embedding page, we will set a mock event ID as the shared storage context using <code>setSharedStorageContext()</code>:</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const frameConfig = await navigator.runAdAuction({ resolveToConfig: true });\n\n// Data from the embedder that you want to pass to the shared storage worklet\nframeConfig.setSharedStorageContext(\"some-event-id\");\n\nconst frame = document.createElement(\"fencedframe\");\nframe.config = frameConfig;\n</code></pre></div>\n<p>Inside the fenced frame, we add the worklet module with <a href=\"/en-US/docs/Web/API/Worklet/addModule\" title=\"window.sharedStorage.worklet.addModule()\"><code>window.sharedStorage.worklet.addModule()</code></a>, and then send the event-level data into the shared storage worklet using <a href=\"/en-US/docs/Web/API/WindowSharedStorage/run\" title=\"window.sharedStorage.run()\"><code>window.sharedStorage.run()</code></a> (this is unrelated to the contextual data from the embedding document):</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>const frameData = {\n  // Data available only inside the fenced frame\n};\n\nawait window.sharedStorage.worklet.addModule(\"reporting-worklet.js\");\n\nawait window.sharedStorage.run(\"send-report\", {\n  data: {\n    frameData,\n  },\n});\n</code></pre></div>\n<p>In the <code>reporting-worklet.js</code> worklet, we read the embedding document's event ID from <code>sharedStorage.context</code> and the frame's event-level data from the data object, then report them through <a href=\"https://developers.google.com/privacy-sandbox/private-advertising/private-aggregation\" class=\"external\" target=\"_blank\">Private Aggregation</a>:</p>\n<div class=\"code-example\"><div class=\"example-header\"><span class=\"language-name\">js</span></div><pre class=\"brush: js notranslate\"><code>class ReportingOperation {\n  convertEventIdToBucket(eventId) { ... }\n  convertEventPayloadToValue(info) { ... }\n\n  async run(data) {\n    // Data from the embedder\n    const eventId = sharedStorage.context;\n\n    // Data from the fenced frame\n    const eventPayload = data.frameData;\n\n    privateAggregation.sendHistogramReport({\n      bucket: convertEventIdToBucket(eventId),\n      value: convertEventPayloadToValue(eventPayload)\n    });\n  }\n}\n\nregister('send-report', ReportingOperation);\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://wicg.github.io/fenced-frame/#fenced-frame-config-interface","title":"Fenced Frame"}],"query":"api.FencedFrameConfig"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.FencedFrameConfig"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://developers.google.com/privacy-sandbox/private-advertising/fenced-frame\" class=\"external\" target=\"_blank\">Fenced frames</a> on developers.google.com</li>\n  <li><a href=\"https://developers.google.com/privacy-sandbox\" class=\"external\" target=\"_blank\">The Privacy Sandbox</a> on developers.google.com</li>\n</ul>"}}],"toc":[{"text":"Instance methods","id":"instance_methods"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The FencedFrameConfig interface represents the navigation of a <fencedframe>, i.e. what content will be displayed in it.","popularity":0,"modified":null,"other_translations":[],"pageType":"web-api-interface","source":{"folder":"en-us/web/api/fencedframeconfig","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/fencedframeconfig/index.md","last_commit_url":"https://github.com/mdn/content/commit/null","filename":"index.md"},"short_title":"FencedFrameConfig","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/FencedFrameConfig","title":"FencedFrameConfig"}],"pageTitle":"FencedFrameConfig - Web APIs | MDN","noIndexing":false},"url":"/en-US/docs/Web/API/FencedFrameConfig"}
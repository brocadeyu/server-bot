"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1928"],{67526:function(e,n,s){s.r(n),s.d(n,{default:function(){return c}});var r=s(55367),l=s(26971);function i(e){let n=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",img:"img",h2:"h2",code:"code",ul:"ul",li:"li",pre:"pre"},(0,l.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"rsbuild-02-发布",children:["Rsbuild 0.2 发布",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rsbuild-02-发布",children:"#"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"December 11, 2023"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://assets.rspack.dev/rsbuild/rsbuild-banner-v0-2.png",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"Rsbuild 0.2 版本包含一些 API 的不兼容更新，请参考当前文档进行升级。"}),"\n",(0,r.jsxs)(n.h2,{id:"targets",children:["Targets",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#targets",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["我们将 ",(0,r.jsx)(n.code,{children:"createRsbuild"})," 方法的 ",(0,r.jsx)(n.code,{children:"target"})," 移动至 rsbuild 配置对象中，这个改动使用户可以在 Rsbuild 配置文件中配置 targets。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const rsbuild = await createRsbuild({\n  target: ['web', 'node'],\n});\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"after:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// rsbuild.config.ts\nexport default {\n  output: {\n    targets: ['web', 'node'],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"仅影响 JavaScript API。使用 Rsbuild CLI 的用户不需要做任何改变。"}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"entry",children:["Entry",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entry",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["删除已弃用的 ",(0,r.jsx)(n.code,{children:"source.entries"})," 配置。"]}),"\n",(0,r.jsxs)(n.p,{children:["自 Rsbuild 0.1.0 起，",(0,r.jsx)(n.code,{children:"source.entries"})," 已更名为 ",(0,r.jsx)(n.code,{children:"source.entry"}),"，我们在 Rsbuild v0.2.0",(0,r.jsx)(n.code,{children:"中删除了"}),"source.entries` 配置。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// rsbuild.config.ts\nexport default {\n  source: {\n    entries: {},\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"after:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// rsbuild.config.ts\nexport default {\n  source: {\n    entry: {},\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"write-to-disk",children:["Write to Disk",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#write-to-disk",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"dev.writeToDisk"})," 的默认值变更为 ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"原因："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"减少文件系统开销，提升开发服务器性能。"}),"\n",(0,r.jsxs)(n.li,{children:["避免触发 UnoCSS 和其他工具的监听器。参考：",(0,r.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/issues/654",target:"_blank",rel:"noopener noreferrer",children:"#654"}),"。"]}),"\n",(0,r.jsx)(n.li,{children:"使默认行为与 webpack-dev-middleware 及其他社区开发服务器保持一致。"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"用户可以手动开启写入磁盘："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"babel-插件",children:["Babel 插件",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#babel-插件",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"@rsbuild/plugin-babel"})," 将所有的 babel-loader 选项移动到 ",(0,r.jsx)(n.code,{children:"babelLoaderOptions"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginBabel({\n  plugins: [],\n  presets: [],\n});\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"after:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginBabel([\n  babelLoaderOptions: {\n    plugins: [],\n    presets: [],\n  }\n]);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["这种改变使我们能为 ",(0,r.jsx)(n.code,{children:"pluginBabel"})," 添加更多选项，如 ",(0,r.jsx)(n.code,{children:"include"})," 和 ",(0,r.jsx)(n.code,{children:"exclude"}),"。"]}),"\n",(0,r.jsxs)(n.h2,{id:"source-map",children:["Source Map",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#source-map",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"output.disableSourceMap"})," 已经更名为 ",(0,r.jsx)(n.code,{children:"output.sourceMap"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableSourceMap: {\n      js: true,\n      css: true,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"after:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    sourceMap: {\n      js: false,\n      css: false,\n    },\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"source map 的默认值已更新，以提升构建性能。"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"之前：在开发阶段生成 JS / CSS 的 source map，在生产阶段生成 JS 的 source map。"}),"\n",(0,r.jsx)(n.li,{children:"之后：在开发阶段生成 JS 的 source map，在生产阶段不生成 source map。"}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"inject-styles",children:["Inject Styles",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#inject-styles",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["将 ",(0,r.jsx)(n.code,{children:"output.disableCssExtract"})," 更名为 ",(0,r.jsx)(n.code,{children:"output.injectStyles"})," 以更加直观："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableCssExtract: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"after:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    injectStyles: true,\n  },\n};\n"})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let c=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fcommunity%2Freleases%2Fv0-2.mdx"]={toc:[{text:"Targets",id:"targets",depth:2},{text:"Entry",id:"entry",depth:2},{text:"Write to Disk",id:"write-to-disk",depth:2},{text:"Babel 插件",id:"babel-插件",depth:2},{text:"Source Map",id:"source-map",depth:2},{text:"Inject Styles",id:"inject-styles",depth:2}],title:"Rsbuild 0.2 发布",frontmatter:{published_at:"2023-12-11T08:00:00.000Z"}}}}]);
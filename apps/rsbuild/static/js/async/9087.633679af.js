"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["9087"],{33948:function(e,n,i){i.r(n),i.d(n,{default:()=>E});var r=i("55367"),o=i("26971"),s=i("80493"),l=i("4005"),d=i("17761");function t(e){let n=Object.assign({p:"p",code:"code",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"onBeforeEnvironmentCompile"})," is a callback function that is triggered before the compilation of a single environment."]}),"\n",(0,r.jsxs)(n.p,{children:["You can access the Rspack configuration array through the ",(0,r.jsx)(n.code,{children:"bundlerConfigs"})," parameter. The array may contain one or more ",(0,r.jsx)(n.a,{href:"https://rspack.dev/config/",target:"_blank",rel:"noopener noreferrer",children:"Rspack configurations"}),". It depends on whether multiple ",(0,r.jsx)(n.a,{href:"/config/environments",children:"environments"})," are configured."]}),"\n",(0,r.jsxs)(n.p,{children:["Moreover, you can use ",(0,r.jsx)(n.code,{children:"isWatch"})," to determine whether it is dev or build watch mode, and use ",(0,r.jsx)(n.code,{children:"isFirstCompile"})," to determine whether it is the first build."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function OnBeforeEnvironmentCompile(\n  callback: (params: {\n    isWatch: boolean;\n    isFirstCompile: boolean;\n    bundlerConfig?: Rspack.Configuration;\n    environment: EnvironmentContext;\n  }) => Promise<void> | void,\n): void;\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}function c(e){let n=Object.assign({p:"p",code:"code",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"onAfterEnvironmentCompile"})," is a callback function that is triggered after the compilation of a single environment. You can access the build result information via the ",(0,r.jsx)(n.a,{href:"https://rspack.dev/api/javascript-api/stats",target:"_blank",rel:"noopener noreferrer",children:"stats"})," parameter."]}),"\n",(0,r.jsxs)(n.p,{children:["Moreover, you can use ",(0,r.jsx)(n.code,{children:"isWatch"})," to determine whether it is dev or build watch mode, and use ",(0,r.jsx)(n.code,{children:"isFirstCompile"})," to determine whether it is the first build."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function OnAfterEnvironmentCompile(\n  callback: (params: {\n    isFirstCompile: boolean;\n    isWatch: boolean;\n    stats?: Stats;\n    environment: EnvironmentContext;\n  }) => Promise<void> | void,\n): void;\n"})})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fshared%2FonBeforeEnvironmentCompile.mdx"]={toc:[],title:"",frontmatter:{}};h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["en%2Fshared%2FonAfterEnvironmentCompile.mdx"]={toc:[],title:"",frontmatter:{}};var f=i("40405"),x=i("53356"),m=i("18714"),u=i("15005"),p=i("53117"),j=i("85782"),g=i("15315"),v=i("68983"),b=i("10986"),C=i("69113");function y(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",ul:"ul",li:"li",code:"code",pre:"pre",div:"div",strong:"strong"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"plugin-hooks",children:["Plugin Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugin-hooks",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"This chapter introduces the plugin hooks available for Rsbuild plugins."}),"\n",(0,r.jsxs)(n.h2,{id:"overview",children:["Overview",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#overview",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"common-hooks",children:["Common Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#modifyrsbuildconfig",children:"modifyRsbuildConfig"}),": Modify the configuration passed to Rsbuild."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#modifyenvironmentconfig",children:"modifyEnvironmentConfig"}),": Modify the Rsbuild configuration of a specific environment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#modifyrspackconfig",children:"modifyRspackConfig"}),": Modify the configuration passed to Rspack."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#modifybundlerchain",children:"modifyBundlerChain"}),": Modify the configuration of Rspack through the chain API."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"}),": Modify the tags that are injected into the HTML."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onbeforecreatecompiler",children:"onBeforeCreateCompiler"}),": Called before creating a compiler instance."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onaftercreatecompiler",children:"onAfterCreateCompiler"}),": Called after creating a compiler instance and before building."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"}),": Called before the compilation of a single environment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"}),": Called after the compilation of a single environment. You can get the build result information."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onexit",children:"onExit"}),": Called when the process is about to exit."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"dev-hooks",children:["Dev Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dev-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Called only when running the ",(0,r.jsx)(n.code,{children:"rsbuild dev"})," command or the ",(0,r.jsx)(n.code,{children:"rsbuild.startDevServer()"})," method."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onbeforestartdevserver",children:"onBeforeStartDevServer"}),": Called before starting the dev server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onafterstartdevserver",children:"onAfterStartDevServer"}),": Called after starting the dev server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#ondevcompiledone",children:"onDevCompileDone"}),": Called after each build in development mode."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Called only when Rsbuild is restarted or when the ",(0,r.jsx)(n.code,{children:"close()"})," method of ",(0,r.jsx)(n.code,{children:"rsbuild.build()"})," is executed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onclosedevserver",children:"onCloseDevServer"}),": Called when the dev server is closed."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"build-hooks",children:["Build Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Called only when running the ",(0,r.jsx)(n.code,{children:"rsbuild build"})," command or the ",(0,r.jsx)(n.code,{children:"rsbuild.build()"})," method."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onbeforebuild",children:"onBeforeBuild"}),": Called before running the production build."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onafterbuild",children:"onAfterBuild"}),": Called after running the production build. You can get the build result information."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Called only when Rsbuild is restarted or when the ",(0,r.jsx)(n.code,{children:"close()"})," method of ",(0,r.jsx)(n.code,{children:"rsbuild.build()"})," is executed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onclosebuild",children:"onCloseBuild"}),": Called when the build is closed."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"preview-hooks",children:["Preview Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preview-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Called only when running the ",(0,r.jsx)(n.code,{children:"rsbuild preview"})," command or the ",(0,r.jsx)(n.code,{children:"rsbuild.preview()"})," method."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onbeforestartprodserver",children:"onBeforeStartProdServer"}),": Called before starting the production server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#onafterstartprodserver",children:"onAfterStartProdServer"}),": Called after starting the production server."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"hooks-order",children:["Hooks Order",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#hooks-order",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"dev-hooks-1",children:["Dev Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dev-hooks-1",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["When the ",(0,r.jsx)(n.code,{children:"rsbuild dev"})," command or ",(0,r.jsx)(n.code,{children:"rsbuild.startDevServer()"})," method is executed, Rsbuild will execute the following hooks in order:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrsbuildconfig",children:"modifyRsbuildConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyenvironmentconfig",children:"modifyEnvironmentConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforestartdevserver",children:"onBeforeStartDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifybundlerchain",children:"modifyBundlerChain"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrspackconfig",children:"modifyRspackConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforecreatecompiler",children:"onBeforeCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onaftercreatecompiler",children:"onAfterCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterstartdevserver",children:"onAfterStartDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondevcompiledone",children:"onDevCompileDone"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onclosedevserver",children:"onCloseDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onexit",children:"onExit"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When rebuilding, the following hooks will be triggered again:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondevcompiledone",children:"onDevCompileDone"})}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"build-hooks-1",children:["Build Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-hooks-1",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["When the ",(0,r.jsx)(n.code,{children:"rsbuild build"})," command or ",(0,r.jsx)(n.code,{children:"rsbuild.build()"})," method is executed, Rsbuild will execute the following hooks in order:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrsbuildconfig",children:"modifyRsbuildConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyenvironmentconfig",children:"modifyEnvironmentConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifybundlerchain",children:"modifyBundlerChain"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrspackconfig",children:"modifyRspackConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforecreatecompiler",children:"onBeforeCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onaftercreatecompiler",children:"onAfterCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforebuild",children:"onBeforeBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterbuild",children:"onAfterBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onclosebuild",children:"onCloseBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onexit",children:"onExit"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When rebuilding, the following hooks will be triggered again:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforebuild",children:"onBeforeBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterbuild",children:"onAfterBuild"})}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"preview-hooks-1",children:["Preview Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preview-hooks-1",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["When executing the ",(0,r.jsx)(n.code,{children:"rsbuild preview"})," command or ",(0,r.jsx)(n.code,{children:"rsbuild.preview()"})," method, Rsbuild will execute the following hooks in order:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrsbuildconfig",children:"modifyRsbuildConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyenvironmentconfig",children:"modifyEnvironmentConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforestartprodserver",children:"onBeforeStartProdServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterstartprodserver",children:"onAfterStartProdServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onexit",children:"onExit"})}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"global-hooks-vs-environment-hooks",children:["Global Hooks vs Environment Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#global-hooks-vs-environment-hooks",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"In Rsbuild, some of the plugin hooks are global hooks. The execution of these hooks is often related to Rsbuild's own startup process or global logic and is shared under all environments. Such as:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"})," is used to modify the basic configuration of Rsbuild. The basic configuration will eventually be merged with the environment configuration;"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"onBeforeStartDevServer"})," and ",(0,r.jsx)(n.code,{children:"onAfterStartDevServer"})," are related to the Rsbuild dev server startup process, all environments share Rsbuild's dev server, middlewares, and Web Socket."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Correspondingly, there are some plugin hooks that are related to the current environment. These hooks are executed with a specific environment context and are triggered multiple times depending on the environment."}),"\n",(0,r.jsxs)(n.h3,{id:"global-hooks",children:["Global Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#global-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrsbuildconfig",children:"modifyRsbuildConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforestartdevserver",children:"onBeforeStartDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforecreatecompiler",children:"onBeforeCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onaftercreatecompiler",children:"onAfterCreateCompiler"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterstartdevserver",children:"onAfterStartDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondevcompiledone",children:"onDevCompileDone"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onclosedevserver",children:"onCloseDevServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforebuild",children:"onBeforeBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterbuild",children:"onAfterBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onclosebuild",children:"onCloseBuild"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforestartprodserver",children:"onBeforeStartProdServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterstartprodserver",children:"onAfterStartProdServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onexit",children:"onExit"})}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"environment-hooks",children:["Environment Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#environment-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyenvironmentconfig",children:"modifyEnvironmentConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifybundlerchain",children:"modifyBundlerChain"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyrspackconfig",children:"modifyRspackConfig"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#modifyhtmltags",children:"modifyHTMLTags"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onbeforeenvironmentcompile",children:"onBeforeEnvironmentCompile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onafterenvironmentcompile",children:"onAfterEnvironmentCompile"})}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"callback-order",children:["Callback Order",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#callback-order",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"default-behavior",children:["Default Behavior",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#default-behavior",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"If multiple plugins register the same hook, the callback functions of the hook will execute in the order in which they were registered."}),"\n",(0,r.jsxs)(n.p,{children:["In the following example, the console will output ",(0,r.jsx)(n.code,{children:"'1'"})," and ",(0,r.jsx)(n.code,{children:"'2'"})," in sequence:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const plugin1 = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig(() => console.log('1'));\n  },\n});\n\nconst plugin2 = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig(() => console.log('2'));\n  },\n});\n\nrsbuild.addPlugins([plugin1, plugin2]);\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"order-field",children:[(0,r.jsx)(n.code,{children:"order"})," Field",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#order-field",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["When registering a hook, you can declare the order of hook through the ",(0,r.jsx)(n.code,{children:"order"})," field."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type HookDescriptor<T extends (...args: any[]) => any> = {\n  handler: T;\n  order: 'pre' | 'post' | 'default';\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the following example, the console will sequentially output ",(0,r.jsx)(n.code,{children:"'2'"})," and ",(0,r.jsx)(n.code,{children:"'1'"}),", because ",(0,r.jsx)(n.code,{children:"order"})," was set to ",(0,r.jsx)(n.code,{children:"pre"})," when plugin2 called ",(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const plugin1 = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig(() => console.log('1'));\n  },\n});\n\nconst plugin2 = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('2'),\n      order: 'pre',\n    });\n  },\n});\n\nrsbuild.addPlugins([plugin1, plugin2]);\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"common-hooks-1",children:["Common Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-hooks-1",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"modifyrsbuildconfig",children:["modifyRsbuildConfig",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifyrsbuildconfig",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Modify the config passed to the Rsbuild, you can directly modify the config object, or return a new object to replace the previous object."}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"WARNING"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"})," is a global hook. To add support for your plugin as an ",(0,r.jsx)(n.a,{href:"/guide/advanced/environments#add-plugins-for-specified-environment",children:"environment-specific plugin"}),", you should use ",(0,r.jsx)(n.a,{href:"/plugins/dev/hooks#modifyenvironmentconfig",children:"modifyEnvironmentConfig"})," instead of ",(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"}),".\n"]})})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type ModifyRsbuildConfigUtils = {\n  mergeRsbuildConfig: typeof mergeRsbuildConfig;\n};\n\nfunction ModifyRsbuildConfig(\n  callback: (\n    config: RsbuildConfig,\n    utils: ModifyRsbuildConfigUtils,\n  ) => MaybePromise<RsbuildConfig | void>,\n): void;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example:"})," Setting a default value for a specific config option:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig((config) => {\n      config.html ||= {};\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example:"})," Using ",(0,r.jsx)(n.code,{children:"mergeRsbuildConfig"})," to merge config objects, and return the merged object."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { RsbuildConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig((userConfig, { mergeRsbuildConfig }) => {\n      const extraConfig: RsbuildConfig = {\n        source: {\n          // ...\n        },\n        output: {\n          // ...\n        },\n      };\n\n      // extraConfig will override fields in userConfig,\n      // If you do not want to override the fields in userConfig,\n      // you can adjust to `mergeRsbuildConfig(extraConfig, userConfig)`\n      return mergeRsbuildConfig(userConfig, extraConfig);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"})," cannot be used to register additional Rsbuild plugins. This is because at the time ",(0,r.jsx)(n.code,{children:"modifyRsbuildConfig"})," is executed, Rsbuild has already initialized all plugins and started executing the callbacks of the hooks."]}),"\n",(0,r.jsxs)(n.p,{children:["For details, please refer to ",(0,r.jsx)(n.a,{href:"/config/plugins#plugin-registration-phase",children:"Plugin registration phase"}),".\n"]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"modifyenvironmentconfig",children:["modifyEnvironmentConfig",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifyenvironmentconfig",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Modify the Rsbuild configuration of a specific environment."}),"\n",(0,r.jsx)(n.p,{children:"In the callback function, the config object in the parameters has already been merged with the common Rsbuild configuration. You can directly modify this config object, or you can return a new object to replace it."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type ArrayAtLeastOne<A, B> = [A, ...Array<A | B>] | [...Array<A | B>, A];\n\ntype ModifyEnvironmentConfigUtils = {\n  /** Current environment name */\n  name: string;\n  mergeEnvironmentConfig: (\n    ...configs: ArrayAtLeastOne<MergedEnvironmentConfig, EnvironmentConfig>\n  ) => EnvironmentConfig;\n};\n\nfunction ModifyEnvironmentConfig(\n  callback: (\n    config: EnvironmentConfig,\n    utils: ModifyEnvironmentConfigUtils,\n  ) => MaybePromise<EnvironmentConfig | void>,\n): void;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example:"})," Set a default value for the Rsbuild config of a specified environment:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.modifyEnvironmentConfig((config, { name }) => {\n      if (name !== 'web') {\n        return config;\n      }\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example:"})," Using ",(0,r.jsx)(n.code,{children:"mergeEnvironmentConfig"})," to merge config objects, and return the merged object."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import type { EnvironmentConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup: (api) => {\n    api.modifyEnvironmentConfig((userConfig, { mergeEnvironmentConfig }) => {\n      const extraConfig: EnvironmentConfig = {\n        source: {\n          // ...\n        },\n        output: {\n          // ...\n        },\n      };\n\n      // extraConfig will override fields in userConfig,\n      // If you do not want to override the fields in userConfig,\n      // you can adjust to `mergeEnvironmentConfig(extraConfig, userConfig)`\n      return mergeEnvironmentConfig(userConfig, extraConfig);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"modifyrspackconfig",children:["modifyRspackConfig",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifyrspackconfig",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"To modify the Rspack config, you can directly modify the config object, or return a new object to replace the previous object."}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"modifyRspackConfig"})," is executed earlier than ",(0,r.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"}),". Therefore, the modifications made by ",(0,r.jsx)(n.code,{children:"tools.rspack"})," cannot be obtained in ",(0,r.jsx)(n.code,{children:"modifyRspackConfig"}),".\n"]})})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type ModifyRspackConfigUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  rspack: Rspack;\n};\n\nfunction ModifyRspackConfig(\n  callback: (\n    config: Rspack.Configuration,\n    utils: ModifyRspackConfigUtils,\n  ) => Promise<RspackConfig | void> | Rspack.Configuration | void,\n): void;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.modifyRspackConfig((config, utils) => {\n      if (utils.env === 'development') {\n        config.devtool = 'eval-cheap-source-map';\n      }\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"modifybundlerchain",children:["modifyBundlerChain",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifybundlerchain",children:"#"})]}),"\n","\n",(0,r.jsx)(s.Z,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"modifyBundlerChain"})," is used to call ",(0,r.jsx)(n.code,{children:"rspack-chain"})," to modify the Rspack configuration. Its usage is the same as ",(0,r.jsx)(n.a,{href:"/config/tools/bundler-chain",children:"tools.bundlerChain"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type ModifyBundlerChainUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  CHAIN_ID: ChainIdentifier;\n  HtmlPlugin: typeof import('html-rspack-plugin');\n  bundler: {\n    BannerPlugin: rspack.BannerPlugin;\n    DefinePlugin: rspack.DefinePlugin;\n    IgnorePlugin: rspack.IgnorePlugin;\n    ProvidePlugin: rspack.ProvidePlugin;\n    HotModuleReplacementPlugin: rspack.HotModuleReplacementPlugin;\n  };\n};\n\nfunction ModifyBundlerChain(\n  callback: (\n    chain: RspackChain,\n    utils: ModifyBundlerChainUtils,\n  ) => Promise<void> | void,\n): void;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';\n\nconst myPlugin = () => ({\n  setup: (api) => {\n    api.modifyBundlerChain((chain, utils) => {\n      if (utils.env === 'development') {\n        chain.devtool('eval');\n      }\n\n      chain.plugin('bundle-analyze').use(BundleAnalyzerPlugin);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"modifyhtmltags",children:["modifyHTMLTags",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifyhtmltags",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Modify the tags that are injected into the HTML."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type HtmlBasicTag = {\n  // Tag name\n  tag: string;\n  // Attributes of the tag\n  attrs?: Record<string, string | boolean | null | undefined>;\n  // innerHTML of the tag\n  children?: string;\n};\n\ntype HTMLTags = {\n  // Tags group inserted into <head>\n  headTags: HtmlBasicTag[];\n  // Tags group inserted into <body>\n  bodyTags: HtmlBasicTag[];\n};\n\ntype Context = {\n  /**\n   * The Compiler object of Rspack.\n   */\n  compiler: Rspack.Compiler;\n  /**\n   * The Compilation object of Rspack.\n   */\n  compilation: Rspack.Compilation;\n  /**\n   * URL prefix of assets.\n   * @example 'https://example.com/'\n   */\n  assetPrefix: string;\n  /**\n   * The name of the HTML file, relative to the dist directory.\n   * @example 'index.html'\n   */\n  filename: string;\n  /**\n   * The environment context for current build.\n   */\n  environment: EnvironmentContext;\n};\n\nfunction ModifyHTMLTags(\n  callback: (tags: HTMLTags, context: Context) => MaybePromise<HTMLTags>,\n): void;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.modifyHTMLTags(({ headTags, bodyTags }) => {\n      headTags.push({\n        tag: 'script',\n        attrs: { src: 'https://example.com/foo.js' },\n      });\n      bodyTags.push({\n        tag: 'script',\n        children: 'console.log(\"hello world!\");',\n      });\n\n      return { headTags, bodyTags };\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onbeforecreatecompiler",children:["onBeforeCreateCompiler",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbeforecreatecompiler",children:"#"})]}),"\n","\n",(0,r.jsx)(l.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onBeforeCreateCompiler(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onaftercreatecompiler",children:["onAfterCreateCompiler",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onaftercreatecompiler",children:"#"})]}),"\n","\n",(0,r.jsx)(d.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterCreateCompiler(({ compiler }) => {\n      console.log('the compiler is ', compiler);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onbeforeenvironmentcompile",children:["onBeforeEnvironmentCompile",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbeforeenvironmentcompile",children:"#"})]}),"\n","\n",(0,r.jsx)(a,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onBeforeEnvironmentCompile(({ bundlerConfig, environment }) => {\n      console.log(\n        `the bundler config for the ${environment.name} is `,\n        bundlerConfig,\n      );\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onafterenvironmentcompile",children:["onAfterEnvironmentCompile",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafterenvironmentcompile",children:"#"})]}),"\n","\n",(0,r.jsx)(h,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterEnvironmentCompile(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"build-hooks-2",children:["Build Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-hooks-2",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"onbeforebuild",children:["onBeforeBuild",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbeforebuild",children:"#"})]}),"\n","\n",(0,r.jsx)(f.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onBeforeBuild(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onafterbuild",children:["onAfterBuild",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafterbuild",children:"#"})]}),"\n","\n",(0,r.jsx)(x.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterBuild(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onclosebuild",children:["onCloseBuild",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onclosebuild",children:"#"})]}),"\n","\n",(0,r.jsx)(m.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onCloseBuild(() => {\n      console.log('close build!');\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"dev-hooks-2",children:["Dev Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dev-hooks-2",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"onbeforestartdevserver",children:["onBeforeStartDevServer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbeforestartdevserver",children:"#"})]}),"\n","\n",(0,r.jsx)(u.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onBeforeStartDevServer(() => {\n      console.log('before start!');\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onafterstartdevserver",children:["onAfterStartDevServer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafterstartdevserver",children:"#"})]}),"\n","\n",(0,r.jsx)(p.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterStartDevServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onafterenvironmentcompile-1",children:["onAfterEnvironmentCompile",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafterenvironmentcompile-1",children:"#"})]}),"\n","\n",(0,r.jsx)(h,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterEnvironmentCompile(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"ondevcompiledone",children:["onDevCompileDone",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ondevcompiledone",children:"#"})]}),"\n","\n",(0,r.jsx)(j.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onDevCompileDone(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onclosedevserver",children:["onCloseDevServer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onclosedevserver",children:"#"})]}),"\n","\n",(0,r.jsx)(g.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"rsbuild.onCloseDevServer(async () => {\n  console.log('close dev server!');\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"preview-hooks-2",children:["Preview Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preview-hooks-2",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"onbeforestartprodserver",children:["onBeforeStartProdServer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbeforestartprodserver",children:"#"})]}),"\n","\n",(0,r.jsx)(v.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onBeforeStartProdServer(() => {\n      console.log('before start!');\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"onafterstartprodserver",children:["onAfterStartProdServer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafterstartprodserver",children:"#"})]}),"\n","\n",(0,r.jsx)(b.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onAfterStartProdServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"other-hooks",children:["Other Hooks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#other-hooks",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"onexit",children:["onExit",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onexit",children:"#"})]}),"\n","\n",(0,r.jsx)(C.Z,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.onExit(() => {\n      console.log('exit!');\n    });\n  },\n});\n"})})]})}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(y,{...e})}):y(e)}let E=k;k.__RSPRESS_PAGE_META={},k.__RSPRESS_PAGE_META["en%2Fplugins%2Fdev%2Fhooks.mdx"]={toc:[{text:"Overview",id:"overview",depth:2},{text:"Common Hooks",id:"common-hooks",depth:3},{text:"Dev Hooks",id:"dev-hooks",depth:3},{text:"Build Hooks",id:"build-hooks",depth:3},{text:"Preview Hooks",id:"preview-hooks",depth:3},{text:"Hooks Order",id:"hooks-order",depth:2},{text:"Dev Hooks",id:"dev-hooks-1",depth:3},{text:"Build Hooks",id:"build-hooks-1",depth:3},{text:"Preview Hooks",id:"preview-hooks-1",depth:3},{text:"Global Hooks vs Environment Hooks",id:"global-hooks-vs-environment-hooks",depth:2},{text:"Global Hooks",id:"global-hooks",depth:3},{text:"Environment Hooks",id:"environment-hooks",depth:3},{text:"Callback Order",id:"callback-order",depth:2},{text:"Default Behavior",id:"default-behavior",depth:3},{text:"`order` Field",id:"order-field",depth:3},{text:"Common Hooks",id:"common-hooks-1",depth:2},{text:"modifyRsbuildConfig",id:"modifyrsbuildconfig",depth:3},{text:"modifyEnvironmentConfig",id:"modifyenvironmentconfig",depth:3},{text:"modifyRspackConfig",id:"modifyrspackconfig",depth:3},{text:"modifyBundlerChain",id:"modifybundlerchain",depth:3},{text:"modifyHTMLTags",id:"modifyhtmltags",depth:3},{text:"onBeforeCreateCompiler",id:"onbeforecreatecompiler",depth:3},{text:"onAfterCreateCompiler",id:"onaftercreatecompiler",depth:3},{text:"onBeforeEnvironmentCompile",id:"onbeforeenvironmentcompile",depth:3},{text:"onAfterEnvironmentCompile",id:"onafterenvironmentcompile",depth:3},{text:"Build Hooks",id:"build-hooks-2",depth:2},{text:"onBeforeBuild",id:"onbeforebuild",depth:3},{text:"onAfterBuild",id:"onafterbuild",depth:3},{text:"onCloseBuild",id:"onclosebuild",depth:3},{text:"Dev Hooks",id:"dev-hooks-2",depth:2},{text:"onBeforeStartDevServer",id:"onbeforestartdevserver",depth:3},{text:"onAfterStartDevServer",id:"onafterstartdevserver",depth:3},{text:"onAfterEnvironmentCompile",id:"onafterenvironmentcompile-1",depth:3},{text:"onDevCompileDone",id:"ondevcompiledone",depth:3},{text:"onCloseDevServer",id:"onclosedevserver",depth:3},{text:"Preview Hooks",id:"preview-hooks-2",depth:2},{text:"onBeforeStartProdServer",id:"onbeforestartprodserver",depth:3},{text:"onAfterStartProdServer",id:"onafterstartprodserver",depth:3},{text:"Other Hooks",id:"other-hooks",depth:2},{text:"onExit",id:"onexit",depth:3}],title:"Plugin Hooks",frontmatter:{}}},80493:function(e,n,i){i.d(n,{Z:function(){return d}});var r=i(55367),o=i(26971);function s(e){let n=Object.assign({p:"p",a:"a",code:"code"},(0,o.ah)(),e.components);return(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/rspack-contrib/rspack-chain",target:"_blank",rel:"noopener noreferrer",children:"rspack-chain"})," is a utility library for configuring Rspack. It provides a chaining API, making the configuration of Rspack more flexible. By using ",(0,r.jsx)(n.code,{children:"rspack-chain"}),", you can more easily modify and extend Rspack configurations without directly manipulating the complex configuration object."]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}let d=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["en%2Fshared%2FrspackChain.mdx"]={toc:[],title:"",frontmatter:{}}}}]);
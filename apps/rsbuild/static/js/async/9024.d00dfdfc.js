"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["9024"],{80826:function(e,s,n){n.r(s),n.d(s,{default:function(){return d}});var r=n(55367),i=n(26971);function l(e){let s=Object.assign({h1:"h1",a:"a",p:"p",div:"div",h2:"h2",ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",h3:"h3",ol:"ol",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"引用静态资源",children:["引用静态资源",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#引用静态资源",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"Rsbuild 支持在代码中引用图片、字体、音频、视频等类型的静态资源。"}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"什么是静态资源"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsx)(s.p,{children:"静态资源是指 Web 应用中不会发生变化的文件。常见的静态资源包括图片、字体、视频、样式表和 JavaScript 文件。这些资源通常存储在服务器或 CDN 上，当用户访问 Web 应用时会被传送到用户的浏览器。由于它们不会发生变化，静态资源可以被浏览器缓存，从而提高 Web 应用的性能。"})})]}),"\n",(0,r.jsxs)(s.h2,{id:"静态资源格式",children:["静态资源格式",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#静态资源格式",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"以下是 Rsbuild 默认支持的静态资源格式："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"图片"}),"：png、jpg、jpeg、gif、svg、bmp、webp、ico、apng、avif、tif、tiff、jfif、pjpeg、pjp。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"字体"}),"：woff、woff2、eot、ttf、otf、ttc。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"音频"}),"：mp3、wav、flac、aac、m4a、opus。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"视频"}),"：mp4、webm、ogg、mov。"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["如果你需要引用其他格式的静态资源，请参考 ",(0,r.jsx)(s.a,{href:"#%E6%89%A9%E5%B1%95%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B",children:"扩展静态资源类型"}),"。"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"SVG 图片"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.p,{children:["SVG 图片是一种特殊情况，Rsbuild 提供了 SVG 转 React 组件的能力，对 SVG 进行单独处理，详见 ",(0,r.jsx)(s.a,{href:"/plugins/list/plugin-svgr",children:"SVGR 插件"}),"。\n"]})})]}),"\n",(0,r.jsxs)(s.h2,{id:"在-js-文件中引用",children:["在 JS 文件中引用",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#在-js-文件中引用",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["在 JS 文件中，可以直接通过 ",(0,r.jsx)(s.code,{children:"import"})," 的方式引用相对路径下的静态资源："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"// 引用 static 目录下的 logo.png 图片\nimport logo from './static/logo.png';\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n"})}),"\n",(0,r.jsxs)(s.p,{children:["也可以使用",(0,r.jsx)(s.a,{href:"/guide/advanced/alias",children:"路径别名"}),"来引用："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"import logo from '@/static/logo.png';\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"url-assets",children:["URL assets",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#url-assets",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 支持使用 JavaScript 原生的 ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/docs/Web/API/URL",target:"_blank",rel:"noopener noreferrer",children:"URL"})," 和 ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/import.meta",target:"_blank",rel:"noopener noreferrer",children:"import.meta.url"})," 相配合，来引用静态资源。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"const logo = new URL('./static/logo.png', import.meta.url).href;\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n"})}),"\n",(0,r.jsxs)(s.p,{children:["如果你使用 ",(0,r.jsx)(s.code,{children:"new URL()"})," 引用 ",(0,r.jsx)(s.code,{children:".js"})," 或 ",(0,r.jsx)(s.code,{children:".ts"})," 文件，它们将被视为 URL assets，不会经过 Rsbuild 内置的 ",(0,r.jsx)(s.code,{children:"swc-loader"})," 处理。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"// foo.ts 文件将保持原始内容被输出到产物目录下\nconst fooTs = new URL('./foo.ts', import.meta.url).href;\n\nconsole.log(fooTs); // \"/static/foo.[hash].ts\"\n"})}),"\n",(0,r.jsxs)(s.p,{children:["同理，当使用 ",(0,r.jsx)(s.code,{children:"new URL()"})," 引用 ",(0,r.jsx)(s.code,{children:".css"})," 或 ",(0,r.jsx)(s.code,{children:".scss"})," 文件时，它们将被视为 URL assets，不会经过 Rsbuild 内置的 CSS loaders 处理。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"// foo.css 文件将保持原始内容被输出到产物目录下\nconst fooCss = new URL('./foo.css', import.meta.url).href;\n\nconsole.log(fooCss); // \"/static/foo.[hash].css\"\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"在-css-文件中引用",children:["在 CSS 文件中引用",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#在-css-文件中引用",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"在 CSS 文件中，可以引用相对路径下的静态资源："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-css",children:".logo {\n  background-image: url('../static/logo.png');\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["也支持使用",(0,r.jsx)(s.a,{href:"/guide/advanced/alias",children:"路径别名"}),"来引用："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-css",children:".logo {\n  background-image: url('@/static/logo.png');\n}\n"})}),"\n",(0,r.jsx)(s.p,{children:"如果需要在 CSS 文件中引用绝对路径下的静态资源："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-css",children:"@font-face {\n  font-family: DingTalk;\n  src: url('/image/font/foo.ttf');\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["默认情况下，Rsbuild 内置的 ",(0,r.jsx)(s.code,{children:"css-loader"})," 会解析 ",(0,r.jsx)(s.code,{children:"url()"})," 中的绝对路径并寻找指定的模块。如果你希望跳过绝对路径的解析，可以配置 ",(0,r.jsx)(s.a,{href:"/config/tools/css-loader#toolscssloader",children:(0,r.jsx)(s.code,{children:"tools.cssLoader"})})," 来过滤指定的路径，被过滤的路径将被原样保留在代码中。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"export default {\n  tools: {\n    cssLoader: {\n      url: {\n        filter: (url) => {\n          if (/\\/image\\/font/.test(url)) {\n            return false;\n          }\n          return true;\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"引用结果",children:["引用结果",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#引用结果",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"引用静态资源的结果取决于文件体积："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"当文件体积大于 4KiB 时，会返回一个 URL，同时文件会被输出到构建产物目录下。"}),"\n",(0,r.jsx)(s.li,{children:"当文件体积小于 4KiB 时，会自动被内联为 Base64 格式。"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"import largeImage from './static/largeImage.png';\nimport smallImage from './static/smallImage.png';\n\nconsole.log(largeImage); // \"/static/largeImage.[hash].png\"\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n"})}),"\n",(0,r.jsxs)(s.p,{children:["关于资源内联的更详细介绍，请参考 ",(0,r.jsx)(s.a,{href:"/guide/optimization/inline-assets",children:"静态资源内联"})," 章节。"]}),"\n",(0,r.jsxs)(s.h2,{id:"构建产物",children:["构建产物",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#构建产物",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"当静态资源被引用后，会自动被输出到构建产物的目录下，你可以："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["通过 ",(0,r.jsx)(s.a,{href:"/config/output/filename",children:"output.filename"})," 来修改产物的文件名。"]}),"\n",(0,r.jsxs)(s.li,{children:["通过 ",(0,r.jsx)(s.a,{href:"/config/output/dist-path",children:"output.distPath"})," 来修改产物的输出路径。"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["请阅读 ",(0,r.jsx)(s.a,{href:"/guide/basic/output-files",children:"构建产物目录"})," 来了解更多细节。"]}),"\n",(0,r.jsxs)(s.h2,{id:"url-前缀",children:["URL 前缀",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#url-前缀",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"引用静态资源后返回的 URL 中会自动包含路径前缀："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["在开发模式下，通过 ",(0,r.jsx)(s.a,{href:"/config/dev/asset-prefix",children:"dev.assetPrefix"})," 设置路径前缀。"]}),"\n",(0,r.jsxs)(s.li,{children:["在生产模式下，通过 ",(0,r.jsx)(s.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})," 设置路径前缀。"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["比如将 ",(0,r.jsx)(s.code,{children:"output.assetPrefix"})," 设置为 ",(0,r.jsx)(s.code,{children:"https://example.com"}),"："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"import logo from './static/logo.png';\n\nconsole.log(logo); // \"https://example.com/static/logo.[hash].png\"\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"public-目录",children:["public 目录",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#public-目录",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"项目根目录下的 public 目录可以用于放置一些静态资源，这些资源不会被 Rsbuild 构建，并且可以直接通过 URL 引用。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["当你启动开发服务器时，这些资源会被托管在 ",(0,r.jsx)(s.a,{href:"/config/server/base",children:"server.base"})," 根路径下（默认 ",(0,r.jsx)(s.code,{children:"/"}),"）。"]}),"\n",(0,r.jsxs)(s.li,{children:["当你执行生产模式构建时，这些资源会被拷贝到 ",(0,r.jsx)(s.a,{href:"/guide/basic/output-files",children:"dist 目录"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["比如，你可以在 public 目录下放置 ",(0,r.jsx)(s.code,{children:"robots.txt"}),"、",(0,r.jsx)(s.code,{children:"manifest.json"})," 或 ",(0,r.jsx)(s.code,{children:"favicon.ico"})," 等文件。"]}),"\n",(0,r.jsxs)(s.h3,{id:"引用方式",children:["引用方式",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#引用方式",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"你可以通过 URL 来引用 public 目录下的文件。"}),"\n",(0,r.jsxs)(s.p,{children:["例如，在 HTML 模板中，",(0,r.jsx)(s.code,{children:"./public/favicon.ico"})," 文件可以被引用为 ",(0,r.jsx)(s.code,{children:"/favicon.ico"}),"，",(0,r.jsx)(s.a,{href:"/guide/advanced/env-vars#processenvpublic_base_path",children:"BASE_URL"})," 对应服务端的基础路径。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",meta:'title="index.html"',children:'<link rel="icon" href="<%= process.env.BASE_URL %>/favicon.ico" />\n'})}),"\n",(0,r.jsxs)(s.h3,{id:"注意事项",children:["注意事项",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#注意事项",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"下面是一些使用 public 目录的注意事项："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"通过 URL 引用 public 目录中的资源时，请使用绝对路径，而不是相对路径，以确保资源在部署后能够正确访问。"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",meta:'title="src/index.html"',children:'\x3c!-- 错误 --\x3e\n<link rel="icon" href="../public/favicon.ico" />\n\n\x3c!-- 正确 --\x3e\n<link rel="icon" href="/favicon.ico" />\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["请避免在源代码中 import public 目录下的文件，正确的方式是通过 URL 引用。你可以将源代码中 import 的静态资源放在 ",(0,r.jsx)(s.code,{children:"/src/assets"})," 目录下。"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",meta:'title="src/index.js"',children:"// 错误\nimport logo from '../public/logo.png';\n\n// 正确\nimport logo from './assets/logo.png';\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["在生产模式构建过程中，public 目录中的文件将会被拷贝到构建产物目录（默认为 ",(0,r.jsx)(s.code,{children:"dist"}),"）下，请注意不要和产物文件出现名称冲突。当 public 下的文件和产物重名时，构建产物具有更高的优先级，会覆盖 public 下的同名文件。这个功能可以通过将 ",(0,r.jsx)(s.a,{href:"/config/server/public-dir",children:"server.publicDir.copyOnBuild"})," 设置为 ",(0,r.jsx)(s.code,{children:"false"})," 来禁用。"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"自定义行为",children:["自定义行为",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义行为",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 提供了 ",(0,r.jsx)(s.a,{href:"/config/server/public-dir",children:"server.publicDir"})," 选项，可以用于自定义 public 目录的名称和行为，也可以用于禁用 public 目录。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  server: {\n    publicDir: false,\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"类型声明",children:["类型声明",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#类型声明",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"当你在 TypeScript 代码中引用静态资源时，TypeScript 可能会提示该模块缺少类型定义："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"TS2307: Cannot find module './logo.png' or its corresponding type declarations.\n"})}),"\n",(0,r.jsxs)(s.p,{children:["此时你需要为静态资源添加类型声明文件，请在项目中创建 ",(0,r.jsx)(s.code,{children:"src/env.d.ts"})," 文件，并添加相应的类型声明。"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["方法一：如果项目里安装了 ",(0,r.jsx)(s.code,{children:"@rsbuild/core"})," 包，你可以直接引用 ",(0,r.jsx)(s.code,{children:"@rsbuild/core"})," 提供的 ",(0,r.jsx)(s.a,{href:"/guide/basic/typescript#%E9%A2%84%E8%AE%BE%E7%B1%BB%E5%9E%8B",children:"预设类型"}),"："]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'/// <reference types="@rsbuild/core/types" />\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"方法二：手动添加需要的类型声明："}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="src/env.d.ts"',children:"// 以 png 图片为例\ndeclare module '*.png' {\n  const content: string;\n  export default content;\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["添加类型声明后，如果依然存在上述错误提示，请尝试重启当前 IDE，或者调整 ",(0,r.jsx)(s.code,{children:"env.d.ts"})," 所在的目录，使 TypeScript 能够正确识别类型定义。"]}),"\n",(0,r.jsxs)(s.h2,{id:"扩展静态资源类型",children:["扩展静态资源类型",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#扩展静态资源类型",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"如果 Rsbuild 内置的静态资源类型不能满足你的需求，可以通过以下方式扩展额外的静态资源类型。"}),"\n",(0,r.jsxs)(s.h3,{id:"使用-sourceassetsinclude",children:["使用 ",(0,r.jsx)(s.code,{children:"source.assetsInclude"}),(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-sourceassetsinclude",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["通过 ",(0,r.jsx)(s.a,{href:"/config/source/assets-include",children:"source.assetsInclude"})," 配置项，你可以指定需要被视为静态资源的额外文件类型。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  source: {\n    assetsInclude: /\\.pdf$/,\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.p,{children:["添加以上配置后，你就可以在代码里引用 ",(0,r.jsx)(s.code,{children:"*.pdf"})," 文件了，比如："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"import myFile from './static/myFile.pdf';\n\nconsole.log(myFile); // \"/static/myFile.[hash].pdf\"\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"使用-toolsrspack",children:["使用 ",(0,r.jsx)(s.code,{children:"tools.rspack"}),(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-toolsrspack",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["可以通过 ",(0,r.jsx)(s.a,{href:"/config/tools/rspack",children:"tools.rspack"})," 来修改内置的 Rspack 配置，并添加自定义的静态资源处理规则。"]}),"\n",(0,r.jsxs)(s.p,{children:["比如，把 ",(0,r.jsx)(s.code,{children:"*.pdf"})," 文件当做静态资源输出到产物目录，可以添加以下配置："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.pdf$/,\n          // 将资源转换为单独的文件，并且导出产物地址\n          type: 'asset/resource',\n        },\n      ]);\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.p,{children:["关于 asset modules 的更多介绍，请参考 ",(0,r.jsx)(s.a,{href:"https://rspack.dev/guide/features/asset-module",target:"_blank",rel:"noopener noreferrer",children:"Rspack - Asset modules"}),"。"]}),"\n",(0,r.jsxs)(s.h3,{id:"相关配置",children:["相关配置",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#相关配置",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"扩展的静态资源类型会受到以下配置项的影响："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/config/output/filename",children:"output.filename.assets"}),"：设置扩展的静态资源的名称。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/config/output/dist-path",children:"output.distPath.assets"}),"：设置扩展的静态资源的输出目录。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/config/output/data-uri-limit",children:"output.dataUriLimit.assets"}),"：设置扩展的静态资源内联的体积阈值。"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"自定义规则",children:["自定义规则",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义规则",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"在某些场景下，你可能需要跳过 Rsbuild 内置的静态资源处理规则，并添加一些自定义规则。"}),"\n",(0,r.jsx)(s.p,{children:"以 PNG 图片为例，你需要："}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["通过 ",(0,r.jsx)(s.a,{href:"/config/tools/bundler-chain",children:"tools.bundlerChain"})," 来修改内置的 Rspack 配置，通过 ",(0,r.jsx)(s.code,{children:"exclude"})," 排除 ",(0,r.jsx)(s.code,{children:".png"})," 文件。"]}),"\n",(0,r.jsxs)(s.li,{children:["通过 ",(0,r.jsx)(s.a,{href:"/config/tools/rspack",children:"tools.rspack"})," 来添加自定义的静态资源处理规则。"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID }) {\n      chain.module\n        // 通过 `CHAIN_ID.RULE.IMAGE` 来定位到内置的图片规则\n        .rule(CHAIN_ID.RULE.IMAGE)\n        .exclude.add(/\\.png$/);\n    },\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.png$/,\n          // 添加一个自定义的 loader 来处理 png 图片\n          loader: 'custom-png-loader',\n        },\n      ]);\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"图片格式",children:["图片格式",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#图片格式",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"在使用图片资源时，你可以根据下方表格中图片的优缺点以及适用场景，来选择合适的图片格式。"}),"\n",(0,r.jsxs)(s.table,{children:["\n",(0,r.jsxs)(s.thead,{children:["\n",(0,r.jsxs)(s.tr,{children:["\n",(0,r.jsx)(s.th,{children:"格式"}),"\n",(0,r.jsx)(s.th,{children:"优点"}),"\n",(0,r.jsx)(s.th,{children:"缺点"}),"\n",(0,r.jsx)(s.th,{children:"适用场景"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.tbody,{children:["\n",(0,r.jsxs)(s.tr,{children:["\n",(0,r.jsx)(s.td,{children:"PNG"}),"\n",(0,r.jsx)(s.td,{children:"无损压缩，不会丢失图片细节，不失真，支持半透明"}),"\n",(0,r.jsx)(s.td,{children:"不适合色表复杂的图片"}),"\n",(0,r.jsx)(s.td,{children:"适合颜色数量少，边界层次分明的图片，适合用在 logo、icon、透明图等场景"}),"\n"]}),"\n",(0,r.jsxs)(s.tr,{children:["\n",(0,r.jsx)(s.td,{children:"JPG"}),"\n",(0,r.jsx)(s.td,{children:"颜色丰富"}),"\n",(0,r.jsx)(s.td,{children:"有损压缩，会导致图片失真，不支持透明度"}),"\n",(0,r.jsx)(s.td,{children:"适合颜色数量多，颜色带有渐变、过度复杂的图片，适合用在人像照片、风景图等场景"}),"\n"]}),"\n",(0,r.jsxs)(s.tr,{children:["\n",(0,r.jsx)(s.td,{children:"WebP"}),"\n",(0,r.jsx)(s.td,{children:"同时支持有损压缩与无损压缩，支持透明度，体积比 PNG 和 JPG 小很多"}),"\n",(0,r.jsx)(s.td,{children:"iOS 兼容性不好"}),"\n",(0,r.jsx)(s.td,{children:"几乎任何场景的像素图片，支持 WebP 的宿主环境，都应该首选 WebP 图片格式"}),"\n"]}),"\n",(0,r.jsxs)(s.tr,{children:["\n",(0,r.jsx)(s.td,{children:"SVG"}),"\n",(0,r.jsx)(s.td,{children:"无损格式，不失真,支持透明度"}),"\n",(0,r.jsx)(s.td,{children:"不适合复杂图形"}),"\n",(0,r.jsx)(s.td,{children:"适合矢量图,适合用于 icon"}),"\n"]}),"\n"]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}let d=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fguide%2Fbasic%2Fstatic-assets.mdx"]={toc:[{text:"静态资源格式",id:"静态资源格式",depth:2},{text:"在 JS 文件中引用",id:"在-js-文件中引用",depth:2},{text:"URL assets",id:"url-assets",depth:3},{text:"在 CSS 文件中引用",id:"在-css-文件中引用",depth:2},{text:"引用结果",id:"引用结果",depth:2},{text:"构建产物",id:"构建产物",depth:2},{text:"URL 前缀",id:"url-前缀",depth:2},{text:"public 目录",id:"public-目录",depth:2},{text:"引用方式",id:"引用方式",depth:3},{text:"注意事项",id:"注意事项",depth:3},{text:"自定义行为",id:"自定义行为",depth:3},{text:"类型声明",id:"类型声明",depth:2},{text:"扩展静态资源类型",id:"扩展静态资源类型",depth:2},{text:"使用 `source.assetsInclude`",id:"使用-sourceassetsinclude",depth:3},{text:"使用 `tools.rspack`",id:"使用-toolsrspack",depth:3},{text:"相关配置",id:"相关配置",depth:3},{text:"自定义规则",id:"自定义规则",depth:2},{text:"图片格式",id:"图片格式",depth:2}],title:"引用静态资源",frontmatter:{}}}}]);
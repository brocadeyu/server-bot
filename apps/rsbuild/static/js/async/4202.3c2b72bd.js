"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4202"],{99455:function(e,n,r){r.r(n),r.d(n,{default:function(){return c}});var s=r(55367),i=r(26971),t=r(38146);function l(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",pre:"pre",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",blockquote:"blockquote"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"vite",children:["Vite",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vite",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"This chapter introduces how to migrate a Vite project to Rsbuild."}),"\n",(0,s.jsxs)(n.h2,{id:"installing-dependencies",children:["Installing Dependencies",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installing-dependencies",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"First, you need to replace the npm dependencies of Vite with Rsbuild's dependencies."}),"\n","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Remove Vite dependencies:"}),"\n"]}),"\n",(0,s.jsx)(t.PackageManagerTabs,{command:"remove vite"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install Rsbuild dependencies:"}),"\n"]}),"\n",(0,s.jsx)(t.PackageManagerTabs,{command:"add @rsbuild/core -D"}),"\n",(0,s.jsxs)(n.h2,{id:"updating-npm-scripts",children:["Updating npm scripts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#updating-npm-scripts",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Next, you need to update the npm scripts in your package.json to use Rsbuild's CLI commands."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="package.json"',children:'{\n  "scripts": {\n-   "dev": "vite",\n-   "build": "vite build",\n-   "preview": "vite preview"\n+   "dev": "rsbuild dev",\n+   "build": "rsbuild build",\n+   "preview": "rsbuild preview"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"create-configuration-file",children:["Create Configuration File",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-configuration-file",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Create a Rsbuild configuration file ",(0,s.jsx)(n.code,{children:"rsbuild.config.ts"})," in the same directory as package.json, and add the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"build-entry",children:["Build Entry",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-entry",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["The default build entry points for Rsbuild and Vite are different. Vite uses ",(0,s.jsx)(n.code,{children:"index.html"})," as the default entry, while Rsbuild uses ",(0,s.jsx)(n.code,{children:"src/index.js"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["When migrating from Vite to Rsbuild, you can use Rsbuild's ",(0,s.jsx)(n.a,{href:"/config/source/entry",children:"source.entry"})," to set the build entry and ",(0,s.jsx)(n.a,{href:"/config/html/template",children:"html.template"})," to set the template."]}),"\n",(0,s.jsxs)(n.p,{children:["Using a newly created Vite project as an example, first delete the ",(0,s.jsx)(n.code,{children:"<script>"})," tags from ",(0,s.jsx)(n.code,{children:"index.html"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="index.html"',children:'- <script type="module" src="/src/main.ts"><\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Then add the following config."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  html: {\n    template: './index.html',\n  },\n  source: {\n    entry: {\n      index: './src/main.ts',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild will automatically inject the ",(0,s.jsx)(n.code,{children:"<script>"})," tags into the generated HTML files during the build process."]}),"\n",(0,s.jsxs)(n.h2,{id:"migrating-plugins",children:["Migrating Plugins",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migrating-plugins",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Most common Vite plugins can be easily migrated to Rsbuild plugins, such as:"}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"Vite"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-react",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-react"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-react",children:"@rsbuild/plugin-react"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-react-swc",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-react-swc"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-react",children:"@rsbuild/plugin-react"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-vue",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-vue"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-vue",children:"@rsbuild/plugin-vue"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-vue2",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-vue2"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue2",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-vue2"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-vue-jsx",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-vue-jsx"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue-jsx",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-vue-jsx"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-vue2-jsx",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-vue2-jsx"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue2-jsx",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-vue2-jsx"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-basic-ssl",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-basic-ssl"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-basic-ssl",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-basic-ssl"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vitejs/plugin-legacy",target:"_blank",rel:"noopener noreferrer",children:"@vitejs/plugin-legacy"})}),"\n",(0,s.jsxs)(n.td,{children:["No need to use, see ",(0,s.jsx)(n.a,{href:"/guide/advanced/browser-compatibility",children:"Browser Compatibility"})," for details"]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@sveltejs/vite-plugin-svelte",target:"_blank",rel:"noopener noreferrer",children:"@sveltejs/vite-plugin-svelte"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svelte",children:"@rsbuild/plugin-svelte"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-svgr",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-svgr"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svgr",children:"@rsbuild/plugin-svgr"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-checker",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-checker"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-eslint",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-eslint"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-eslint",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-eslint"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-static-copy",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-static-copy"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/copy",children:"output.copy"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-node-polyfills",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-node-polyfills"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-node-polyfill",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-node-polyfill"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vite-plugin-solid",target:"_blank",rel:"noopener noreferrer",children:"vite-plugin-solid"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-solid",children:"@rsbuild/plugin-solid"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@preact/preset-vite",target:"_blank",rel:"noopener noreferrer",children:"@preact/preset-vite"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-preact",children:"@rsbuild/plugin-preact"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can refer to ",(0,s.jsx)(n.a,{href:"/plugins/list/index",children:"Plugin List"})," to learn more about available plugins."]}),"\n",(0,s.jsxs)(n.h2,{id:"configuration-migration",children:["Configuration Migration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-migration",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Here is the corresponding Rsbuild configuration for Vite configuration:"}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"Vite"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"root"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/root",children:"root"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"mode"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/mode",children:"mode"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"base"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/base",children:"server.base"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"define"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"plugins"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/plugins",children:"plugins"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"appType"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/history-api-fallback",children:"server.historyApiFallback"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"envDir"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars#env-directory",children:"Env Directory"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"publicDir"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/public-dir",children:"server.publicDir"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"assetsInclude"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/source/assets-include",children:"source.assetsInclude"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.alias"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/resolve/alias",children:"resolve.alias"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.dedupe"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/resolve/dedupe",children:"resolve.dedupe"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.extensions"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/resolve/extensions",children:"resolve.extensions"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.conditions"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack.resolve.conditionNames"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.mainFields"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack.resolve.mainFields"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"resolve.preserveSymlinks"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack.resolve.symlinks"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"html.cspNonce"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/security/nonce",children:"security.nonce"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.modules"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/css-modules",children:"output.cssModules"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.postcss"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/postcss",children:"tools.postcss"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.preprocessorOptions.sass"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"pluginSass"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.preprocessorOptions.less"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-less",children:"pluginLess"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.preprocessorOptions.stylus"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-stylus",children:"pluginStylus"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.devSourcemap"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"css.lightningcss"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/lightningcss-loader",children:"tools.lightningcssLoader"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.host, preview.host"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/host",children:"server.host"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.port, preview.port"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/port",children:"server.port"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.cors, preview.cors"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/cors",children:"server.cors"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.strictPort, preview.strictPort"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/strict-port",children:"server.strictPort"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.https, preview.https"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/https",children:"server.https"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.open, preview.open"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/open",children:"server.open"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.proxy, preview.proxy"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/proxy",children:"server.proxy"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.headers, preview.headers"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/headers",children:"server.headers"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"server.hmr"}),"\n",(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"/config/dev/hmr",children:"dev.hmr"}),", ",(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client"})]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.target, build.cssTarget"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/guide/advanced/browserslist",children:"Browserslist"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.outDir, build.assetsDir"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.assetsInlineLimit"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/data-uri-limit",children:"output.dataUriLimit"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.cssMinify"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/minify",children:"output.minify"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.sourcemap"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.lib"}),"\n",(0,s.jsxs)(n.td,{children:["Use ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rslib",target:"_blank",rel:"noopener noreferrer",children:"Rslib"})]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.manifest"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/manifest",children:"output.manifest"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.ssrEmitAssets"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/emit-assets",children:"output.emitAssets"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.minify, build.terserOptions"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/minify",children:"output.minify"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.emptyOutDir"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/clean-dist-path",children:"output.cleanDistPath"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.copyPublicDir"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/public-dir",children:"server.publicDir"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"build.reportCompressedSize"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/performance/print-file-size",children:"performance.printFileSize"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"ssr, worker"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/environments",children:"environments"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The above table does not cover all configurations of Vite, feel free to add more."}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"environment-variables",children:["Environment Variables",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#environment-variables",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Vite injects environment variables starting with ",(0,s.jsx)(n.code,{children:"VITE_"})," into the client code by default, while Rsbuild injects environment variables starting with ",(0,s.jsx)(n.code,{children:"PUBLIC_"})," by default (see ",(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars#public-variables",children:"public variables"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["To be compatible with Vite's behavior, you can manually call Rsbuild's ",(0,s.jsx)(n.a,{href:"/api/javascript-api/core#loadenv",children:"loadEnv"})," method to read environment variables starting with ",(0,s.jsx)(n.code,{children:"VITE_"}),", and inject them into the client code through the ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," config."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['VITE_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild injects the following ",(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars",children:"environment variables"})," by default:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"import.meta.env.MODE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"import.meta.env.BASE_URL"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"import.meta.env.PROD"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"import.meta.env.DEV"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.code,{children:"import.meta.env.SSR"}),", you can set it through the ",(0,s.jsx)(n.a,{href:"/config/environments",children:"environments"})," and ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," configuration options:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  environments: {\n    web: {\n      source: {\n        define: {\n          'import.meta.env.SSR': JSON.stringify(false),\n        },\n      },\n    },\n    node: {\n      source: {\n        define: {\n          'import.meta.env.SSR': JSON.stringify(true),\n        },\n      },\n      output: {\n        target: 'node',\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"preset-types",children:["Preset Types",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preset-types",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Vite provides some preset type definitions through the ",(0,s.jsx)(n.code,{children:"vite-env.d.ts"})," file. When migrating to Rsbuild, you can use the ",(0,s.jsx)(n.a,{href:"/guide/basic/typescript#preset-types",children:"preset types"})," provided by ",(0,s.jsx)(n.code,{children:"@rsbuild/core"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="src/env.d.ts"',children:'- /// <reference types="vite/client" />\n+ /// <reference types="@rsbuild/core/types" />\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"glob-import",children:["Glob Import",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#glob-import",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Vite provides ",(0,s.jsx)(n.code,{children:"import.meta.glob()"})," for importing multiple modules."]}),"\n",(0,s.jsxs)(n.p,{children:["When migrating to Rsbuild, you can use the ",(0,s.jsx)(n.a,{href:"https://rspack.dev/api/runtime-api/module-variables#importmetawebpackcontext",target:"_blank",rel:"noopener noreferrer",children:"import.meta.webpackContext()"})," function of Rspack instead:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Vite:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const modules = import.meta.glob('./dir/*.js');\n\nfor (const path in modules) {\n  modules[path]().then((mod) => {\n    console.log(path, mod);\n  });\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Rsbuild:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const context = import.meta.webpackContext('./dir', {\n  // Whether to search subdirectories\n  recursive: false,\n  regExp: /\\.js$/,\n});\n\nfor (const path of context.keys()) {\n  const mod = context(path);\n  console.log(path, mod);\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"validating-results",children:["Validating Results",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#validating-results",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["After completing the above steps, you have completed the basic migration from Vite to Rsbuild. You can now run the ",(0,s.jsx)(n.code,{children:"npm run dev"})," command to try starting the dev server."]}),"\n",(0,s.jsx)(n.p,{children:"If you encounter any issues during the build process, please debug according to the error log, or check the Vite configuration to see if there are any necessary configurations that have not been migrated to Rsbuild."}),"\n",(0,s.jsxs)(n.h2,{id:"contents-supplement",children:["Contents Supplement",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contents-supplement",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The current document only covers part of the migration process. If you find suitable content to add, feel free to contribute to the documentation via pull request \uD83E\uDD1D."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The documentation for rsbuild can be found in the ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/website",target:"_blank",rel:"noopener noreferrer",children:"rsbuild/website"})," directory."]}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}let c=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["en%2Fguide%2Fmigration%2Fvite.mdx"]={toc:[{text:"Installing Dependencies",id:"installing-dependencies",depth:2},{text:"Updating npm scripts",id:"updating-npm-scripts",depth:2},{text:"Create Configuration File",id:"create-configuration-file",depth:2},{text:"Build Entry",id:"build-entry",depth:2},{text:"Migrating Plugins",id:"migrating-plugins",depth:2},{text:"Configuration Migration",id:"configuration-migration",depth:2},{text:"Environment Variables",id:"environment-variables",depth:2},{text:"Preset Types",id:"preset-types",depth:2},{text:"Glob Import",id:"glob-import",depth:2},{text:"Validating Results",id:"validating-results",depth:2},{text:"Contents Supplement",id:"contents-supplement",depth:2}],title:"Vite",frontmatter:{}}}}]);
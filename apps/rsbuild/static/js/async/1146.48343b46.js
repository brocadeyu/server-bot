"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1146"],{85100:function(e,n,a){a.r(n),a.d(n,{default:function(){return l}});var r=a(55367),i=a(26971);function s(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",h2:"h2",h3:"h3",img:"img",ol:"ol"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"performancebundleanalyze",children:["performance.bundleAnalyze",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancebundleanalyze",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"Object | undefined"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Used to enable the ",(0,r.jsx)(n.a,{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer",children:"webpack-bundle-analyzer"})," plugin to analyze the size of the output."]}),"\n",(0,r.jsxs)(n.p,{children:["By default, Rsbuild does not enable ",(0,r.jsx)(n.code,{children:"webpack-bundle-analyzer"}),". When this feature is enabled, the default configuration is as follows:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // Distinguish by environment names, such as `web`, `node`, etc.\n  reportFilename: `report-${environment}.html`,\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"enable-bundle-analyze",children:["Enable Bundle Analyze",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable-bundle-analyze",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["You have two ways to enable ",(0,r.jsx)(n.code,{children:"webpack-bundle-analyzer"})," to analyze the size of the output files."]}),"\n",(0,r.jsxs)(n.h3,{id:"via-environment-variable",children:["Via Environment Variable",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#via-environment-variable",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Add the environment variable ",(0,r.jsx)(n.code,{children:"BUNDLE_ANALYZE=true"}),", for example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "scripts": {\n    "build:analyze": "BUNDLE_ANALYZE=true rsbuild build"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Since the Windows system does not support the above usage, you can also use ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/cross-env",target:"_blank",rel:"noopener noreferrer",children:"cross-env"})," to set environment variables. This ensures compatibility across different systems:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "scripts": {\n    "build:analyze": "cross-env BUNDLE_ANALYZE=true rsbuild build"\n  },\n  "devDependencies": {\n    "cross-env": "^7.0.0"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"via-configuration",children:["Via Configuration",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#via-configuration",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Configure ",(0,r.jsx)(n.code,{children:"performance.bundleAnalyze"})," to enable it permanently:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: {},\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"analysis-result",children:["Analysis Result",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#analysis-result",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"After enabling it, Rsbuild will generate an HTML file that analyzes the size of the output files, and print the following log in the Terminal:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Webpack Bundle Analyzer saved report to /Project/my-project/dist/report-web.html\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can manually open the file in the browser and view the detail of the bundle size. When an area is larger, it indicates that its corresponding bundle size is larger."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://assets.rspack.dev/rsbuild/assets/bundle-analyzer-example.png",alt:""})}),"\n",(0,r.jsxs)(n.h2,{id:"override-default-configuration",children:["Override Default Configuration",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#override-default-configuration",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["You can override the default configuration through ",(0,r.jsx)(n.code,{children:"performance.bundleAnalyze"}),", such as enabling the server mode:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: process.env.BUNDLE_ANALYZE\n      ? {\n          analyzerMode: 'server',\n          openAnalyzer: true,\n        }\n      : {},\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"size-types",children:["Size Types",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#size-types",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"webpack-bundle-analyzer"})," panel, you can control size types in the upper left corner (default is ",(0,r.jsx)(n.code,{children:"Parsed"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Stat"}),": The size obtained from the ",(0,r.jsx)(n.code,{children:"stats"})," object of the bundler, which reflects the size of the code before minification."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Parsed"}),": The size of the file on the disk, which reflects the size of the code after minification."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Gzipped"}),": The file size requested in the browser reflects the size of the code after minification and gzip."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"generate-statsjson",children:["Generate stats.json",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#generate-statsjson",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["By setting ",(0,r.jsx)(n.code,{children:"generateStatsFile"})," to true, stats JSON file will be generated in bundle output directory."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: {\n      generateStatsFile: true,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"notes",children:["Notes",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#notes",children:"#"})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Enabling the server mode will cause the ",(0,r.jsx)(n.code,{children:"build"})," process to not exit normally."]}),"\n",(0,r.jsxs)(n.li,{children:["Enabling ",(0,r.jsx)(n.code,{children:"bundleAnalyzer"})," will reduce build speed. Therefore, this configuration should not be enabled during daily development, and it is recommended to enable it on demand through the ",(0,r.jsx)(n.code,{children:"BUNDLE_ANALYZE"})," environment variable."]}),"\n",(0,r.jsxs)(n.li,{children:["Since no code minification and other optimizations are performed in the ",(0,r.jsx)(n.code,{children:"dev"})," phase, the real output size cannot be reflected, so it is recommended to analyze the output size in the ",(0,r.jsx)(n.code,{children:"build"})," phase."]}),"\n",(0,r.jsxs)(n.li,{children:["If the bundleAnalyzer is enabled during the ",(0,r.jsx)(n.code,{children:"dev"})," phase, in order to ensure that webpack-bundle-analyzer can access the contents of static assets, Rsbuild will automatically enable the ",(0,r.jsx)(n.a,{href:"/config/dev/write-to-disk",children:"dev.writeToDisk"})," option."]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fbundle-analyze.mdx"]={toc:[{text:"Enable Bundle Analyze",id:"enable-bundle-analyze",depth:2},{text:"Via Environment Variable",id:"via-environment-variable",depth:3},{text:"Via Configuration",id:"via-configuration",depth:3},{text:"Analysis Result",id:"analysis-result",depth:3},{text:"Override Default Configuration",id:"override-default-configuration",depth:2},{text:"Size Types",id:"size-types",depth:2},{text:"Generate stats.json",id:"generate-statsjson",depth:2},{text:"Notes",id:"notes",depth:2}],title:"performance.bundleAnalyze",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["689"],{73907:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var s=n(55367),a=n(26971);function i(e){let t=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",div:"div",h3:"h3",ul:"ul",li:"li",blockquote:"blockquote"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.h1,{id:"html-template",children:["HTML Template",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#html-template",children:"#"})]}),"\n",(0,s.jsx)(t.p,{children:"During the build process, Rsbuild will compile based on the HTML template and template parameters to generate several HTML files."}),"\n",(0,s.jsx)(t.p,{children:"Rsbuild provides some configs to set the HTML template. Through this chapter, you can learn the basic usage of these configs."}),"\n",(0,s.jsxs)(t.h2,{id:"set-template",children:["Set Template",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#set-template",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["In Rsbuild, you can use ",(0,s.jsx)(t.a,{href:"/config/html/template",children:"html.template"})," config to define the path to the custom HTML template."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    template: './static/index.html',\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.p,{children:["If ",(0,s.jsx)(t.code,{children:"html.template"})," is not set, Rsbuild will use the built-in HTML template:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",meta:'title="defaultTemplate.html"',children:'<!doctype html>\n<html>\n  <head></head>\n  <body>\n    <div id="<%= mountId %>"></div>\n  </body>\n</html>\n'})}),"\n",(0,s.jsxs)(t.h2,{id:"set-page-title",children:["Set Page Title",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#set-page-title",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["You can set the HTML ",(0,s.jsx)(t.code,{children:"<title>"})," tag through the ",(0,s.jsx)(t.a,{href:"/config/html/title",children:"html.title"})," config."]}),"\n",(0,s.jsxs)(t.p,{children:["When there is only one page in your project, just use the ",(0,s.jsx)(t.code,{children:"html.title"})," setting directly:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    title: 'example',\n  },\n};\n"})}),"\n",(0,s.jsx)(t.p,{children:"When your project has multiple pages, you can set corresponding titles for different pages based on the entry name."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    title({ entryName }) {\n      const titles = {\n        foo: 'Foo',\n        bar: 'Bar',\n      };\n      return titles[entryName];\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.div,{className:"rspress-directive tip",children:[(0,s.jsx)(t.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(t.div,{className:"rspress-directive-content",children:(0,s.jsxs)(t.p,{children:["For single-page applications (SPA), Rsbuild will include an initial title in the HTML page, but you usually need to dynamically update the page title on route switching, for example using some routing libraries or libraries like ",(0,s.jsx)(t.a,{href:"https://github.com/nfl/react-helmet",target:"_blank",rel:"noopener noreferrer",children:"React Helmet"}),".\n"]})})]}),"\n",(0,s.jsxs)(t.h2,{id:"set-page-icon",children:["Set Page Icon",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#set-page-icon",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild supports setting ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Glossary/Favicon",target:"_blank",rel:"noopener noreferrer",children:"favicon"})," icon and ",(0,s.jsx)(t.a,{href:"https://webhint.io/docs/user-guide/hints/hint-apple-touch-icons/",target:"_blank",rel:"noopener noreferrer",children:"apple-touch-icon"})," icon."]}),"\n",(0,s.jsxs)(t.p,{children:["You can set the favicon through the ",(0,s.jsx)(t.a,{href:"/config/html/favicon",children:"html.favicon"})," config."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    favicon: './src/assets/icon.png',\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can also set the web application icons to display when added to the home screen of a mobile device through the ",(0,s.jsx)(t.a,{href:"/config/html/app-icon",children:"html.appIcon"})," config."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        { src: './src/assets/logo-192.png', size: 192 },\n        { src: './src/assets/logo-512.png', size: 512 },\n      ],\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.h2,{id:"set-meta-tags",children:["Set Meta Tags",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#set-meta-tags",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["You can set the meta tags through the ",(0,s.jsx)(t.a,{href:"/config/html/meta",children:"html.meta"})," config."]}),"\n",(0,s.jsx)(t.p,{children:"Rsbuild defaults to setting the charset and viewport meta tags:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'<meta charset="UTF-8" />\n<meta name="viewport" content="width=device-width, initial-scale=1.0" />\n'})}),"\n",(0,s.jsx)(t.p,{children:"You can also add custom meta tags, such as setting the description:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    meta: {\n      description: 'a description of the page',\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(t.p,{children:"The generated meta tag in HTML is:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'<meta name="description" content="a description of the page" />\n'})}),"\n",(0,s.jsxs)(t.h2,{id:"default-template-engine",children:["Default Template Engine",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#default-template-engine",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild comes with a built-in default template engine to handle HTML template files, and its syntax is similar to a subset of EJS, but it has some differences. When the suffix of an HTML template file is ",(0,s.jsx)(t.code,{children:".html"}),", Rsbuild will use the built-in template engine to parse the HTML template."]}),"\n",(0,s.jsxs)(t.p,{children:["For example, if a ",(0,s.jsx)(t.code,{children:"text"})," param is defined in the template with the value ",(0,s.jsx)(t.code,{children:"'world'"}),", Rsbuild will automatically replace ",(0,s.jsx)(t.code,{children:"<%= text %>"})," with the specified value during the build process."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:"\x3c!-- Input  --\x3e\n<div>hello <%= text %>!</div>\n\n\x3c!-- Output --\x3e\n<div>hello world!</div>\n"})}),"\n",(0,s.jsxs)(t.h3,{id:"template-parameters",children:["Template Parameters",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#template-parameters",children:"#"})]}),"\n",(0,s.jsx)(t.p,{children:"In HTML templates, you can use a variety of template parameters. The template parameters injected by Rsbuild by default include:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"type DefaultParameters = {\n  mountId: string; // the value of `html.mountId` config\n  entryName: string; // entry name\n  assetPrefix: string; // the value of dev.assetPrefix or output.assetPrefix configs\n  compilation: Compilation; // Compilation object of Rspack\n  rspackConfig: Rspack.Configuration; // Rspack config object\n  // generated by html-rspack-plugin\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can use the ",(0,s.jsx)(t.a,{href:"/config/html/template-parameters",children:"html.templateParameters"})," config to pass in custom template parameters. For example:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  html: {\n    templateParameters: {\n      text: 'world',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Then you can read parameters in the HTML template with ",(0,s.jsx)(t.code,{children:"<%= text %>"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",meta:'title="index.html"',children:"<div>hello <%= text %>!</div>\n"})}),"\n",(0,s.jsx)(t.p,{children:"The compiled HTML code will be:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",meta:'title="dist/index.html"',children:"<div>hello world!</div>\n"})}),"\n",(0,s.jsxs)(t.h3,{id:"parameter-escaping",children:["Parameter Escaping",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#parameter-escaping",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["When using ",(0,s.jsx)(t.code,{children:"<%= text %>"}),", the parameters will not be escaped. You can use ",(0,s.jsx)(t.code,{children:"<%- text %>"})," to escape parameters."]}),"\n",(0,s.jsxs)(t.p,{children:["For example, if the value of the parameter ",(0,s.jsx)(t.code,{children:"text"})," is ",(0,s.jsx)(t.code,{children:"'<script>'"}),", it will be escaped to ",(0,s.jsx)(t.code,{children:"&lt;script&gt;"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:"\x3c!-- Input  --\x3e\n<div>hello <%- text %>!</div>\n\n\x3c!-- Output --\x3e\n<div>hello &lt;script&gt;!</div>\n"})}),"\n",(0,s.jsxs)(t.div,{className:"rspress-directive tip",children:[(0,s.jsx)(t.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(t.div,{className:"rspress-directive-content",children:(0,s.jsxs)(t.p,{children:["Note that Rsbuild's default escape syntax is different from EJS. In EJS, the default escape syntax is ",(0,s.jsx)(t.code,{children:"<%= text %>"}),", whereas Rsbuild's default escape syntax is ",(0,s.jsx)(t.code,{children:"<%- text %>"}),".\n"]})})]}),"\n",(0,s.jsxs)(t.h2,{id:"other-template-engines",children:["Other Template Engines",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#other-template-engines",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild also supports using other template engines via plugins, such as ",(0,s.jsx)(t.a,{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer",children:"EJS"})," and ",(0,s.jsx)(t.a,{href:"https://pugjs.org/",target:"_blank",rel:"noopener noreferrer",children:"Pug"}),"."]}),"\n",(0,s.jsxs)(t.h3,{id:"ejs",children:["EJS",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#ejs",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild's built-in template syntax has some differences from ",(0,s.jsx)(t.a,{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer",children:"EJS"}),". If you need to use the full EJS syntax, you can support it through a plugin. See ",(0,s.jsx)(t.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-ejs",target:"_blank",rel:"noopener noreferrer",children:"rsbuild-plugin-ejs"})," for more details."]}),"\n",(0,s.jsxs)(t.h3,{id:"pug",children:["Pug",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#pug",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild supports the ",(0,s.jsx)(t.a,{href:"https://pugjs.org/",target:"_blank",rel:"noopener noreferrer",children:"Pug"})," template engine via a plugin. See ",(0,s.jsx)(t.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-pug",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-pug"})," for more details."]}),"\n",(0,s.jsxs)(t.h2,{id:"injecting-tags",children:["Injecting Tags",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#injecting-tags",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["You can insert any tags into the HTML files generated by Rsbuild by configuring ",(0,s.jsx)(t.a,{href:"/config/html/tags",children:"html.tags"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["In the HTML template, the ",(0,s.jsx)(t.code,{children:"htmlPlugin.tags"})," variable gives you access to all the tags inserted into the HTML:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",meta:'title="index.html"',children:'<html>\n  <head>\n    <%= htmlPlugin.tags.headTags %>\n  </head>\n  <body>\n    <div id="root"></div>\n    <%= htmlPlugin.tags.bodyTags %>\n  </body>\n</html>\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The purpose of the ",(0,s.jsx)(t.code,{children:"html.tags"})," is to update these tag variables to modify the tags in the HTML. Here is a basic example:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export default {\n  html: {\n    tags: [\n      { tag: 'script', attrs: { src: 'https://cdn.example.com/my-script.js' } },\n    ],\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The generated HTML file looks like this:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'<html>\n  <head>\n    <script src="https://cdn.example.com/my-script.js"><\/script>\n    \x3c!-- some other headTags... --\x3e\n  </head>\n  <body>\n    \x3c!-- some other bodyTags... --\x3e\n  </body>\n</html>\n'})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["For more usage, please refer to: ",(0,s.jsx)(t.a,{href:"/config/html/tags",children:"html.tags"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.div,{className:"rspress-directive tip",children:[(0,s.jsx)(t.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(t.div,{className:"rspress-directive-content",children:(0,s.jsxs)(t.p,{children:["Typically, you do not need to manually use the ",(0,s.jsx)(t.code,{children:"htmlPlugin.tags.headTags"})," and ",(0,s.jsx)(t.code,{children:"htmlPlugin.tags.bodyTags"})," template parameters, because Rsbuild will automatically inject these tags. See ",(0,s.jsx)(t.a,{href:"/config/html/inject",children:"html.inject"})," for more details on adjusting the injection location.\n"]})})]}),"\n",(0,s.jsxs)(t.h2,{id:"html-plugin",children:["HTML Plugin",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#html-plugin",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild internally implements HTML-related features based on ",(0,s.jsx)(t.a,{href:"https://github.com/rspack-contrib/html-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"html-rspack-plugin"}),". It is a fork of ",(0,s.jsx)(t.a,{href:"https://github.com/jantimon/html-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"html-webpack-plugin"}),", with the same features and options."]}),"\n",(0,s.jsxs)(t.p,{children:["You can modify the html-rspack-plugin options via ",(0,s.jsx)(t.a,{href:"/config/tools/html-plugin",children:"tools.htmlPlugin"}),", or disable the default html-rspack-plugin."]}),"\n",(0,s.jsx)(t.p,{children:"For example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(t.h2,{id:"html-minification",children:["HTML Minification",(0,s.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#html-minification",children:"#"})]}),"\n",(0,s.jsxs)(t.p,{children:["Rsbuild currently does not minify HTML files. If you need to minify HTML files, you can use the ",(0,s.jsx)(t.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-html-minifier-terser",target:"_blank",rel:"noopener noreferrer",children:"rsbuild-plugin-html-minifier-terser plugin"}),"."]})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}let r=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Fhtml-template.mdx"]={toc:[{text:"Set Template",id:"set-template",depth:2},{text:"Set Page Title",id:"set-page-title",depth:2},{text:"Set Page Icon",id:"set-page-icon",depth:2},{text:"Set Meta Tags",id:"set-meta-tags",depth:2},{text:"Default Template Engine",id:"default-template-engine",depth:2},{text:"Template Parameters",id:"template-parameters",depth:3},{text:"Parameter Escaping",id:"parameter-escaping",depth:3},{text:"Other Template Engines",id:"other-template-engines",depth:2},{text:"EJS",id:"ejs",depth:3},{text:"Pug",id:"pug",depth:3},{text:"Injecting Tags",id:"injecting-tags",depth:2},{text:"HTML Plugin",id:"html-plugin",depth:2},{text:"HTML Minification",id:"html-minification",depth:2}],title:"HTML Template",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["7592"],{76291:function(e,n,r){r.r(n),r.d(n,{default:function(){return l}});var s=r(55367),i=r(26971);function o(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",h2:"h2",code:"code",h3:"h3",pre:"pre",blockquote:"blockquote",ol:"ol"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"configure-swc",children:["Configure SWC",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configure-swc",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/swc-project/swc",target:"_blank",rel:"noopener noreferrer",children:"SWC"})," (Speedy Web Compiler) is a transformer and minimizer for JavaScript and TypeScript based on Rust. SWC provides similar functionality to Babel and Terser, and it is 20x faster than Babel on a single thread and 70x faster on four cores."]}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild enables the following SWC features by default:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Transform JavaScript and TypeScript code using Rspack's ",(0,s.jsx)(n.a,{href:"https://rspack.dev/guide/features/builtin-swc-loader",target:"_blank",rel:"noopener noreferrer",children:"builtin:swc-loader"}),", which is the Rust version of ",(0,s.jsx)(n.a,{href:"https://github.com/swc-project/pkgs/tree/main/packages/swc-loader",target:"_blank",rel:"noopener noreferrer",children:"swc-loader"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Minify JavaScript code using Rspack's ",(0,s.jsx)(n.a,{href:"https://rspack.dev/plugins/rspack/swc-js-minimizer-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"SwcJsMinimizerRspackPlugin"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"loader-options",children:["Loader Options",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#loader-options",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["The options for ",(0,s.jsx)(n.code,{children:"builtin:swc-loader"})," are consistent with the JS version of swc-loader. Rsbuild provides the ",(0,s.jsx)(n.a,{href:"/config/tools/swc",children:"tools.swc"})," option to configure ",(0,s.jsx)(n.code,{children:"builtin:swc-loader"}),". Here are some examples:"]}),"\n",(0,s.jsxs)(n.h3,{id:"register-swc-plugin",children:["Register SWC Plugin",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#register-swc-plugin",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"tools.swc"})," can be used to register SWC's Wasm plugins, for example, registering ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@swc/plugin-styled-components",target:"_blank",rel:"noopener noreferrer",children:"@swc/plugin-styled-components"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-components', {}]],\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["You can check out the ",(0,s.jsx)(n.a,{href:"https://github.com/swc-contrib/awesome-swc",target:"_blank",rel:"noopener noreferrer",children:"awesome-swc"})," repository to see the SWC plugins available in the community."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"swc-plugin-version",children:["SWC Plugin Version",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#swc-plugin-version",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Please note that the SWC plugin is still an experimental feature, and the SWC Wasm plugin is currently not backward compatible. The version of the SWC plugin is closely tied to the version of ",(0,s.jsx)(n.code,{children:"swc_core"})," that Rspack depends on."]}),"\n",(0,s.jsxs)(n.p,{children:["This means that you must to choose an SWC plugin that matches the current version of ",(0,s.jsx)(n.code,{children:"swc_core"})," to ensure that it works properly. If the version of the SWC plugin you are using does not match the version of ",(0,s.jsx)(n.code,{children:"swc_core"})," that Rspack depends on, Rspack will throw the following error during the build process:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"1: failed to run Wasm plugin transform. Please ensure the version of `swc_core`\n   used by the plugin is compatible with the host runtime.\n"})}),"\n",(0,s.jsx)(n.p,{children:"If you encounter the above issues, a common solution is to upgrade both the Rsbuild and SWC plugins to the latest versions."}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, you can follow these steps to select a suitable SWC plugin version:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Check the current version of Rspack you are using, this can be done by enabling ",(0,s.jsx)(n.a,{href:"/guide/debug/debug-mode",children:"debug mode"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Visit ",(0,s.jsx)(n.a,{href:"https://plugins.swc.rs/",target:"_blank",rel:"noopener noreferrer",children:"plugins.swc.rs"})," and select the version of Rspack you are currently using."]}),"\n",(0,s.jsx)(n.li,{children:"The website will list the range of SWC plugin versions that match to your current Rspack version. Then select the matched version of the SWC plugin to use."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If the SWC plugin you are using is not listed on ",(0,s.jsx)(n.a,{href:"https://plugins.swc.rs/",target:"_blank",rel:"noopener noreferrer",children:"plugins.swc.rs"}),", you can find the version information of ",(0,s.jsx)(n.code,{children:"swc_core"})," in the Cargo.toml file within the Rust code repository. For example, in the Rspack repository, you can open ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rspack/blob/main/Cargo.toml",target:"_blank",rel:"noopener noreferrer",children:"Cargo.toml"})," and search for the keyword ",(0,s.jsx)(n.code,{children:"swc_core"})," to find the version. Then read ",(0,s.jsx)(n.a,{href:"https://swc.rs/docs/plugin/selecting-swc-core",target:"_blank",rel:"noopener noreferrer",children:"SWC - Selecting the version"})," for further guidance."]}),"\n",(0,s.jsxs)(n.h3,{id:"enable-emotion-support",children:["Enable Emotion Support",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable-emotion-support",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Example of enabling the Emotion support using the ",(0,s.jsx)(n.code,{children:"builtin:swc-loader"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-emotion', {}]],\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For more options, please refer to ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@swc/plugin-emotion",target:"_blank",rel:"noopener noreferrer",children:"@swc/plugin-emotion"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"enable-relay-support",children:["Enable Relay Support",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable-relay-support",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Example of enabling the Relay support using the ",(0,s.jsx)(n.code,{children:"builtin:swc-loader"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-relay', {}]],\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For more options, please refer to ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@swc/plugin-relay",target:"_blank",rel:"noopener noreferrer",children:"@swc/plugin-relay"}),"."]}),"\n",(0,s.jsxs)(n.h2,{id:"minimizer-options",children:["Minimizer Options",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#minimizer-options",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild provides the ",(0,s.jsx)(n.a,{href:"/config/output/minify",children:"output.minify.js"})," option to configure the SwcJsMinimizerRspackPlugin. Here are some examples:"]}),"\n",(0,s.jsxs)(n.h3,{id:"exclude-files",children:["Exclude Files",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exclude-files",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["You can exclude certain files from being minified using the ",(0,s.jsx)(n.code,{children:"exclude"})," option:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    minify: {\n      jsOptions: {\n        exclude: /foo\\/bar/,\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"switching-minimizer",children:["Switching Minimizer",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#switching-minimizer",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"SwcJsMinimizerRspackPlugin"})," does not meet your needs, you can switch to other minimizers through the ",(0,s.jsx)(n.a,{href:"/config/tools/bundler-chain",children:"tools.bundlerChain"})," option."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, to switch to ",(0,s.jsx)(n.a,{href:"https://github.com/webpack-contrib/terser-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"Terser"})," for minifying JavaScript, which is more stable but performs worse compared to SWC:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID, isProd }) {\n      if (isProd) {\n        chain.optimization.minimizer(CHAIN_ID.MINIMIZER.JS).use(TerserPlugin, [\n          {\n            minify: TerserPlugin.terserMinify,\n          },\n        ]);\n      }\n    },\n  },\n};\n"})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Fconfigure-swc.mdx"]={toc:[{text:"Loader Options",id:"loader-options",depth:2},{text:"Register SWC Plugin",id:"register-swc-plugin",depth:3},{text:"SWC Plugin Version",id:"swc-plugin-version",depth:3},{text:"Enable Emotion Support",id:"enable-emotion-support",depth:3},{text:"Enable Relay Support",id:"enable-relay-support",depth:3},{text:"Minimizer Options",id:"minimizer-options",depth:2},{text:"Exclude Files",id:"exclude-files",depth:3},{text:"Switching Minimizer",id:"switching-minimizer",depth:2}],title:"Configure SWC",frontmatter:{}}}}]);
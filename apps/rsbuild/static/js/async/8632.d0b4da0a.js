"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["8632"],{51121:function(e,n,s){s.r(n),s.d(n,{default:function(){return o}});var r=s(55367),i=s(26971),t=s(28855),c=s(38146);function l(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",code:"code",pre:"pre",ul:"ul",li:"li",strong:"strong",blockquote:"blockquote"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"react-plugin",children:["React Plugin",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#react-plugin",children:"#"})]}),"\n","\n",(0,r.jsx)(t.ZB,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/packages/plugin-react"}),"\n",(0,r.jsx)(n.p,{children:"The React plugin provides support for React, integrating features such as JSX compilation and React Refresh."}),"\n",(0,r.jsxs)(n.h2,{id:"quick-start",children:["Quick Start",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#quick-start",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"install-plugin",children:["Install Plugin",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#install-plugin",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"You can install the plugin using the following command:"}),"\n","\n",(0,r.jsx)(c.PackageManagerTabs,{command:"add @rsbuild/plugin-react -D"}),"\n",(0,r.jsxs)(n.h3,{id:"register-plugin",children:["Register Plugin",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#register-plugin",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["You can register the plugin in the ",(0,r.jsx)(n.code,{children:"rsbuild.config.ts"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  plugins: [pluginReact()],\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"After registering the plugin, you can directly develop React."}),"\n",(0,r.jsxs)(n.h2,{id:"options",children:["Options",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#options",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"swcreactoptions",children:["swcReactOptions",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#swcreactoptions",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Configure the behavior of SWC to transform React code, the same as SWC's ",(0,r.jsx)(n.a,{href:"https://swc.rs/docs/configuration/compilation#jsctransformreact",target:"_blank",rel:"noopener noreferrer",children:"jsc.transform.react"})," option."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface SwcReactOptions {\n  pragma?: string;\n  pragmaFrag?: string;\n  throwIfNamespace?: boolean;\n  development?: boolean;\n  useBuiltins?: boolean;\n  refresh?: boolean;\n  runtime?: 'automatic' | 'classic';\n  importSource?: string;\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Default:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const isDev = process.env.NODE_ENV === 'development';\nconst defaultOptions = {\n  development: isDev,\n  refresh: isDev,\n  runtime: 'automatic',\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"swcreactoptionsruntime",children:["swcReactOptions.runtime",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#swcreactoptionsruntime",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"'automatic' | 'classic'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"'automatic'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["By default, Rsbuild uses the ",(0,r.jsx)(n.a,{href:"https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html",target:"_blank",rel:"noopener noreferrer",children:"new JSX runtime"})," introduced in React 17, which is ",(0,r.jsx)(n.code,{children:"runtime: 'automatic'"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["If your current React version is lower than 16.14.0, you can set ",(0,r.jsx)(n.code,{children:"runtime"})," to ",(0,r.jsx)(n.code,{children:"'classic'"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginReact({\n  swcReactOptions: {\n    runtime: 'classic',\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"React 16.14.0 can use the new JSX runtime."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When using the classic JSX runtime, you need to manually import React in your code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\n\nfunction App() {\n  return <h1>Hello World</h1>;\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"swcreactoptionsimportsource",children:["swcReactOptions.importSource",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#swcreactoptionsimportsource",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"'react'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"runtime"})," is ",(0,r.jsx)(n.code,{children:"'automatic'"}),", you can specify the import path of the JSX runtime through ",(0,r.jsx)(n.code,{children:"importSource"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, when using ",(0,r.jsx)(n.a,{href:"https://emotion.sh/",target:"_blank",rel:"noopener noreferrer",children:"Emotion"}),", you can set ",(0,r.jsx)(n.code,{children:"importSource"})," to ",(0,r.jsx)(n.code,{children:"'@emotion/react'"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginReact({\n  swcReactOptions: {\n    importSource: '@emotion/react',\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"splitchunks",children:["splitChunks",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#splitchunks",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.a,{href:"/config/performance/chunk-split",children:"chunkSplit.strategy"})," set to ",(0,r.jsx)(n.code,{children:"split-by-experience"}),", Rsbuild will automatically split ",(0,r.jsx)(n.code,{children:"react"})," and ",(0,r.jsx)(n.code,{children:"router"})," related packages into separate chunks by default:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lib-react.js"}),": includes react, react-dom, and react's sub-dependencies (scheduler)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lib-router.js"}),": includes react-router, react-router-dom, and react-router's sub-dependencies (history, @remix-run/router)."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This option is used to control this behavior and determine whether the ",(0,r.jsx)(n.code,{children:"react"})," and ",(0,r.jsx)(n.code,{children:"router"})," related packages need to be split into separate chunks."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type SplitReactChunkOptions = {\n  react?: boolean;\n  router?: boolean;\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Default:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const defaultOptions = {\n  react: true,\n  router: true,\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginReact({\n  splitChunks: {\n    react: false,\n    router: false,\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"enableprofiler",children:["enableProfiler",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enableprofiler",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["When set to ",(0,r.jsx)(n.code,{children:"true"}),", enables the React Profiler for performance analysis in production builds. Use the React DevTools to examine profiling results and identify potential performance optimizations. Profiling adds a slight overhead, so it's disabled by default in production mode."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"pluginReact({\n  // Only enable the profiler when REACT_PROFILER is true,\n  // as the option will increase the build time and adds some small additional overhead.\n  enableProfiler: process.env.REACT_PROFILER === 'true',\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Set ",(0,r.jsx)(n.code,{children:"REACT_PROFILER=true"})," when running build script:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "scripts": {\n    "build:profiler": "REACT_PROFILER=true rsbuild build"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Since the Windows system does not support the above usage, you can also use ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/cross-env",target:"_blank",rel:"noopener noreferrer",children:"cross-env"})," to set environment variables. This ensures compatibility across different systems:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "scripts": {\n    "build:profiler": "cross-env REACT_PROFILER=true rsbuild build"\n  },\n  "devDependencies": {\n    "cross-env": "^7.0.0"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"https://legacy.reactjs.org/docs/optimizing-performance.html#profiling-components-with-the-devtools-profiler",target:"_blank",rel:"noopener noreferrer",children:"React docs"})," for details about profiling using the React DevTools."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"reactrefreshoptions",children:["reactRefreshOptions",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#reactrefreshoptions",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type ReactRefreshOptions = {\n  include?: string | RegExp | (string | RegExp)[] | null;\n  exclude?: string | RegExp | (string | RegExp)[] | null;\n  library?: string;\n  forceEnable?: boolean;\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Default:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const defaultOptions = {\n  include: [/\\.(?:js|jsx|mjs|cjs|ts|tsx|mts|cts)$/],\n  exclude: [/[\\\\/]node_modules[\\\\/]/],\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Set the options for ",(0,r.jsx)(n.a,{href:"https://www.rspack.dev/guide/tech/react#rspackplugin-react-refresh",target:"_blank",rel:"noopener noreferrer",children:"@rspack/plugin-react-refresh"}),". The passed value will be shallowly merged with the default value."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"pluginReact({\n  reactRefreshOptions: {\n    exclude: [/some-module-to-exclude/, /[\\\\/]node_modules[\\\\/]/],\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"fastrefresh",children:["fastRefresh",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fastrefresh",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Whether to enable React ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/react-refresh",target:"_blank",rel:"noopener noreferrer",children:"Fast Refresh"})," in development mode."]}),"\n",(0,r.jsxs)(n.p,{children:["If you need to disable Fast Refresh, you can set it to ",(0,r.jsx)(n.code,{children:"false"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"pluginReact({\n  fastRefresh: false,\n});\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}let o=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fplugins%2Flist%2Fplugin-react.mdx"]={toc:[{text:"Quick Start",id:"quick-start",depth:2},{text:"Install Plugin",id:"install-plugin",depth:3},{text:"Register Plugin",id:"register-plugin",depth:3},{text:"Options",id:"options",depth:2},{text:"swcReactOptions",id:"swcreactoptions",depth:3},{text:"swcReactOptions.runtime",id:"swcreactoptionsruntime",depth:3},{text:"swcReactOptions.importSource",id:"swcreactoptionsimportsource",depth:3},{text:"splitChunks",id:"splitchunks",depth:3},{text:"enableProfiler",id:"enableprofiler",depth:3},{text:"reactRefreshOptions",id:"reactrefreshoptions",depth:3},{text:"fastRefresh",id:"fastrefresh",depth:3}],title:"React Plugin",frontmatter:{}}}}]);
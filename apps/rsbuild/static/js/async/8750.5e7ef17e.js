"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["8750"],{53471:function(e,n,r){r.r(n),r.d(n,{default:function(){return i}});var s=r(55367),t=r(26971);function a(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",h2:"h2"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"htmltemplateparameters",children:["html.templateParameters",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#htmltemplateparameters",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"类型："})," ",(0,s.jsx)(n.code,{children:"Record<string, unknown> | Function"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type DefaultParameters = {\n  mountId: string; // 对应 html.mountId 配置\n  entryName: string; // 入口名称\n  assetPrefix: string; // 对应 dev.assetPrefix 和 output.assetPrefix 配置\n  compilation: Compilation; // Rspack 的 compilation 对象\n  rspackConfig: Rspack.Configuration; // Rspack 的配置对象\n  // html-rspack-plugin 生成的参数\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["定义 HTML 模板中的参数，详细用法请参考 ",(0,s.jsx)(n.a,{href:"/guide/basic/html-template#%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0",children:"配置 HTML 模板 - 模板参数"}),"。"]}),"\n",(0,s.jsxs)(n.h2,{id:"对象用法",children:["对象用法",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#对象用法",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["如果 ",(0,s.jsx)(n.code,{children:"templateParameters"})," 的值是一个对象，它会和默认参数通过 ",(0,s.jsx)(n.code,{children:"Object.assign"})," 合并。"]}),"\n",(0,s.jsxs)(n.p,{children:["比如，如果你需要在 HTML 模板中使用 ",(0,s.jsx)(n.code,{children:"foo"})," 参数，可以添加如下设置："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  html: {\n    templateParameters: {\n      foo: 'bar',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["接下来，你可以在 HTML 模板中，通过 ",(0,s.jsx)(n.code,{children:"<%= foo %>"})," 来读取参数："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<script>\n  window.foo = '<%= foo %>';\n<\/script>\n"})}),"\n",(0,s.jsx)(n.p,{children:"编译后的 HTML 代码如下："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<script>\n  window.foo = 'bar';\n<\/script>\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"函数用法",children:["函数用法",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#函数用法",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type TemplateParametersFunction = (\n  defaultValue: Record<string, unknown>,\n  utils: { entryName: string },\n) => Record<string, unknown> | void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["当 ",(0,s.jsx)(n.code,{children:"html.templateParameters"})," 为 Function 类型时，函数接收两个参数："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"value"}),"：Rsbuild 的默认 templateParameters 配置。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"utils"}),": 一个对象，其中包含了 ",(0,s.jsx)(n.code,{children:"entryName"})," 字段，对应当前入口的名称。"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["在 MPA（多页面应用）场景下，你可以基于入口名称设置不同的 ",(0,s.jsx)(n.code,{children:"templateParameters"})," 参数："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  html: {\n    templateParameters(defaultValue, { entryName }) {\n      const params = {\n        foo: {\n          ...defaultValue,\n          type: 'Foo',\n        },\n        bar: {\n          ...defaultValue,\n          type: 'Bar',\n          hello: 'world',\n        },\n      };\n      return params[entryName] || defaultValue;\n    },\n  },\n};\n"})})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let i=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["zh%2Fconfig%2Fhtml%2Ftemplate-parameters.mdx"]={toc:[{text:"对象用法",id:"对象用法",depth:2},{text:"函数用法",id:"函数用法",depth:2}],title:"html.templateParameters",frontmatter:{}}}}]);
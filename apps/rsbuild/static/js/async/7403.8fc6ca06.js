"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["7403"],{26239:function(e,n,s){s.r(n),s.d(n,{default:function(){return o}});var r=s(55367),i=s(26971);function l(e){let n=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",img:"img",h3:"h3",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",h2:"h2"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"announcing-rsbuild-04",children:["Announcing Rsbuild 0.4",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#announcing-rsbuild-04",children:"#"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"February 06, 2024"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://assets.rspack.dev/rsbuild/rsbuild-banner-v0-4.png",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"Rsbuild 0.4 provides built-in support for module federation. It also contains some incompatible API updates. Please refer to the current document for upgrading."}),"\n",(0,r.jsxs)(n.h3,{id:"module-federation-config",children:["Module Federation Config",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-federation-config",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Rsbuild now provides a builtin ",(0,r.jsx)(n.a,{href:"/config/module-federation/options",children:"moduleFederation"})," option, which will make configuring Module Federation in Rsbuild much easier."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  moduleFederation: {\n    options: {\n      // ModuleFederationPluginOptions\n    },\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When you use this option, Rsbuild will automatically set the default ",(0,r.jsx)(n.code,{children:"publicPath"})," and ",(0,r.jsx)(n.code,{children:"splitChunks"})," config, making module federation ready to use out of the box."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/discussions/1461",target:"_blank",rel:"noopener noreferrer",children:"RFC - Provide first-class support for Module Federation"})," for details."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"plugin-hook-order",children:["Plugin Hook Order",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugin-hook-order",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["In Rsbuild plugin, you can now declare the order of hooks using the ",(0,r.jsx)(n.code,{children:"order"})," field:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const myPlugin = () => ({\n  setup: (api) => {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('hello'),\n      order: 'pre',\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["For more details, see ",(0,r.jsx)(n.a,{href:"/plugins/dev/hooks",children:"Plugin Hooks"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"rename-disablefilenamehash",children:["Rename disableFilenameHash",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rename-disablefilenamehash",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"output.disableFilenameHash"})," config has been renamed to ",(0,r.jsx)(n.a,{href:"/config/output/filename-hash",children:"output.filenameHash"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Before:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    disableFilenameHash: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"After:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    filenameHash: false,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"remove-postcss-flexbugs-fixes",children:["Remove postcss-flexbugs-fixes",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#remove-postcss-flexbugs-fixes",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Rsbuild 0.4 removed the builtin ",(0,r.jsx)(n.a,{href:"https://github.com/luisrudge/postcss-flexbugs-fixes",target:"_blank",rel:"noopener noreferrer",children:"postcss-flexbugs-fixes"})," plugin."]}),"\n",(0,r.jsx)(n.p,{children:"This plugin is used to fix some flex bugs for IE 10 / 11. Considering that modern browsers no longer have these flex issues, we removed this plugin to improve build performance."}),"\n",(0,r.jsx)(n.p,{children:"If your project needs to be compatible with IE 10 / 11 and encounters these flex issues, you can manually add this plugin in Rsbuild:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Install plugin:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm add postcss-flexbugs-fixes -D\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Register plugin in ",(0,r.jsx)(n.code,{children:"postcss.config.cjs"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  'postcss-flexbugs-fixes': {},\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"pure-react-plugin",children:["Pure React Plugin",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#pure-react-plugin",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["The React plugin has removed default ",(0,r.jsx)(n.a,{href:"/config/source/transform-import",children:"source.transformImport"})," config for ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/antd",target:"_blank",rel:"noopener noreferrer",children:"antd"})," v4 and ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/@arco-design/web-react",target:"_blank",rel:"noopener noreferrer",children:"@arco-design/web-react"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Configurations related to the UI library should be provided in the UI library-specific plugins, such as ",(0,r.jsx)(n.code,{children:"rsbuild-plugin-antd"})," or ",(0,r.jsx)(n.code,{children:"rsbuild-plugin-arco"}),", and the React plugin will concentrate on providing fundamental abilities for React."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If your project is using ",(0,r.jsx)(n.code,{children:"antd"})," v3 or v4, you can manually add the following config:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'antd',\n        libraryDirectory: 'es',\n        style: 'css',\n      },\n    ],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If your project is using ",(0,r.jsx)(n.code,{children:"@arco-design/web-react"}),", you can manually add the following config:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  source: {\n    transformImport: [\n      {\n        libraryName: '@arco-design/web-react',\n        libraryDirectory: 'es',\n        camelToDashComponentName: false,\n        style: 'css',\n      },\n      {\n        libraryName: '@arco-design/web-react/icon',\n        libraryDirectory: 'react-icon',\n        camelToDashComponentName: false,\n      },\n    ],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"javascript-api",children:["JavaScript API",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#javascript-api",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"loadConfig"})," method now returns both the contents of the config and the path to the config file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { loadConfig } from '@rsbuild/core';\n\n// 0.3\nconst config = await loadConfig();\n\n// 0.4\nconst { content, filePath } = await loadConfig();\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}let o=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fcommunity%2Freleases%2Fv0-4.mdx"]={toc:[{text:"Module Federation Config",id:"module-federation-config",depth:3},{text:"Plugin Hook Order",id:"plugin-hook-order",depth:3},{text:"Rename disableFilenameHash",id:"rename-disablefilenamehash",depth:3},{text:"Remove postcss-flexbugs-fixes",id:"remove-postcss-flexbugs-fixes",depth:2},{text:"Pure React Plugin",id:"pure-react-plugin",depth:2},{text:"JavaScript API",id:"javascript-api",depth:2}],title:"Announcing Rsbuild 0.4",frontmatter:{published_at:"2024-02-06T08:00:00.000Z"}}}}]);
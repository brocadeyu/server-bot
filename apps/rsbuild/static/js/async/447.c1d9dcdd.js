"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["447"],{61466:function(e,s,n){n.r(s),n.d(s,{default:function(){return a}});var i=n(55367),r=n(26971),l=n(28855),d=n(38146);function t(e){let s=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",div:"div",ul:"ul",li:"li",code:"code",pre:"pre",strong:"strong"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.h1,{id:"less-plugin",children:["Less Plugin",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#less-plugin",children:"#"})]}),"\n","\n",(0,i.jsx)(l.ZB,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/packages/plugin-less"}),"\n",(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.a,{href:"https://lesscss.org/",target:"_blank",rel:"noopener noreferrer",children:"Less"})," as the CSS preprocessor, implemented based on ",(0,i.jsx)(s.a,{href:"https://github.com/webpack-contrib/less-loader",target:"_blank",rel:"noopener noreferrer",children:"less-loader"}),"."]}),"\n",(0,i.jsxs)(s.h2,{id:"quick-start",children:["Quick Start",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#quick-start",children:"#"})]}),"\n",(0,i.jsxs)(s.h3,{id:"install-plugin",children:["Install Plugin",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#install-plugin",children:"#"})]}),"\n",(0,i.jsx)(s.p,{children:"You can install the plugin using the following command:"}),"\n","\n",(0,i.jsx)(d.PackageManagerTabs,{command:"add @rsbuild/plugin-less -D"}),"\n",(0,i.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,i.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsxs)(s.div,{className:"rspress-directive-content",children:["\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The Less plugin only supports @rsbuild/core versions >= 0.7.0."}),"\n",(0,i.jsx)(s.li,{children:"If the @rsbuild/core version is lower than 0.7.0, it has builtin support for the Less plugin, you do not need to install it."}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(s.h3,{id:"register-plugin",children:["Register Plugin",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#register-plugin",children:"#"})]}),"\n",(0,i.jsxs)(s.p,{children:["You can register the plugin in the ",(0,i.jsx)(s.code,{children:"rsbuild.config.ts"})," file:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n"})}),"\n",(0,i.jsxs)(s.p,{children:["After registering the plugin, you can import ",(0,i.jsx)(s.code,{children:"*.less"})," or ",(0,i.jsx)(s.code,{children:"*.module.less"})," files into the code without adding other configs."]}),"\n",(0,i.jsxs)(s.h2,{id:"options",children:["Options",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#options",children:"#"})]}),"\n",(0,i.jsx)(s.p,{children:"If you need to customize the compilation behavior of Less, you can use the following configs."}),"\n",(0,i.jsxs)(s.h3,{id:"lessloaderoptions",children:["lessLoaderOptions",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#lessloaderoptions",children:"#"})]}),"\n",(0,i.jsxs)(s.p,{children:["You can modify the config of ",(0,i.jsx)(s.a,{href:"https://github.com/webpack-contrib/less-loader",target:"_blank",rel:"noopener noreferrer",children:"less-loader"})," via ",(0,i.jsx)(s.code,{children:"lessLoaderOptions"}),"."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.code,{children:"Object | Function"})]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Default:"})}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"const defaultOptions = {\n  lessOptions: {\n    javascriptEnabled: true,\n    paths: [path.join(rootPath, 'node_modules')],\n  },\n  implementation: require.resolve('less'),\n  sourceMap: rsbuildConfig.output.sourceMap.css,\n};\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Example:"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"lessLoaderOptions"})," is an object, it is merged with the default config through ",(0,i.jsx)(s.code,{children:"Object.assign"})," in a shallow way. It should be noted that ",(0,i.jsx)(s.code,{children:"lessOptions"})," is merged through deepMerge in a deep way."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"pluginLess({\n  lessLoaderOptions: {\n    lessOptions: {\n      javascriptEnabled: false,\n    },\n  },\n});\n"})}),"\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"lessLoaderOptions"})," is a function, the default config is passed as the first parameter, which can be directly modified or returned as the final result."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"pluginLess({\n  lessLoaderOptions(config) {\n    config.lessOptions = {\n      javascriptEnabled: false,\n    };\n  },\n});\n"})}),"\n",(0,i.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,i.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsx)(s.div,{className:"rspress-directive-content",children:(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"lessLoaderOptions.lessOptions"})," config is passed to Less. See the ",(0,i.jsx)(s.a,{href:"https://lesscss.org/usage/#command-line-usage-options",target:"_blank",rel:"noopener noreferrer",children:"Less documentation"})," for all available options.\n"]})})]}),"\n",(0,i.jsxs)(s.h3,{id:"include",children:["include",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#include",children:"#"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"https://rspack.dev/config/module#condition",target:"_blank",rel:"noopener noreferrer",children:"RuleSetCondition"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default:"})," ",(0,i.jsx)(s.code,{children:"/\\.less$/"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Version:"})," ",(0,i.jsx)(s.code,{children:">= 1.1.0"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Include some ",(0,i.jsx)(s.code,{children:".less"})," files, they will be transformed by ",(0,i.jsx)(s.code,{children:"less-loader"}),". The value is the same as the ",(0,i.jsx)(s.code,{children:"rule.test"})," option in Rspack."]}),"\n",(0,i.jsx)(s.p,{children:"For example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:"pluginLess({\n  include: /\\.custom\\.less$/,\n});\n"})}),"\n",(0,i.jsxs)(s.h3,{id:"exclude",children:["exclude",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#exclude",children:"#"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"https://rspack.dev/config/module#condition",target:"_blank",rel:"noopener noreferrer",children:"RuleSetCondition"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default:"})," ",(0,i.jsx)(s.code,{children:"undefined"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Exclude some ",(0,i.jsx)(s.code,{children:".less"})," files, they will not be transformed by ",(0,i.jsx)(s.code,{children:"less-loader"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"For example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:"pluginLess({\n  exclude: /some-folder[\\\\/]foo\\.less/,\n});\n"})}),"\n",(0,i.jsxs)(s.h2,{id:"modifying-less-version",children:["Modifying Less Version",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#modifying-less-version",children:"#"})]}),"\n",(0,i.jsxs)(s.p,{children:["In some scenarios, if you need to use a specific version of Less instead of the built-in Less v4 in Rsbuild, you can install the desired Less version in your project and set it up using the ",(0,i.jsx)(s.code,{children:"implementation"})," option of the ",(0,i.jsx)(s.code,{children:"less-loader"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"pluginLess({\n  lessLoaderOptions: {\n    implementation: require('less'),\n  },\n});\n"})}),"\n",(0,i.jsxs)(s.h2,{id:"practices",children:["Practices",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#practices",children:"#"})]}),"\n",(0,i.jsxs)(s.h3,{id:"configure-multiple-less-plugins",children:["Configure multiple Less plugins",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#configure-multiple-less-plugins",children:"#"})]}),"\n",(0,i.jsxs)(s.p,{children:["By using the ",(0,i.jsx)(s.code,{children:"include"})," and ",(0,i.jsx)(s.code,{children:"exclude"})," options, you can register multiple Less plugins and specify different options for each plugin."]}),"\n",(0,i.jsx)(s.p,{children:"For example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:"export default {\n  plugins: [\n    pluginLess({\n      exclude: /\\.another\\.less$/,\n    }),\n    pluginLess({\n      include: /\\.another\\.less$/,\n      lessLoaderOptions: {\n        // some custom options\n      },\n    }),\n  ],\n};\n"})}),"\n",(0,i.jsxs)(s.h2,{id:"faq",children:["FAQ",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#faq",children:"#"})]}),"\n",(0,i.jsxs)(s.h3,{id:"division-in-less-file-doesnt-work",children:["Division in Less file doesn't work?",(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#division-in-less-file-doesnt-work",children:"#"})]}),"\n",(0,i.jsxs)(s.p,{children:["The built-in Less version for ",(0,i.jsx)(s.code,{children:"@rsbuild/plugin-less"})," is v4. Compared to v3, there are some differences in the division syntax in Less v4:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-less",children:"// Less v3\n.math {\n  width: 2px / 2; // 1px\n  width: 2px ./ 2; // 1px\n  width: (2px / 2); // 1px\n}\n\n// Less v4\n.math {\n  width: 2px / 2; // 2px / 2\n  width: 2px ./ 2; // 1px\n  width: (2px / 2); // 1px\n}\n"})}),"\n",(0,i.jsxs)(s.p,{children:["The division syntax in Less can be modified through configuration. For more details, see ",(0,i.jsx)(s.a,{href:"https://lesscss.org/usage/#less-options-math",target:"_blank",rel:"noopener noreferrer",children:"Less - Math"}),"."]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}let a=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["en%2Fplugins%2Flist%2Fplugin-less.mdx"]={toc:[{text:"Quick Start",id:"quick-start",depth:2},{text:"Install Plugin",id:"install-plugin",depth:3},{text:"Register Plugin",id:"register-plugin",depth:3},{text:"Options",id:"options",depth:2},{text:"lessLoaderOptions",id:"lessloaderoptions",depth:3},{text:"include",id:"include",depth:3},{text:"exclude",id:"exclude",depth:3},{text:"Modifying Less Version",id:"modifying-less-version",depth:2},{text:"Practices",id:"practices",depth:2},{text:"Configure multiple Less plugins",id:"configure-multiple-less-plugins",depth:3},{text:"FAQ",id:"faq",depth:2},{text:"Division in Less file doesn't work?",id:"division-in-less-file-doesnt-work",depth:3}],title:"Less Plugin",frontmatter:{}}}}]);
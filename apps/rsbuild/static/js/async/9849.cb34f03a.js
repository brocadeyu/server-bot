"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["9849"],{76751:function(e,s,r){r.r(s),r.d(s,{default:function(){return l}});var n=r(55367),i=r(26971);function a(e){let s=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",img:"img",ul:"ul",li:"li",h2:"h2",strong:"strong",code:"code",pre:"pre",h3:"h3"},(0,i.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"announcing-rsbuild-07",children:["Announcing Rsbuild 0.7",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#announcing-rsbuild-07",children:"#"})]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"May 28, 2024"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:"https://assets.rspack.dev/rsbuild/rsbuild-banner-v0-7.png",alt:""})}),"\n",(0,n.jsx)(s.p,{children:"Rsbuild 0.7 has been released with Rspack 0.7!"}),"\n",(0,n.jsx)(s.p,{children:"This is the last minor release before the Rsbuild 1.0. After this, the Rspack team will focus on the development of 1.0 and aim to launch the Rspack / Rsbuild 1.0 alpha version soon."}),"\n",(0,n.jsx)(s.p,{children:"Notable changes in Rsbuild 0.7:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#support-for-storybook",children:"Support for Storybook"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#faster-sass-compilation",children:"Faster Sass Compilation"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#better-css-supports",children:"Better CSS supports"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#typed-css-modules",children:"Typed CSS Modules"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#esmcjs-exports",children:"ESM/CJS Exports"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"#breaking-changes",children:"Breaking Changes"})}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"support-for-storybook",children:["Support for Storybook",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#support-for-storybook",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"Rsbuild now supports Storybook!"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://github.com/rspack-contrib/storybook-rsbuild",target:"_blank",rel:"noopener noreferrer",children:"storybook-builder-rsbuild"})," is a Storybook builder based on Storybook v8 and Rsbuild that allows you to quickly build your components and stories."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:"https://assets.rspack.dev/rsbuild/rsbuild-banner-with-storybook.png",alt:""})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"For projects using Rsbuild, you can now quickly integrate Storybook and reuse your existing Rsbuild config."}),"\n",(0,n.jsxs)(s.li,{children:["For projects using the Storybook webpack builder, you can now upgrade to Rsbuild and ",(0,n.jsx)(s.strong,{children:"get ~5x faster build performance"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["We also provide ",(0,n.jsx)(s.code,{children:"storybook-react-rsbuild"})," and ",(0,n.jsx)(s.code,{children:"storybook-vue3-rsbuild"})," to support React and Vue 3. For example, to integrate React:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",meta:'title=".storybook/main.js"',children:"import { StorybookConfig } from 'storybook-react-rsbuild';\n\nconst config: StorybookConfig = {\n  framework: 'storybook-react-rsbuild',\n};\n\nexport default config;\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:"https://assets.rspack.dev/rsbuild/assets/storybook-rsbuild-preview.png",alt:""})}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["For more usage, please refer to ",(0,n.jsx)(s.a,{href:"https://github.com/rspack-contrib/storybook-rsbuild",target:"_blank",rel:"noopener noreferrer",children:"storybook-rsbuild repository"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"faster-sass-compilation",children:["Faster Sass Compilation",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#faster-sass-compilation",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["In Rsbuild 0.7, ",(0,n.jsx)(s.strong,{children:"Sass compilation is 3~10 times faster"}),". The performance improvements are particularly noticeable on large projects."]}),"\n",(0,n.jsx)(s.p,{children:"Comparison of build times for Rsbuild 0.6 and 0.7 when compiling Bootstrap's Sass code:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:"https://assets.rspack.dev/rsbuild/assets/sass-embedded-compare.jpeg",alt:""})}),"\n",(0,n.jsxs)(s.p,{children:["This improvement is due to Rsbuild's default use of ",(0,n.jsx)(s.a,{href:"https://www.npmjs.com/package/sass-embedded",target:"_blank",rel:"noopener noreferrer",children:"sass-embedded"}),", a JavaScript wrapper around the native Dart Sass executable that provides a consistent API and superior performance."]}),"\n",(0,n.jsxs)(s.p,{children:["Rsbuild has also enabled the latest sass-loader's ",(0,n.jsx)(s.a,{href:"https://github.com/webpack-contrib/sass-loader/releases/tag/v14.2.0",target:"_blank",rel:"noopener noreferrer",children:"modern-compiler"})," API. This can enable Sass's shared resources feature, which allows the same compiler process to be reused when compiling multiple files, improving build performance."]}),"\n",(0,n.jsxs)(s.h2,{id:"better-css-supports",children:["Better CSS Supports",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#better-css-supports",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["Rsbuild now uses ",(0,n.jsx)(s.a,{href:"https://www.rspack.dev/plugins/rspack/css-extract-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"CssExtractRspackPlugin"})," to extract CSS into separate files, rather than using the ",(0,n.jsx)(s.a,{href:"https://www.rspack.dev/config/experiments#experimentscss",target:"_blank",rel:"noopener noreferrer",children:"experimental.css"})," config to do so."]}),"\n",(0,n.jsx)(s.p,{children:"This allows Rsbuild to support more CSS features, including:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Support for using ",(0,n.jsx)(s.code,{children:"<style module>"})," in the Vue SFC:"]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-html",meta:'title="index.vue"',children:'<template>\n  <p :class="$style.red">Red</p>\n</template>\n\n<style module>\n  .red {\n    color: red;\n  }\n</style>\n'})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Support for complex CSS Modules ",(0,n.jsx)(s.code,{children:":global()"})," syntax"]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-css",meta:'title="style.module.css"',children:":local(.parent):global(.child) > ul {\n  color: red;\n}\n"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Support for more CSS Modules options, such as ",(0,n.jsx)(s.a,{href:"/config/output/css-modules#cssmodulesexportglobals",children:"cssModules.exportGlobals"})]}),"\n",(0,n.jsxs)(s.li,{children:["Now you can use ",(0,n.jsx)(s.a,{href:"/config/tools/css-extract",children:"tools.cssExtract"})," to configure CssExtractRspackPlugin."]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"typed-css-modules",children:["Typed CSS Modules",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#typed-css-modules",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["Rsbuild 0.7 added a new ",(0,n.jsx)(s.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-typed-css-modules",target:"_blank",rel:"noopener noreferrer",children:"Typed CSS Modules plugin"}),", which is used to generate type declaration files for CSS Modules in the project."]}),"\n",(0,n.jsx)(s.p,{children:"When you use CSS Modules in a TypeScript project, the default type definition is as follows. It can only provide basic type support, and cannot accurately prompt which class names are exported by CSS Modules."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",meta:'title="src/env.d.ts"',children:"declare module '*.module.css' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"After using the Typed CSS Modules plugin, Rsbuild will generate type declaration files for all CSS Modules in the project, providing accurate type hints."}),"\n",(0,n.jsxs)(s.p,{children:["For example, create two files named ",(0,n.jsx)(s.code,{children:"src/index.ts"})," and ",(0,n.jsx)(s.code,{children:"src/index.module.css"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-tsx",meta:'title="src/index.ts"',children:"import styles from './index.module.css';\n\nconsole.log(styles.pageHeader);\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-css",meta:'title="index.module.css"',children:".page-header {\n  color: black;\n}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["After building, Rsbuild will generate a ",(0,n.jsx)(s.code,{children:"src/index.module.css.d.ts"})," type declaration file:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",meta:'title="src/index.module.css.d.ts"',children:"interface CssExports {\n  'page-header': string;\n  pageHeader: string;\n}\ndeclare const cssExports: CssExports;\nexport default cssExports;\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Now when you open the ",(0,n.jsx)(s.code,{children:"src/index.ts"})," file, you can see that the ",(0,n.jsx)(s.code,{children:"styles"})," object already has an accurate type."]}),"\n",(0,n.jsxs)(s.h2,{id:"esmcjs-exports",children:["ESM/CJS Exports",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#esmcjs-exports",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["Now, all packages of Rsbuild provide exports in both ES modules and CommonJS formats, and ",(0,n.jsx)(s.a,{href:"https://nodejs.org/api/packages.html#type",target:"_blank",rel:"noopener noreferrer",children:'"type"="module"'})," has been declared in the package.json."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:"https://assets.rspack.dev/rsbuild/assets/rsbuild-dual-package-example.png",alt:""})}),"\n",(0,n.jsxs)(s.p,{children:["This allows you to use ",(0,n.jsx)(s.code,{children:"import"})," or ",(0,n.jsx)(s.code,{children:"require"})," to use the JavaScript API of Rsbuild:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"// ES module\nimport { createRsbuild } from '@rsbuild/core';\n\n// CommonJS\nconst { createRsbuild } = require('@rsbuild/core');\n"})}),"\n",(0,n.jsx)(s.p,{children:"ESM/CJS interop is a tricky issue, so we will provide both formats for a long time to make it easier for more users to use."}),"\n",(0,n.jsxs)(s.h2,{id:"breaking-changes",children:["Breaking Changes",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#breaking-changes",children:"#"})]}),"\n",(0,n.jsxs)(s.h3,{id:"upgrade-rspack-to-07",children:["Upgrade Rspack to 0.7",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#upgrade-rspack-to-07",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"Rsbuild has upgraded the dependent Rspack to version 0.7 and adapted to the breaking changes included in it. Typically, these breaking changes will not affect you."}),"\n",(0,n.jsxs)(s.p,{children:["In the new version, Rspack supports lazy compilation, which can significantly improve the dev startup time for large projects. Please refer to ",(0,n.jsx)(s.a,{href:"https://rspack.dev/blog/announcing-0-7",target:"_blank",rel:"noopener noreferrer",children:"Announcing Rspack 0.7"})," to learn more."]}),"\n",(0,n.jsxs)(s.p,{children:["In Rsbuild, you can use ",(0,n.jsx)(s.a,{href:"/config/dev/lazy-compilation",children:"dev.lazyCompilation"})," to enable lazy compilation."]}),"\n",(0,n.jsxs)(s.h3,{id:"sass-and-less-plugins",children:["Sass and Less Plugins",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#sass-and-less-plugins",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["Rsbuild's Sass and Less plugins are now two separate npm packages instead of being built into ",(0,n.jsx)(s.code,{children:"@rsbuild/core"})," as before. This change allows users to enable Sass and Less compilation as needed."]}),"\n",(0,n.jsxs)(s.p,{children:["For example, projects using CSS solutions such as Tailwind CSS, CSS-in-JS, etc., no longer need to install the dependencies required for Sass and Less, ",(0,n.jsx)(s.strong,{children:"saving about 7MB of disk space"}),"."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["If your project requires compiling ",(0,n.jsx)(s.code,{children:".scss"})," or ",(0,n.jsx)(s.code,{children:".sass"})," files, please install and register the ",(0,n.jsx)(s.a,{href:"/plugins/list/plugin-sass",children:"@rsbuild/plugin-sass"})," plugin:"]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginSass } from '@rsbuild/plugin-sass';\n\nexport default {\n  plugins: [pluginSass()],\n};\n"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["If your project requires compiling ",(0,n.jsx)(s.code,{children:".less"})," files, please install and register the ",(0,n.jsx)(s.a,{href:"/plugins/list/plugin-less",children:"@rsbuild/plugin-less"})," plugin:"]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"dataurilimit-defaults",children:["dataUriLimit Defaults",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#dataurilimit-defaults",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["The default value for ",(0,n.jsx)(s.a,{href:"/config/output/data-uri-limit",children:"output.dataUriLimit"})," has been changed from ",(0,n.jsx)(s.code,{children:"10000 (10kB)"})," to ",(0,n.jsx)(s.code,{children:"4096 (4KiB)"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is because more applications are currently using HTTP 2.0, so splitting assets into separate files would perform better. Meanwhile, inlining assets over 4KiB can make the JS bundle to be too large and not cache friendly."}),"\n",(0,n.jsx)(s.p,{children:"If you prefer the previous defaults, add the following config:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",meta:'title="rsbuild.config.ts"',children:"export default {\n  output: {\n    dataUriLimit: 10000,\n  },\n};\n"})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["en%2Fcommunity%2Freleases%2Fv0-7.mdx"]={toc:[{text:"Support for Storybook",id:"support-for-storybook",depth:2},{text:"Faster Sass Compilation",id:"faster-sass-compilation",depth:2},{text:"Better CSS Supports",id:"better-css-supports",depth:2},{text:"Typed CSS Modules",id:"typed-css-modules",depth:2},{text:"ESM/CJS Exports",id:"esmcjs-exports",depth:2},{text:"Breaking Changes",id:"breaking-changes",depth:2},{text:"Upgrade Rspack to 0.7",id:"upgrade-rspack-to-07",depth:3},{text:"Sass and Less Plugins",id:"sass-and-less-plugins",depth:3},{text:"dataUriLimit Defaults",id:"dataurilimit-defaults",depth:3}],title:"Announcing Rsbuild 0.7",frontmatter:{published_at:"2024-05-28T18:00:00.000Z"}}}}]);
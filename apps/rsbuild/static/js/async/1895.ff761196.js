"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1895"],{94041:function(e,n,r){r.r(n),r.d(n,{default:function(){return t}});var i=r(55367),s=r(26971);function d(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",h2:"h2",pre:"pre"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"modulefederationoptions",children:["moduleFederation.options",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modulefederationoptions",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"类型："})," ",(0,i.jsx)(n.a,{href:"https://rspack.dev/plugins/webpack/module-federation-plugin#options",target:"_blank",rel:"noopener noreferrer",children:"Rspack.ModuleFederationPluginOptions"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"默认值："})," ",(0,i.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"用于配置 Rspack 模块联邦插件（对应模块联邦 v1.5）。"}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.p,{children:["模块联邦的实现有多个版本。在使用 ",(0,i.jsx)(n.code,{children:"moduleFederation.options"})," 之前，请阅读 ",(0,i.jsx)(n.a,{href:"/guide/advanced/module-federation",children:"模块联邦指南"})," 来了解不同版本之间的差异，以及如何进行选择，\n"]})})]}),"\n",(0,i.jsxs)(n.h2,{id:"介绍",children:["介绍",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#介绍",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["在使用模块联邦时，我们推荐你使用 Rsbuild 提供的 ",(0,i.jsx)(n.code,{children:"moduleFederation.options"})," 选项，这个选项会自动调整一些相关的配置，以保证模块联邦应用可以正确运行。"]}),"\n",(0,i.jsxs)(n.p,{children:["当你设置 ",(0,i.jsx)(n.code,{children:"moduleFederation.options"})," 选项后，Rsbuild 会执行以下操作："]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["自动注册 ",(0,i.jsx)(n.a,{href:"https://rspack.dev/zh/plugins/webpack/module-federation-plugin",target:"_blank",rel:"noopener noreferrer",children:"ModuleFederationPlugin"})," 插件，并将 ",(0,i.jsx)(n.code,{children:"options"})," 的值透传给插件。"]}),"\n",(0,i.jsxs)(n.li,{children:["将 provider 的 ",(0,i.jsx)(n.a,{href:"/config/dev/asset-prefix",children:"dev.assetPrefix"})," 配置的默认值设置为 ",(0,i.jsx)(n.code,{children:"true"}),"，这可以确保 remote modules 的静态资源 URL 是正确的。"]}),"\n",(0,i.jsxs)(n.li,{children:["将 Rspack ",(0,i.jsx)(n.a,{href:"https://rspack.dev/config/output#outputuniquename",target:"_blank",rel:"noopener noreferrer",children:"output.uniqueName"})," 配置的默认值设置为 ",(0,i.jsx)(n.code,{children:"moduleFederation.options.name"}),"，使 HMR 可以正常工作。"]}),"\n",(0,i.jsxs)(n.li,{children:["关闭 Rsbuild ",(0,i.jsx)(n.a,{href:"/config/performance/chunk-split",children:"performance.chunkSplit"})," 中 ",(0,i.jsx)(n.code,{children:"split-by-experience"})," 相关的规则，因为这可能会与 shared modules 冲突，参考 ",(0,i.jsx)(n.a,{href:"https://github.com/module-federation/module-federation-examples/issues/3161",target:"_blank",rel:"noopener noreferrer",children:"#3161"}),"。"]}),"\n",(0,i.jsx)(n.li,{children:"关闭 remote entry 的 splitChunks 规则。"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"用法",children:["用法",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#用法",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"moduleFederation.options"})," 的类型与 Rspack 的 ModuleFederationPlugin 插件完全一致："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  moduleFederation: {\n    options: {\n      name: 'remote',\n      // other options\n    },\n  },\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["请参考 ",(0,i.jsx)(n.a,{href:"https://rspack.dev/zh/plugins/webpack/module-federation-plugin",target:"_blank",rel:"noopener noreferrer",children:"ModuleFederationPlugin"})," 文档来了解所有可用的选项。"]}),"\n",(0,i.jsxs)(n.h2,{id:"示例",children:["示例",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"下面是一个最小示例："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Remote App"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="remote/rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  server: {\n    port: 3002,\n  },\n  moduleFederation: {\n    options: {\n      name: 'remote',\n      exposes: {\n        './Button': './src/Button',\n      },\n      filename: 'remoteEntry.js',\n    },\n  },\n});\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Host App"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="host/rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  server: {\n    port: 3002,\n  },\n  moduleFederation: {\n    options: {\n      name: 'host',\n      remotes: {\n        remote: 'remote@http://localhost:3002/remoteEntry.js',\n      },\n    },\n  },\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"更多示例请查看："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/rspack-contrib/rspack-examples/tree/main/rsbuild/module-federation",target:"_blank",rel:"noopener noreferrer",children:"Rsbuild - module-federation example"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/module-federation/module-federation-examples",target:"_blank",rel:"noopener noreferrer",children:"module-federation/module-federation-examples"})}),"\n"]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}let t=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fconfig%2Fmodule-federation%2Foptions.mdx"]={toc:[{text:"介绍",id:"介绍",depth:2},{text:"用法",id:"用法",depth:2},{text:"示例",id:"示例",depth:2}],title:"moduleFederation.options",frontmatter:{}}}}]);
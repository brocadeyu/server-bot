"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["412"],{50730:function(e,n,s){s.r(n),s.d(n,{default:function(){return d}});var r=s(55367),i=s(26971);function c(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",blockquote:"blockquote",h2:"h2",h3:"h3",div:"div"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"serverpublicdir",children:["server.publicDir",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serverpublicdir",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type PublicDirOptions = {\n  name?: string;\n  copyOnBuild?: boolean;\n  watch?: boolean;\n};\ntype PublicDir = false | PublicDirOptions | PublicDirOptions[];\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const defaultValue = {\n  name: 'public',\n  copyOnBuild: true,\n  watch: false,\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Rsbuild 会将 ",(0,r.jsx)(n.code,{children:"public"})," 目录作为静态资源服务的文件夹，该目录中的文件可在 ",(0,r.jsx)(n.a,{href:"/config/server/base",children:"server.base"})," 路径下访问（默认 ",(0,r.jsx)(n.code,{children:"/"}),"）。"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["相关文档：",(0,r.jsx)(n.a,{href:"/guide/basic/static-assets#public-%E7%9B%AE%E5%BD%95",children:"public 目录"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"选项",children:["选项",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#选项",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"name",children:["name",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#name",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'public'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["public 目录名称。",(0,r.jsx)(n.code,{children:"name"})," 的值可以设置为相对路径或绝对路径，相对路径将会相对于项目根目录进行解析。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"相对路径示例："}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  server: {\n    publicDir: {\n      name: '../some-public',\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"绝对路径示例："}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import path from 'node:path';\n\nexport default {\n  server: {\n    publicDir: {\n      name: path.join(__dirname, '../some-public'),\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"copyonbuild",children:["copyOnBuild",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#copyonbuild",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"在生产构建时，是否将文件从 public 目录复制到构建产物目录。"}),"\n",(0,r.jsxs)(n.p,{children:["比如关闭 ",(0,r.jsx)(n.code,{children:"copyOnBuild"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  server: {\n    publicDir: {\n      copyOnBuild: false,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["需要注意的是，将 ",(0,r.jsx)(n.code,{children:"copyOnBuild"})," 的值为 false 后，如果执行 ",(0,r.jsx)(n.code,{children:"rsbuild preview"})," 进行生产环境预览，将无法访问对应的静态资源文件。"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["在 dev 构建时，如果你需要拷贝一些静态资源到构建产物目录，可以使用 ",(0,r.jsx)(n.a,{href:"/config/output/copy",children:"output.copy"})," 选项代替。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"watch",children:["watch",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#watch",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否监听 public 目录，并在文件发生变化时重新加载页面。"}),"\n",(0,r.jsxs)(n.p,{children:["设置 ",(0,r.jsx)(n.code,{children:"watch"})," 为 ",(0,r.jsx)(n.code,{children:"true"})," 后，开发服务器会监听指定公共目录下的文件变化，并在文件发生变化时重新加载页面："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  server: {\n    publicDir: {\n      watch: true,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["需要注意的是，",(0,r.jsx)(n.code,{children:"watch"})," 选项仅在开发模式下有效。如果 ",(0,r.jsx)(n.a,{href:"/config/dev/hmr",children:"dev.hmr"})," 和 ",(0,r.jsx)(n.a,{href:"/config/dev/live-reload",children:"dev.liveReload"})," 都设置为 false，则 ",(0,r.jsx)(n.code,{children:"watch"})," 将被忽略。"]}),"\n",(0,r.jsxs)(n.h2,{id:"多目录",children:["多目录",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#多目录",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"server.publicDir"})," 可以配置为一个数组，这允许你将多个目录作为静态资源服务的文件夹："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  server: {\n    publicDir: [\n      {\n        name: 'public',\n      },\n      {\n        name: 'assets',\n        watch: false,\n      },\n    ],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"禁用",children:["禁用",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#禁用",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["你可以将 ",(0,r.jsx)(n.code,{children:"publicDir"})," 设置成 ",(0,r.jsx)(n.code,{children:"false"})," 来禁用静态资源服务："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  server: {\n    publicDir: false,\n  },\n};\n"})})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}let d=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["zh%2Fconfig%2Fserver%2Fpublic-dir.mdx"]={toc:[{text:"选项",id:"选项",depth:2},{text:"name",id:"name",depth:3},{text:"copyOnBuild",id:"copyonbuild",depth:3},{text:"watch",id:"watch",depth:3},{text:"多目录",id:"多目录",depth:2},{text:"禁用",id:"禁用",depth:2}],title:"server.publicDir",frontmatter:{}}}}]);
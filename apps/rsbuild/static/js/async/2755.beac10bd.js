"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["2755"],{79588:function(e,s,n){n.r(s),n.d(s,{default:function(){return c}});var l=n(55367),d=n(26971);function o(e){let s=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h2:"h2",pre:"pre",h3:"h3",ol:"ol",div:"div"},(0,d.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.h1,{id:"outputcssmodules",children:["output.cssModules",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcssmodules",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type:"})," ",(0,l.jsx)(s.code,{children:"CSSModules"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"For custom CSS Modules configuration."}),"\n",(0,l.jsxs)(s.p,{children:["The CSS Modules feature of Rsbuild is based on the ",(0,l.jsx)(s.code,{children:"modules"})," option of css-loader. You can refer to ",(0,l.jsx)(s.a,{href:"https://github.com/webpack-contrib/css-loader?tab=readme-ov-file#modules",target:"_blank",rel:"noopener noreferrer",children:"css-loader - modules"})," to learn more."]}),"\n",(0,l.jsxs)(s.h2,{id:"cssmodulesauto",children:["cssModules.auto",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesauto",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"auto"})," configuration option allows CSS Modules to be automatically enabled based on their filenames."]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.strong,{children:"Type:"})}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"type Auto =\n  | boolean\n  | RegExp\n  | ((\n      resourcePath: string,\n      resourceQuery: string,\n      resourceFragment: string,\n    ) => boolean);\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Default:"})," ",(0,l.jsx)(s.code,{children:"true"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Type description:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"true"}),": enable CSS Modules for all files matching ",(0,l.jsx)(s.code,{children:"/\\.module\\.\\w+$/i.test(filename)"})," regexp."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"false"}),": disable CSS Modules."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"RegExp"}),": enable CSS Modules for all files matching ",(0,l.jsx)(s.code,{children:"/RegExp/i.test(filename)"})," regexp."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"function"}),": enable CSS Modules for files based on the filename satisfying your filter function check."]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      auto: (resource) => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"cssmodulesexportlocalsconvention",children:["cssModules.exportLocalsConvention",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesexportlocalsconvention",children:"#"})]}),"\n",(0,l.jsx)(s.p,{children:"Style of exported class names."}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.strong,{children:"Type:"})}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"type CSSModulesLocalsConvention =\n  | 'asIs'\n  | 'camelCase'\n  | 'camelCaseOnly'\n  | 'dashes'\n  | 'dashesOnly';\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Default:"})," ",(0,l.jsx)(s.code,{children:"'camelCase'"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Type description:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"asIs"}),": Class names will be exported as is."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"camelCase"}),": Class names will be camelized, the original class name will be exported."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"camelCaseOnly"}),": Class names will be camelized, the original class name will not be exported."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"dashes"}),": Only dashes in class names will be camelized, the original class name will be exported."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"dashesOnly"}),": Dashes in class names will be camelized, the original class name will not be exported."]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      exportLocalsConvention: 'camelCaseOnly',\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"cssmodulesexportglobals",children:["cssModules.exportGlobals",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesexportglobals",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type:"})," ",(0,l.jsx)(s.code,{children:"boolean"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Default:"})," ",(0,l.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Allows exporting names from global class names, so you can use them via import."}),"\n",(0,l.jsxs)(s.h3,{id:"example",children:["Example",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["Set the ",(0,l.jsx)(s.code,{children:"exportGlobals"})," to ",(0,l.jsx)(s.code,{children:"true"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      exportGlobals: true,\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Use ",(0,l.jsx)(s.code,{children:":global()"})," in CSS Modules:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-css",meta:'title="style.module.css"',children:":global(.blue) {\n  color: blue;\n}\n\n.red {\n  color: red;\n}\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Then you can import the class name wrapped with ",(0,l.jsx)(s.code,{children:":global()"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",meta:'title="Button.tsx"',children:"import styles from './style.module.css';\n\nconsole.log(styles.blue); // 'blue'\nconsole.log(styles.red); // 'red-[hash]'\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"cssmoduleslocalidentname",children:["cssModules.localIdentName",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmoduleslocalidentname",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type:"})," ",(0,l.jsx)(s.code,{children:"string"})]}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.strong,{children:"Default:"})}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"// isProd indicates that the production build\nconst localIdentName = isProd\n  ? '[local]-[hash:base64:6]'\n  : '[path][name]__[local]-[hash:base64:6]';\n"})}),"\n",(0,l.jsx)(s.p,{children:"Sets the format of the class names generated by CSS Modules after compilation."}),"\n",(0,l.jsxs)(s.h3,{id:"default-value",children:["Default Value",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#default-value",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"localIdentName"})," has different default values in development and production."]}),"\n",(0,l.jsx)(s.p,{children:"In a production, Rsbuild will generate shorter class names to reduce the bundle size."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"import styles from './index.module.scss';\n\n// In development, the value is `src-index-module__header-[hash]`\n// In production, the value is `header-[hash]`\nconsole.log(styles.header);\n"})}),"\n",(0,l.jsxs)(s.h3,{id:"template-string",children:["Template String",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#template-string",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["You can use the following template strings in ",(0,l.jsx)(s.code,{children:"localIdentName"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[name]"})," - the basename of the asset."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[local]"})," - original class."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[hash]"})," - the hash of the string."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[folder]"})," - the folder relative path."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[path]"})," - the relative path."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[file]"})," - filename and path."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[ext]"})," - extension with leading dot."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"[hash:<hashDigest>:<hashDigestLength>]"}),": hash with hash settings."]}),"\n"]}),"\n",(0,l.jsxs)(s.h3,{id:"example-1",children:["Example",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#example-1",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["Set ",(0,l.jsx)(s.code,{children:"localIdentName"})," to other value:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      localIdentName: '[hash:base64:4]',\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"cssmodulesmode",children:["cssModules.mode",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesmode",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.strong,{children:"Type:"})}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"type Mode =\n  | 'local'\n  | 'global'\n  | 'pure'\n  | 'icss'\n  | ((resourcePath: string) => 'local' | 'global' | 'pure' | 'icss');\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Default:"})," ",(0,l.jsx)(s.code,{children:"'local'"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Controls the mode of compilation applied to the CSS Modules."}),"\n",(0,l.jsxs)(s.h3,{id:"optional-values",children:["Optional values",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#optional-values",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"cssModules.mode"})," can take one of the following values:"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"'local'"})," (default): This enables the CSS Modules specification for scoping CSS locally. Class and ID selectors are rewritten to be module-scoped, and ",(0,l.jsx)(s.code,{children:"@value"})," bindings are injected."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"'global'"}),": This opts-out of the CSS Modules behavior, disabling both local scoping and injecting ",(0,l.jsx)(s.code,{children:"@value"})," bindings. Global selectors are preserved as-is."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"'pure'"}),": This enables dead-code elimination by removing any unused local classnames and values from the final CSS. It still performs local scoping and ",(0,l.jsx)(s.code,{children:"@value"})," injection."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"'icss'"}),": This compiles to the low-level Interoperable CSS format, which provides a syntax for declaring ",(0,l.jsx)(s.code,{children:":import"})," and ",(0,l.jsx)(s.code,{children:":export"})," dependencies between CSS and other languages. It does not perform any scoping or ",(0,l.jsx)(s.code,{children:"@value"})," injection."]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"'local'"})," mode is the most common use case for CSS Modules, enabling modular and locally-scoped styles within components. The other modes may be used in specific scenarios."]}),"\n",(0,l.jsx)(s.p,{children:"For example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      mode: 'global',\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.h3,{id:"function",children:["Function",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#function",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["You can also pass a function to ",(0,l.jsx)(s.code,{children:"modules.mode"})," that determines the mode based on the resource path, query, or fragment. This allows you to use different modes for different files."]}),"\n",(0,l.jsxs)(s.p,{children:["For example, to use local scoping for ",(0,l.jsx)(s.code,{children:".module.css"})," files and global styles for other files:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-js",children:"modules: {\n  mode: (resourcePath) => {\n    if (/\\.module\\.\\css$/.test(resourcePath)) {\n      return 'local';\n    }\n    return 'global';\n  };\n}\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"cssmodulesnamedexport",children:["cssModules.namedExport",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesnamedexport",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Type:"})," ",(0,l.jsx)(s.code,{children:"boolean"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Default:"})," ",(0,l.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Whether to enable ES modules named export for class names."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      namedExport: true,\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.h3,{id:"example-2",children:["Example",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#example-2",children:"#"})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-css",meta:'title="style.module.css"',children:".foo {\n  color: blue;\n}\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"namedExport: false"}),":"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-js",children:"import styles from './style.module.css';\n\nconsole.log(styles.foo);\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"namedExport: true"}),":"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-js",children:"import { foo } from './style.module.css';\n// or\nimport * as styles from './style.module.css';\n\nconsole.log(foo);\nconsole.log(styles.foo);\n"})}),"\n",(0,l.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,l.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,l.jsx)(s.div,{className:"rspress-directive-content",children:(0,l.jsxs)(s.p,{children:["When ",(0,l.jsx)(s.code,{children:"namedExport"})," is set to true, the ",(0,l.jsx)(s.code,{children:"default"})," class exported by CSS Modules will be automatically renamed to ",(0,l.jsx)(s.code,{children:"_default"})," class because ",(0,l.jsx)(s.code,{children:"default"})," is a reserved word in ECMA modules.\n"]})})]})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,d.ah)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}let c=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["en%2Fconfig%2Foutput%2Fcss-modules.mdx"]={toc:[{text:"cssModules.auto",id:"cssmodulesauto",depth:2},{text:"cssModules.exportLocalsConvention",id:"cssmodulesexportlocalsconvention",depth:2},{text:"cssModules.exportGlobals",id:"cssmodulesexportglobals",depth:2},{text:"Example",id:"example",depth:3},{text:"cssModules.localIdentName",id:"cssmoduleslocalidentname",depth:2},{text:"Default Value",id:"default-value",depth:3},{text:"Template String",id:"template-string",depth:3},{text:"Example",id:"example-1",depth:3},{text:"cssModules.mode",id:"cssmodulesmode",depth:2},{text:"Optional values",id:"optional-values",depth:3},{text:"Function",id:"function",depth:3},{text:"cssModules.namedExport",id:"cssmodulesnamedexport",depth:2},{text:"Example",id:"example-2",depth:3}],title:"output.cssModules",frontmatter:{}}}}]);
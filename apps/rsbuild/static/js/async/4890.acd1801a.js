"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4890"],{20370:function(e,s,n){n.r(s),n.d(s,{default:function(){return d}});var r=n(55367),c=n(26971);function i(e){let s=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",h3:"h3",pre:"pre",blockquote:"blockquote",ul:"ul",li:"li"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"使用-typescript",children:["使用 TypeScript",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-typescript",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 默认支持 TypeScript，你可以直接在项目中使用 ",(0,r.jsx)(s.code,{children:".ts"})," 和 ",(0,r.jsx)(s.code,{children:".tsx"})," 文件。"]}),"\n",(0,r.jsxs)(s.h2,{id:"typescript-转译",children:["TypeScript 转译",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#typescript-转译",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"Rsbuild 默认使用 SWC 来转译 TypeScript 代码，也支持切换到 Babel 进行转译。"}),"\n",(0,r.jsxs)(s.h3,{id:"isolatedmodules",children:["isolatedModules",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#isolatedmodules",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["与 TypeScript 原生编译器不同，像 SWC 和 Babel 这样的工具会将每个文件单独编译，它无法确定导入的名称是一个类型还是一个值。因此，当你在 Rsbuild 中使用 TypeScript 时，需要启用 ",(0,r.jsx)(s.code,{children:"tsconfig.json"})," 中的 ",(0,r.jsx)(s.a,{href:"https://typescriptlang.org/tsconfig/#isolatedModules",target:"_blank",rel:"noopener noreferrer",children:"isolatedModules"})," 选项："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",meta:'title="tsconfig.json"',children:'{\n  "compilerOptions": {\n    "isolatedModules": true\n  }\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"该选项可以帮助你避免使用一些 SWC 和 Babel 无法正确编译的写法，比如跨文件的类型引用问题，它会引导你更正对应的用法："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"// 错误\nexport { SomeType } from './types';\n\n// 正确\nexport type { SomeType } from './types';\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["参考 ",(0,r.jsx)(s.a,{href:"https://swc.rs/docs/migrating-from-tsc",target:"_blank",rel:"noopener noreferrer",children:"SWC - Migrating from tsc"})," 了解更多 SWC 和 tsc 的差异。"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"预设类型",children:["预设类型",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#预设类型",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"@rsbuild/core"})," 提供了一些预设的类型定义，包含 CSS Modules、静态资源、",(0,r.jsx)(s.code,{children:"import.meta"})," 等类型。"]}),"\n",(0,r.jsxs)(s.p,{children:["你可以创建一个 ",(0,r.jsx)(s.code,{children:"src/env.d.ts"})," 文件来引用："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="src/env.d.ts"',children:'/// <reference types="@rsbuild/core/types" />\n'})}),"\n",(0,r.jsxs)(s.h2,{id:"类型检查",children:["类型检查",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#类型检查",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"在进行 TypeScript 转译时，SWC 和 Babel 等工具不会执行类型检查。"}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 提供了 Type Check 插件，用于在单独的进程中运行 TypeScript 类型检查，插件内部集成了 ",(0,r.jsx)(s.a,{href:"https://github.com/rspack-contrib/ts-checker-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"ts-checker-rspack-plugin"}),"。"]}),"\n",(0,r.jsxs)(s.p,{children:["请参考 ",(0,r.jsx)(s.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})," 了解用法。"]}),"\n",(0,r.jsxs)(s.h2,{id:"tsconfigjson-路径",children:["tsconfig.json 路径",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#tsconfigjson-路径",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 默认读取根目录的 ",(0,r.jsx)(s.code,{children:"tsconfig.json"})," 文件，你可以使用 ",(0,r.jsx)(s.a,{href:"/config/source/tsconfig-path",children:"source.tsconfigPath"})," 配置自定义的 tsconfig.json 文件路径。"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"export default {\n  source: {\n    tsconfigPath: './tsconfig.custom.json',\n  },\n};\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"路径后缀",children:["路径后缀",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#路径后缀",children:"#"})]}),"\n",(0,r.jsxs)(s.p,{children:["当在一个 TypeScript 模块中导入另一个模块时，TypeScript 允许使用 ",(0,r.jsx)(s.code,{children:".js"})," 文件扩展名："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",meta:'title="src/index.ts"',children:"// 实际引用的模块可能是 `./some-module.ts` 或 `./some-module.tsx`\nimport { someFn } from './some-module.js';\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Rsbuild 通过 Rspack 的 ",(0,r.jsx)(s.a,{href:"https://rspack.dev/config/resolve#resolveextensionalias",target:"_blank",rel:"noopener noreferrer",children:"extensionAlias"})," 配置来支持该特性。在 TypeScript 项目中，Rsbuild 默认会添加以下配置："]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"const rspackConfig = {\n  resolve: {\n    extensionAlias: {\n      '.js': ['.ts', '.tsx', '.js'],\n      '.jsx': ['.tsx', '.jsx'],\n    },\n  },\n};\n"})}),"\n",(0,r.jsx)(s.p,{children:"这意味着："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["允许使用 ",(0,r.jsx)(s.code,{children:".js"})," 文件扩展名导入 ",(0,r.jsx)(s.code,{children:".ts"})," 或 ",(0,r.jsx)(s.code,{children:".tsx"})," 文件。"]}),"\n",(0,r.jsxs)(s.li,{children:["允许使用 ",(0,r.jsx)(s.code,{children:".jsx"})," 文件扩展名导入 ",(0,r.jsx)(s.code,{children:".tsx"})," 文件。"]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,c.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let d=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fguide%2Fbasic%2Ftypescript.mdx"]={toc:[{text:"TypeScript 转译",id:"typescript-转译",depth:2},{text:"isolatedModules",id:"isolatedmodules",depth:3},{text:"预设类型",id:"预设类型",depth:2},{text:"类型检查",id:"类型检查",depth:2},{text:"tsconfig.json 路径",id:"tsconfigjson-路径",depth:2},{text:"路径后缀",id:"路径后缀",depth:2}],title:"使用 TypeScript",frontmatter:{}}}}]);
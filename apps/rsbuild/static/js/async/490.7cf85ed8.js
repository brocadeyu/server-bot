"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["490"],{35879:function(e,n,r){r.r(n),r.d(n,{default:function(){return t}});var s=r(55367),i=r(26971),l=r(38146);function c(e){let n=Object.assign({h1:"h1",a:"a",p:"p",div:"div",code:"code",h2:"h2",ul:"ul",li:"li",blockquote:"blockquote",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h3:"h3"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"create-react-app",children:["Create React App",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-react-app",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["本章节介绍如何将 ",(0,s.jsx)(n.a,{href:"https://github.com/facebook/create-react-app",target:"_blank",rel:"noopener noreferrer",children:"Create React App"}),"（简称 CRA）或 ",(0,s.jsx)(n.a,{href:"https://craco.js.org/",target:"_blank",rel:"noopener noreferrer",children:"CRACO"})," 项目迁移到 Rsbuild。"]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"CRA eject"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(n.p,{children:["如果你的项目已经执行了 CRA 的 ",(0,s.jsx)(n.code,{children:"eject"})," 命令，那么本文档的大部分内容将不再适用。"]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 项目在 eject 后，更近似于直接使用 webpack 的项目，因此你可以参考 ",(0,s.jsx)(n.a,{href:"/guide/migration/webpack",children:"webpack 迁移指南"}),"。"]}),"\n"]})]}),"\n",(0,s.jsxs)(n.h2,{id:"安装依赖",children:["安装依赖",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装依赖",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"首先你需要把 CRA 的 npm 依赖替换为 Rsbuild 的依赖。"}),"\n","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"移除 CRA 的依赖："}),"\n"]}),"\n",(0,s.jsx)(l.PackageManagerTabs,{command:"remove react-scripts"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["对于使用 CRACO 的项目，你还可以移除 ",(0,s.jsx)(n.code,{children:"@craco/craco"})," 依赖。"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"安装 Rsbuild 的依赖："}),"\n"]}),"\n",(0,s.jsx)(l.PackageManagerTabs,{command:"add @rsbuild/core @rsbuild/plugin-react -D"}),"\n",(0,s.jsxs)(n.h2,{id:"更新-npm-scripts",children:["更新 npm scripts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#更新-npm-scripts",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"下一步，你需要把 package.json 中的 npm scripts 更新为 Rsbuild 的 CLI 命令。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="package.json"',children:'{\n  "scripts": {\n-   "start": "react-scripts start",\n-   "build": "react-scripts build",\n-   "eject": "react-scripts eject"\n+   "start": "rsbuild dev",\n+   "build": "rsbuild build",\n+   "preview": "rsbuild preview"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsxs)(n.p,{children:["Rsbuild 未集成测试框架，因此没有提供用于替换 ",(0,s.jsx)(n.code,{children:"react-scripts test"})," 的命令，你可以直接使用 Jest 或 Vitest 等测试框架。你可以参考 ",(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rspack-examples/tree/main/rsbuild/react-jest",target:"_blank",rel:"noopener noreferrer",children:"Rsbuild react-jest"})," 示例项目进行配置。\n"]})})]}),"\n",(0,s.jsxs)(n.h2,{id:"创建配置文件",children:["创建配置文件",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建配置文件",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在 package.json 的同级目录下创建 Rsbuild 的配置文件 ",(0,s.jsx)(n.code,{children:"rsbuild.config.ts"}),"，并添加以下内容："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"html-模板",children:["HTML 模板",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html-模板",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 默认使用 ",(0,s.jsx)(n.code,{children:"public/index.html"})," 文件作为 HTML 模板。在 Rsbuild 中，你可以通过 ",(0,s.jsx)(n.a,{href:"/config/html/template",children:"html.template"})," 来指定 HTML 模板："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["在 HTML 模板中，如果使用了 CRA 的 ",(0,s.jsx)(n.code,{children:"%PUBLIC_URL%"})," 变量，请替换为 Rsbuild 的 ",(0,s.jsx)(n.a,{href:"/config/html/template-parameters",children:"assetPrefix 变量"}),"，并使用斜杠进行连接："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:'-  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n+  <link rel="icon" href="<%= assetPrefix %>/favicon.ico" />\n'})}),"\n",(0,s.jsxs)(n.p,{children:["这样就完成了从 CRA 到 Rsbuild 的基本迁移，此时你可以执行 ",(0,s.jsx)(n.code,{children:"npm run start"})," 命令来尝试启动开发服务器。"]}),"\n",(0,s.jsxs)(n.h2,{id:"构建产物目录",children:["构建产物目录",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建产物目录",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 默认会将构建产物输出到 ",(0,s.jsx)(n.code,{children:"build"})," 目录，而 Rsbuild 的默认构建产物目录为 ",(0,s.jsx)(n.code,{children:"dist"}),"。"]}),"\n",(0,s.jsxs)(n.p,{children:["你可以配置 Rsbuild 的 ",(0,s.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath.root"})," 选项，将目录修改为 ",(0,s.jsx)(n.code,{children:"build"}),"，与 CRA 保持一致："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  output: {\n    distPath: {\n      root: 'build',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["更多细节请参考",(0,s.jsx)(n.a,{href:"/guide/basic/output-files",children:"构建产物目录"}),"章节。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"使用-css-预处理器",children:["使用 CSS 预处理器",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-css-预处理器",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild 通过插件来支持 Sass 和 Less 等 CSS 预处理器，使用方式请参考："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"Sass 插件"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-less",children:"Less 插件"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-stylus",children:"Stylus 插件"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"使用-svgr",children:["使用 SVGR",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-svgr",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:['如果你使用了 CRA 的 "SVG 转 React 组件" 功能（即 ',(0,s.jsx)(n.a,{href:"https://react-svgr.com/",target:"_blank",rel:"noopener noreferrer",children:"SVGR"}),"），那么还需要安装 Rsbuild 的 SVGR 插件。"]}),"\n",(0,s.jsx)(n.p,{children:"比如使用了以下用法："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { ReactComponent as Logo } from './logo.svg';\n\nconst App = () => (\n  <div>\n    <Logo />\n  </div>\n);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["只需要安装和注册 ",(0,s.jsx)(n.code,{children:"@rsbuild/plugin-svgr"})," 即可："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr({ mixedImport: true })],\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["请参考 ",(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svgr",children:"SVGR 插件"})," 文档了解如何在 Rsbuild 中使用 SVGR。"]}),"\n",(0,s.jsxs)(n.h2,{id:"配置迁移",children:["配置迁移",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置迁移",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["以下是 ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/docs/advanced-configuration/",target:"_blank",rel:"noopener noreferrer",children:"CRA 配置"}),"对应的 Rsbuild 配置："]}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"CRA"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"HOST"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/host",children:"server.host"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"PORT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/port",children:"server.port"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"HTTPS"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/https",children:"server.https"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_HOST"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.host"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_PATH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.path"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_PORT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.port"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"PUBLIC_URL"}),"\n",(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"/config/dev/asset-prefix",children:"dev.assetPrefix"})," / ",(0,s.jsx)(n.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"BUILD_PATH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"GENERATE_SOURCEMAP"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"IMAGE_INLINE_SIZE_LIMIT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/data-uri-limit",children:"output.dataUriLimit"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"FAST_REFRESH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/hmr",children:"dev.hmr"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"TSC_COMPILE_ON_ERROR"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"说明："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"上述表格尚未覆盖到 CRA 的所有配置，欢迎补充。"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"编译-node_modules",children:["编译 node_modules",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#编译-node_modules",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"CRA 默认会使用 Babel 编译 node_modules 中的依赖，但 Rsbuild 则不会，这是为了避免二次编译带来的性能损耗和潜在的编译错误。"}),"\n",(0,s.jsxs)(n.p,{children:["如果你需要处理 node_modules 中依赖引起的语法兼容性问题，可以使用 ",(0,s.jsx)(n.a,{href:"/config/source/include#%E7%BC%96%E8%AF%91-node_modules",children:"source.include"})," 配置项来编译 node_modules。"]}),"\n",(0,s.jsxs)(n.h2,{id:"环境变量",children:["环境变量",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#环境变量",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 默认会将 ",(0,s.jsx)(n.code,{children:"REACT_APP_"})," 开头的环境变量注入到 client 代码中，而 Rsbuild 默认会注入 ",(0,s.jsx)(n.code,{children:"PUBLIC_"})," 开头的环境变量（参考 ",(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars#public-%E5%8F%98%E9%87%8F",children:"public 变量"}),"）。"]}),"\n",(0,s.jsxs)(n.p,{children:["为了兼容 CRA 的行为，你可以手动调用 Rsbuild 提供的 ",(0,s.jsx)(n.a,{href:"/api/javascript-api/core#loadenv",children:"loadEnv"})," 方法来读取 ",(0,s.jsx)(n.code,{children:"REACT_APP_"})," 开头的环境变量，并通过 ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," 配置项注入到 client 代码中。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["值得注意的是，CRA 允许在代码中访问完整的 ",(0,s.jsx)(n.code,{children:"process.env"})," 对象，也允许对 ",(0,s.jsx)(n.code,{children:"process.env"})," 进行解构。而 Rsbuild 出于包体积和安全的考虑，并没有注入完整的 ",(0,s.jsx)(n.code,{children:"process.env"})," 对象。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/index.js"',children:"// CRA 中可以这样访问\nconst { PUBLIC_URL } = process.env;\nconsole.log(PUBLIC_URL);\nconsole.log(process.env);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["在 Rsbuild 中，你可以通过 ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," 配置项设置 ",(0,s.jsx)(n.code,{children:"process.env"}),"，读取 ",(0,s.jsx)(n.code,{children:"loadEnv"})," 方法返回的 ",(0,s.jsx)(n.code,{children:"rawPublicVars"}),"，来允许以上用法："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars, rawPublicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: {\n      ...publicVars,\n      'process.env': JSON.stringify(rawPublicVars),\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"引用未知资源",children:["引用未知资源",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#引用未知资源",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在 CRA 中，如果你引用了一个构建工具无法识别的资源，CRA 默认会将该文件输出到 ",(0,s.jsx)(n.code,{children:"build/static/media"})," 目录下，比如 ",(0,s.jsx)(n.code,{children:"document.pdf"})," 文件："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title="index.js"',children:"import document from './document.pdf';\n"})}),"\n",(0,s.jsx)(n.p,{children:"在 Rsbuild 中，遇到无法识别的资源时，Rsbuild 会输出报错日志，类似于："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"You may need an appropriate loader to handle this file type.\n"})}),"\n",(0,s.jsx)(n.p,{children:"为了解决该错误，你可以采用以下方法："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["使用 ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})," 配置一个合适的 loader 来处理该类型的资源。"]}),"\n",(0,s.jsxs)(n.li,{children:["使用 ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})," 配置 ",(0,s.jsx)(n.a,{href:"https://rspack.dev/guide/features/asset-module",target:"_blank",rel:"noopener noreferrer",children:"asset modules"})," 规则来处理该类型的资源。"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"比如，你可以添加以下 asset modules 配置，来保持与 CRA 相同的输出结果："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack: {\n      module: {\n        rules: [\n          {\n            // 匹配 .png 文件\n            // 你可以调整该正则表达式，以匹配不同类型的文件\n            test: /\\.png$/,\n            type: 'asset/resource',\n            generator: {\n              filename: 'static/media/[name].[hash][ext]',\n            },\n          },\n        ],\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"移除-react-app-polyfill",children:["移除 react-app-polyfill",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#移除-react-app-polyfill",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 提供了 ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/react-app-polyfill",target:"_blank",rel:"noopener noreferrer",children:"react-app-polyfill"})," 来手动注入 polyfill 代码。"]}),"\n",(0,s.jsx)(n.p,{children:"在 Rsbuild 项目中，你可以移除 react-app-polyfill 相关的依赖和代码，因为 Rsbuild 会自动读取 browserslist 配置，并按需注入 polyfill 代码。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="src/index.js"',children:"- import 'react-app-polyfill/ie11';\n- import 'react-app-polyfill/stable';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["你可以参考 ",(0,s.jsx)(n.a,{href:"/guide/advanced/browser-compatibility",children:"浏览器兼容性"})," 来了解 Rsbuild 是如何处理 polyfill 的。"]}),"\n",(0,s.jsxs)(n.h2,{id:"添加-eslint-插件",children:["添加 ESLint 插件",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#添加-eslint-插件",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA 默认启用了 ",(0,s.jsx)(n.a,{href:"https://github.com/webpack-contrib/eslint-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"eslint-webpack-plugin"}),"，并内置了一套 ESLint 规则集。"]}),"\n",(0,s.jsxs)(n.p,{children:["在 Rsbuild 项目中，如果你需要保持类似的行为，可以添加 ",(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-eslint",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-eslint"}),"，并使用 ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-config-react-app",target:"_blank",rel:"noopener noreferrer",children:"eslint-config-react-app"})," 作为 ESLint 规则集。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title=".eslintrc.cjs"',children:"module.exports = {\n  extends: 'react-app',\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"读取-jsconfigjson",children:["读取 jsconfig.json",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#读取-jsconfigjson",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在非 TypeScript 项目中，CRA 支持读取 jsconfig.json 中的 ",(0,s.jsx)(n.code,{children:"paths"})," 字段作为路径别名。"]}),"\n",(0,s.jsxs)(n.p,{children:["如果你需要在 Rsbuild 中使用该特性，可以参考 ",(0,s.jsx)(n.a,{href:"/guide/advanced/alias#jsconfigjson",children:"路径别名 - jsconfig.json"}),"。"]}),"\n",(0,s.jsxs)(n.h2,{id:"craco-迁移",children:["CRACO 迁移",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#craco-迁移",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["如果你的项目使用了 ",(0,s.jsx)(n.a,{href:"https://craco.js.org",target:"_blank",rel:"noopener noreferrer",children:"CRACO"})," 来覆盖 CRA 的配置，可以参考下表来迁移："]}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"CRACO"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackconfigure",target:"_blank",rel:"noopener noreferrer",children:"webpack.configure"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackalias",target:"_blank",rel:"noopener noreferrer",children:"webpack.alias"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/resolve/alias",children:"resolve.alias"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackplugins",target:"_blank",rel:"noopener noreferrer",children:"webpack.plugins.add"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack#appendplugins",children:"appendPlugins of tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackpluginsremove",target:"_blank",rel:"noopener noreferrer",children:"webpack.plugins.remove"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack#removeplugin",children:"removePlugin of tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylemodules",target:"_blank",rel:"noopener noreferrer",children:"style.modules"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/css-modules",children:"output.cssModules"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylecss",target:"_blank",rel:"noopener noreferrer",children:"style.css"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/css-loader",children:"tools.cssLoader"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylesass",target:"_blank",rel:"noopener noreferrer",children:"style.sass"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"Sass 插件"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylepostcss",target:"_blank",rel:"noopener noreferrer",children:"style.postcss"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/postcss",children:"tools.postcss"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/babel/",target:"_blank",rel:"noopener noreferrer",children:"babel"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-babel",children:"Babel 插件"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/typescript/",target:"_blank",rel:"noopener noreferrer",children:"typescript"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/devserver/",target:"_blank",rel:"noopener noreferrer",children:"devServer"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/index",children:"server configs"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"示例",children:["示例",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["下面是一个从 ",(0,s.jsx)(n.code,{children:"webpack.configure"})," 迁移到 ",(0,s.jsx)(n.code,{children:"tools.rspack"})," 的例子："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"迁移前："}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title="craco.config.js"',children:"const { whenDev } = require('@craco/craco');\n\nmodule.exports = {\n  webpack: {\n    configure: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n    },\n    plugins: [...whenDev(() => [new MyWebpackPlugin()], [])],\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"迁移后："}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n      plugins:\n        process.env.NODE_ENV === 'development' ? [new MyWebpackPlugin()] : [],\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"内容补充",children:["内容补充",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#内容补充",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"当前文档只涵盖了迁移过程的部分事项，如果你发现有合适的内容可以补充，欢迎通过 pull request 来完善文档 \uD83E\uDD1D。"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Rsbuild 的文档位于 ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/website",target:"_blank",rel:"noopener noreferrer",children:"rsbuild/website"})," 目录。"]}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}let t=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fguide%2Fmigration%2Fcra.mdx"]={toc:[{text:"安装依赖",id:"安装依赖",depth:2},{text:"更新 npm scripts",id:"更新-npm-scripts",depth:2},{text:"创建配置文件",id:"创建配置文件",depth:2},{text:"HTML 模板",id:"html-模板",depth:2},{text:"构建产物目录",id:"构建产物目录",depth:2},{text:"使用 CSS 预处理器",id:"使用-css-预处理器",depth:2},{text:"使用 SVGR",id:"使用-svgr",depth:2},{text:"配置迁移",id:"配置迁移",depth:2},{text:"编译 node_modules",id:"编译-node_modules",depth:2},{text:"环境变量",id:"环境变量",depth:2},{text:"引用未知资源",id:"引用未知资源",depth:2},{text:"移除 react-app-polyfill",id:"移除-react-app-polyfill",depth:2},{text:"添加 ESLint 插件",id:"添加-eslint-插件",depth:2},{text:"读取 jsconfig.json",id:"读取-jsconfigjson",depth:2},{text:"CRACO 迁移",id:"craco-迁移",depth:2},{text:"示例",id:"示例",depth:3},{text:"内容补充",id:"内容补充",depth:2}],title:"Create React App",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4740"],{9468:function(e,n,r){r.r(n),r.d(n,{default:function(){return t}});var s=r(55367),d=r(26971);function i(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h2:"h2",h3:"h3"},(0,d.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"outputtarget",children:["output.target",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputtarget",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type RsbuildTarget = 'web' | 'node' | 'web-worker';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"默认值："})," ",(0,s.jsx)(n.code,{children:"'web'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"版本："})," ",(0,s.jsx)(n.code,{children:">= 1.0.0"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"用于设置 Rsbuild 的构建产物类型。"}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild 支持多种构建产物类型，分别适用于不同的目标运行环境。在设置产物类型后，Rsbuild 的默认配置会有所变化。"}),"\n",(0,s.jsxs)(n.h2,{id:"默认产物",children:["默认产物",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认产物",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["默认情况下，",(0,s.jsx)(n.code,{children:"target"})," 会被设置为 ",(0,s.jsx)(n.code,{children:"'web'"}),"，并构建出运行在浏览器里的产物。"]}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild 会读取项目中的 ",(0,s.jsx)(n.a,{href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noopener noreferrer",children:"Browserslist 配置"}),"，以确定需要兼容的浏览器范围。"]}),"\n",(0,s.jsxs)(n.h2,{id:"可选类型",children:["可选类型",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#可选类型",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["除了 ",(0,s.jsx)(n.code,{children:"'web'"})," 外，",(0,s.jsx)(n.code,{children:"target"})," 还可以设置为以下值："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"'node'"}),"：构建出运行在 Node.js 环境的产物，通常用于 SSR 等场景。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"'web-worker'"}),"：构建出运行在 web worker 里的产物。"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"比如构建出适用于 Node.js 环境的产物："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    target: 'node',\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"并行构建",children:["并行构建",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#并行构建",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["你可以使用 ",(0,s.jsx)(n.a,{href:"/config/environments",children:"environments"})," 来并行构建多种 targets。"]}),"\n",(0,s.jsxs)(n.p,{children:["比如同时构建 ",(0,s.jsx)(n.code,{children:"web"})," 产物和 ",(0,s.jsx)(n.code,{children:"node"})," 产物："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"node-产物",children:["Node 产物",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#node-产物",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"指运行在 Node.js 环境的产物，通常用于 SSR 等场景。"}),"\n",(0,s.jsxs)(n.p,{children:["当 ",(0,s.jsx)(n.code,{children:"target"})," 设置为 ",(0,s.jsx)(n.code,{children:"'node'"})," 时，Rsbuild 会进行以下处理："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["将 Rspack 的 ",(0,s.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"target"})," 设置为 ",(0,s.jsx)(n.code,{children:"'node'"}),"。"]}),"\n",(0,s.jsx)(n.li,{children:"不会生成 HTML 文件，与 HTML 相关的逻辑也不会执行，因为 Node.js 环境不需要 HTML。"}),"\n",(0,s.jsx)(n.li,{children:"不会开启默认的拆包策略，但 dynamic import 依然可以生效。"}),"\n",(0,s.jsx)(n.li,{children:"不会开启热更新相关的能力。"}),"\n",(0,s.jsxs)(n.li,{children:["将 Browserslist 的默认值设置为 ",(0,s.jsx)(n.code,{children:"['node >= 16']"}),"。"]}),"\n",(0,s.jsxs)(n.li,{children:["将 ",(0,s.jsx)(n.a,{href:"/config/output/emit-css",children:"output.emitCss"})," 的默认值设置为 ",(0,s.jsx)(n.code,{children:"false"}),"。这意味着 CSS 代码不会被抽取为单独的文件，但产物中会包含 CSS Modules 的 id 信息。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"node-addons",children:["Node Addons",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#node-addons",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["当 ",(0,s.jsx)(n.code,{children:"target"})," 为 ",(0,s.jsx)(n.code,{children:"'node'"})," 时，Rsbuild 允许你在 JavaScript 文件中引入 Node.js ",(0,s.jsx)(n.a,{href:"https://nodejs.org/api/addons.html",target:"_blank",rel:"noopener noreferrer",children:"Addons"}),"。"]}),"\n",(0,s.jsx)(n.p,{children:"例如："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title="src/index.js"',children:"import addon from './addon.node';\n\naddon.doSomething();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["被引用的 addons 文件会被输出到 ",(0,s.jsx)(n.code,{children:"dist"})," 目录下："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"dist/index.js\ndist/addon.node\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"web-worker-产物",children:["Web Worker 产物",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#web-worker-产物",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["指运行在 ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",target:"_blank",rel:"noopener noreferrer",children:"Web Worker"})," 环境的产物。"]}),"\n",(0,s.jsxs)(n.p,{children:["当 ",(0,s.jsx)(n.code,{children:"target"})," 设置为 ",(0,s.jsx)(n.code,{children:"'web-worker'"})," 时，Rsbuild 会进行以下处理："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["将 Rspack 的 ",(0,s.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"target"})," 设置为 ",(0,s.jsx)(n.code,{children:"'webworker'"}),"。"]}),"\n",(0,s.jsx)(n.li,{children:"不会生成 HTML 文件，与 HTML 相关的逻辑也不会执行，因为 Web Worker 环境不需要 HTML。"}),"\n",(0,s.jsxs)(n.li,{children:["不会开启默认的拆包策略，",(0,s.jsx)(n.strong,{children:"并且 dynamic import 也不会生效"}),"，因为 Web Worker 仅运行支持单个 JavaScript 文件。"]}),"\n",(0,s.jsxs)(n.li,{children:["将 ",(0,s.jsx)(n.a,{href:"/config/output/emit-css",children:"output.emitCss"})," 的默认值设置为 ",(0,s.jsx)(n.code,{children:"false"}),"。这意味着 CSS 代码不会被抽取为单独的文件，但产物中会包含 CSS Modules 的 id 信息。"]}),"\n",(0,s.jsx)(n.li,{children:"不会开启热更新相关的能力。"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["更多信息可参考 ",(0,s.jsx)(n.a,{href:"/guide/basic/web-workers",children:"使用 Web Workers"}),"。"]}),"\n",(0,s.jsxs)(n.h2,{id:"其他-target",children:["其他 target",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#其他-target",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Rspack 支持的 ",(0,s.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"target"})," 类型更为丰富，比如 ",(0,s.jsx)(n.code,{children:"electron-main"})," 和 ",(0,s.jsx)(n.code,{children:"electron-renderer"})," 等。"]}),"\n",(0,s.jsxs)(n.p,{children:["目前 Rsbuild 暂未支持这些 target，你可以通过 ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})," 来配置这些 target。"]}),"\n",(0,s.jsxs)(n.p,{children:["例如设置 ",(0,s.jsx)(n.code,{children:"target"})," 为 ",(0,s.jsx)(n.code,{children:"'electron-main'"}),"，这会覆盖 Rsbuild 默认设置的 ",(0,s.jsx)(n.code,{children:"'web'"}),"。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    rspack: {\n      target: 'electron-main',\n    },\n  },\n};\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}let t=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fconfig%2Foutput%2Ftarget.mdx"]={toc:[{text:"默认产物",id:"默认产物",depth:2},{text:"可选类型",id:"可选类型",depth:2},{text:"并行构建",id:"并行构建",depth:2},{text:"Node 产物",id:"node-产物",depth:2},{text:"Node Addons",id:"node-addons",depth:3},{text:"Web Worker 产物",id:"web-worker-产物",depth:2},{text:"其他 target",id:"其他-target",depth:2}],title:"output.target",frontmatter:{}}}}]);
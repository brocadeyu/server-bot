"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["3"],{57629:function(e,n,s){s.r(n),s.d(n,{default:function(){return a}});var d=s(55367),i=s(26971);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",code:"code",pre:"pre",ul:"ul",li:"li"},(0,i.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.h1,{id:"构建产物目录",children:["构建产物目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建产物目录",children:"#"})]}),"\n",(0,d.jsx)(n.p,{children:"本章节主要介绍构建产物的目录结构，以及如何控制不同类型产物的输出目录。"}),"\n",(0,d.jsxs)(n.p,{children:["如果你想要了解如何将 Rsbuild 的构建产物部署为静态站点，请参考 ",(0,d.jsx)(n.a,{href:"/guide/basic/static-deploy",children:"部署静态站点"}),"。"]}),"\n",(0,d.jsxs)(n.h2,{id:"默认产物目录",children:["默认产物目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认产物目录",children:"#"})]}),"\n",(0,d.jsxs)(n.p,{children:["下面是最基础的产物目录结构，默认情况下，构建产物会生成在当前项目的 ",(0,d.jsx)(n.code,{children:"dist"})," 目录下。"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"dist\n├── static\n│   ├── css\n│   │   ├── [name].[hash].css\n│   │   └── [name].[hash].css.map\n│   │\n│   └── js\n│       ├── [name].[hash].js\n│       ├── [name].[hash].js.LICENSE.txt\n│       └── [name].[hash].js.map\n│\n└── [name].html\n"})}),"\n",(0,d.jsx)(n.p,{children:"最常见的产物是 HTML 文件、JS 文件和 CSS 文件："}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["HTML 文件：默认输出到 ",(0,d.jsx)(n.code,{children:"dist"})," 目录的根部。"]}),"\n",(0,d.jsxs)(n.li,{children:["JS 文件：默认输出到 ",(0,d.jsx)(n.code,{children:"static/js"})," 目录，"]}),"\n",(0,d.jsxs)(n.li,{children:["CSS 文件：默认输出到 ",(0,d.jsx)(n.code,{children:"static/css"})," 目录。"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"此外，JS 文件和 CSS 文件有时候会生成一些相关产物："}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["License 文件：包含开源许可证信息，默认输出到 JS 文件的同级目录，并添加 ",(0,d.jsx)(n.code,{children:".LICENSE.txt"})," 后缀。"]}),"\n",(0,d.jsxs)(n.li,{children:["Source Map 文件：包含保存源代码映射关系，默认输出到 JS 文件和 CSS 文件的同级目录，并添加 ",(0,d.jsx)(n.code,{children:".map"})," 后缀。"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["在产物的文件名称中，",(0,d.jsx)(n.code,{children:"[name]"})," 表示这个文件对应的入口名称，比如 ",(0,d.jsx)(n.code,{children:"index"}),", ",(0,d.jsx)(n.code,{children:"main"}),"。",(0,d.jsx)(n.code,{children:"[hash]"})," 则是基于该文件的内容生成的哈希值。"]}),"\n",(0,d.jsxs)(n.h2,{id:"开发模式产物",children:["开发模式产物",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#开发模式产物",children:"#"})]}),"\n",(0,d.jsxs)(n.p,{children:["在开发模式下，Rsbuild 默认会将构建产物保存在 dev server 的内存中，而不是写入磁盘，这样可以减少 fs 操作产生的开销。你可以参考 ",(0,d.jsx)(n.a,{href:"/guide/basic/server#%E6%9F%A5%E7%9C%8B%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90",children:"查看静态资源"})," 查看当前构建生成的所有静态资源。"]}),"\n",(0,d.jsx)(n.p,{children:"你也可以选择将构建产物写入磁盘，这通常用于排查构建产物的内容，或是配置静态资源的代理规则。"}),"\n",(0,d.jsxs)(n.p,{children:["将 ",(0,d.jsx)(n.a,{href:"/config/dev/write-to-disk",children:"dev.writeToDisk"})," 配置项设置为 ",(0,d.jsx)(n.code,{children:"true"})," 即可："]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"export default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"修改产物目录",children:["修改产物目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#修改产物目录",children:"#"})]}),"\n",(0,d.jsx)(n.p,{children:"Rsbuild 提供了多个配置项来修改产物目录和产物名称，你可以："}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["通过 ",(0,d.jsx)(n.a,{href:"/config/output/filename",children:"output.filename"})," 来修改产物的文件名。"]}),"\n",(0,d.jsxs)(n.li,{children:["通过 ",(0,d.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath"})," 来修改产物的输出路径。"]}),"\n",(0,d.jsxs)(n.li,{children:["通过 ",(0,d.jsx)(n.a,{href:"/config/output/legal-comments",children:"output.legalComments"})," 来修改 License 文件的生成方式。"]}),"\n",(0,d.jsxs)(n.li,{children:["通过 ",(0,d.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})," 来修改 Source Map 文件。"]}),"\n",(0,d.jsxs)(n.li,{children:["通过 ",(0,d.jsx)(n.a,{href:"/config/html/output-structure",children:"html.outputStructure"})," 来修改 HTML 产物对应的文件夹结构。"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"静态资源",children:["静态资源",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#静态资源",children:"#"})]}),"\n",(0,d.jsxs)(n.p,{children:["当你在代码中引用图片、SVG、字体、媒体等类型的静态资源时，它们也会被输出到 ",(0,d.jsx)(n.code,{children:"dist/static"})," 目录下，并根据静态资源类型来自动分配到对应的子目录："]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"dist\n└── static\n    ├── image\n    │   └── foo.[hash].png\n    │\n    ├── svg\n    │   └── bar.[hash].svg\n    │\n    ├── font\n    │   └── baz.[hash].woff2\n    │\n    └── media\n        └── qux.[hash].mp4\n"})}),"\n",(0,d.jsxs)(n.p,{children:["你可以通过 ",(0,d.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath"})," 配置项将这些静态资源统一输入到单个目录下，比如输出到 ",(0,d.jsx)(n.code,{children:"assets"})," 目录："]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    distPath: {\n      image: 'assets',\n      svg: 'assets',\n      font: 'assets',\n      media: 'assets',\n    },\n  },\n};\n"})}),"\n",(0,d.jsx)(n.p,{children:"上方的配置会生成以下目录结构："}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"dist\n└── assets\n    ├── foo.[hash].png\n    ├── bar.[hash].svg\n    ├── baz.[hash].woff2\n    └── qux.[hash].mp4\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"nodejs-产物目录",children:["Node.js 产物目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nodejs-产物目录",children:"#"})]}),"\n",(0,d.jsxs)(n.p,{children:["当 Rsbuild 的 ",(0,d.jsx)(n.a,{href:"/config/output/target",children:"output.target"})," 是 ",(0,d.jsx)(n.code,{children:"'node'"})," 时，Rsbuild 会在构建后生成 Node.js 产物："]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"dist\n├── static\n└── [name].js\n"})}),"\n",(0,d.jsx)(n.p,{children:"Node.js 产物通常只包含 JS 文件，不包含 HTML、CSS 等文件。此外，Node 产物的 JS 文件名称也不会自动生成哈希值。"}),"\n",(0,d.jsxs)(n.p,{children:["你可以通过 ",(0,d.jsx)(n.a,{href:"/config/environments",children:"environments"})," 配置项来修改 Node 产物的输出路径。"]}),"\n",(0,d.jsxs)(n.p,{children:["比如，将 Node.js 产物输出到 ",(0,d.jsx)(n.code,{children:"dist/server"})," 目录："]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"export default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        distPath: {\n          root: 'dist/server',\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"扁平化产物目录",children:["扁平化产物目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#扁平化产物目录",children:"#"})]}),"\n",(0,d.jsx)(n.p,{children:"有时候你不想产物目录有太多层级，可以将目录设置为空字符串，使生成的产物目录扁平化。"}),"\n",(0,d.jsx)(n.p,{children:"参考下方的例子："}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    distPath: {\n      js: '',\n      css: '',\n    },\n  },\n};\n"})}),"\n",(0,d.jsx)(n.p,{children:"上方的配置会生成以下目录结构："}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"dist\n├── [name].[hash].css\n├── [name].[hash].css.map\n├── [name].[hash].js\n├── [name].[hash].js.map\n└── [name].html\n"})})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}let a=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["zh%2Fguide%2Fbasic%2Foutput-files.mdx"]={toc:[{text:"默认产物目录",id:"默认产物目录",depth:2},{text:"开发模式产物",id:"开发模式产物",depth:2},{text:"修改产物目录",id:"修改产物目录",depth:2},{text:"静态资源",id:"静态资源",depth:2},{text:"Node.js 产物目录",id:"nodejs-产物目录",depth:2},{text:"扁平化产物目录",id:"扁平化产物目录",depth:2}],title:"构建产物目录",frontmatter:{}}}}]);
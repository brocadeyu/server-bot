"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["3851"],{62910:function(e,n,i){i.r(n),i.d(n,{default:function(){return o}});var r=i(55367),s=i(26971),d=i(38146);function l(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",blockquote:"blockquote"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"modernjs-builder",children:["Modern.js Builder",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modernjs-builder",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"This chapter introduces how to migrate a Modern.js Builder (or EdenX Builder) project to Rsbuild."}),"\n",(0,r.jsxs)(n.h2,{id:"key-differences",children:["Key Differences",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#key-differences",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Rsbuild is the new version of Modern.js Builder, with the following key differences:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Rsbuild has better performance. When using Rspack simultaneously, ",(0,r.jsx)(n.strong,{children:"the startup speed and build speed of Rsbuild are 1.5 to 2 times faster than Builder"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Rsbuild only supports Rspack as the bundler and no longer supports Webpack."}),"\n",(0,r.jsx)(n.li,{children:"Rsbuild's CLI tool and dev server are more powerful and support more features."}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"installing-dependencies",children:["Installing Dependencies",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installing-dependencies",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"First, you need to replace the npm dependencies related to Builder with Rsbuild's dependencies."}),"\n","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remove Builder's dependencies:"}),"\n"]}),"\n",(0,r.jsx)(d.PackageManagerTabs,{command:"remove @modern-js/builder-cli @modern-js/builder-webpack-provider @modern-js/builder-rspack-provider"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Install Rsbuild's dependencies:"}),"\n"]}),"\n",(0,r.jsx)(d.PackageManagerTabs,{command:"add @rsbuild/core -D"}),"\n",(0,r.jsxs)(n.h2,{id:"updating-npm-scripts",children:["Updating npm Scripts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#updating-npm-scripts",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Next, you need to update the npm scripts in the package.json to Rsbuild's CLI commands."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",meta:'title="package.json"',children:'{\n  "scripts": {\n-   "dev": "builder dev",\n-   "build": "builder build",\n-   "serve": "builder serve"\n+   "dev": "rsbuild dev",\n+   "build": "rsbuild build",\n+   "preview": "rsbuild preview"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"modifying-configuration-files",children:["Modifying Configuration Files",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modifying-configuration-files",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Rename ",(0,r.jsx)(n.code,{children:"builder.config.ts"})," to ",(0,r.jsx)(n.code,{children:"rsbuild.config.ts"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the import of the ",(0,r.jsx)(n.code,{children:"defineConfig"})," method from ",(0,r.jsx)(n.code,{children:"@modern-js/builder-cli"})," to ",(0,r.jsx)(n.code,{children:"@rsbuild/core"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the ",(0,r.jsx)(n.code,{children:"builderPlugins"})," field to ",(0,r.jsx)(n.code,{children:"plugins"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",meta:'title="rsbuild.config.ts"',children:"- import { defineConfig } from '@modern-js/builder-cli';\n+ import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n-  builderPlugins: [],\n+  plugins: [],\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"replacing-plugins",children:["Replacing Plugins",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#replacing-plugins",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Rsbuild and Builder have incompatible plugin systems, so you need to replace Builder's plugins with Rsbuild's plugins."}),"\n",(0,r.jsx)(n.p,{children:"The following table shows the correspondence between Builder plugins and Rsbuild plugins:"}),"\n",(0,r.jsxs)(n.table,{children:["\n",(0,r.jsxs)(n.thead,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.th,{children:"Builder"}),"\n",(0,r.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.tbody,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-vue"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/plugins/list/plugin-vue",children:"@rsbuild/plugin-vue"})}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-vue2"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue2",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-vue2"})}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-stylus"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/plugins/list/plugin-stylus",children:"@rsbuild/plugin-stylus"})}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-node-polyfill"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-node-polyfill",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-node-polyfill"})}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-image-compress"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-image-compress",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-image-compress"})}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-swc"}),"\n",(0,r.jsx)(n.td,{children:"Enabled by default, no need to use"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"@modern-js/builder-plugin-esbuild"}),"\n",(0,r.jsx)(n.td,{children:"No longer supported"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For example, if you were using ",(0,r.jsx)(n.code,{children:"@modern-js/builder-plugin-vue"}),", you need to first install ",(0,r.jsx)(n.code,{children:"@rsbuild/plugin-vue"}),", then import the plugin in ",(0,r.jsx)(n.code,{children:"rsbuild.config.ts"})," and add it to the ",(0,r.jsx)(n.code,{children:"plugins"})," field."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",meta:'title="rsbuild.config.ts"',children:"- import { builderPluginVue } from '@modern-js/builder-plugin-vue';\n+ import { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n-  builderPlugins: [builderPluginVue()],\n+  plugins: [pluginVue()],\n});\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"add-react-related-plugins",children:["Add React-related Plugins",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#add-react-related-plugins",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Rsbuild is not coupled with any front-end UI framework. Therefore, if you are a React project, you need to manually add ",(0,r.jsx)(n.a,{href:"/plugins/list/plugin-react",children:"React Plugin"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  plugins: [pluginReact()],\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you are using SVGR in your current project, you also need to register ",(0,r.jsx)(n.a,{href:"/plugins/list/plugin-svgr",children:"SVGR Plugin"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr()],\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you are a user of other frameworks, you can refer to ",(0,r.jsx)(n.a,{href:"/plugins/list/index",children:"Rsbuild Plugin List"})," to select the corresponding framework plugin."]}),"\n",(0,r.jsxs)(n.h2,{id:"configuration-migration",children:["Configuration Migration",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-migration",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Most configs in Rsbuild and Builder are consistent, with only a few adjustments."}),"\n",(0,r.jsxs)(n.p,{children:["You can refer to the ",(0,r.jsx)(n.a,{href:"/config/index",children:"Rsbuild options"})," to view the configs of Rsbuild."]}),"\n",(0,r.jsxs)(n.p,{children:["It is worth noting that, compared to Builder, ",(0,r.jsx)(n.strong,{children:"there are some differences in default values and behaviors in Rsbuild"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Browserslist:"})," The default is minimum compatible with browsers that support ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",target:"_blank",rel:"noopener noreferrer",children:"Native ES Modules"}),", refer to ",(0,r.jsx)(n.a,{href:"/guide/advanced/browserslist#default-browserslist",children:"Default Browserslist"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTML file output path:"})," default output to the root of dist directory, refer to ",(0,r.jsx)(n.a,{href:"/guide/basic/output-files#default-directory-structure",children:"Default Directory Structure"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Polyfill injection method:"})," Inject on demand by default, refer to ",(0,r.jsx)(n.a,{href:"/config/output/polyfill",children:"output.polyfill"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TypeScript type check:"})," not enabled by default, you need to manually register the ",(0,r.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modify DevServer configuration:"})," Modify ",(0,r.jsx)(n.code,{children:"dev"})," and ",(0,r.jsx)(n.code,{children:"server"})," configuration instead."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"validating-results",children:["Validating Results",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#validating-results",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["After completing the above steps, you have migrated from Modern.js Builder to Rsbuild. You can now try starting the dev server by running the ",(0,r.jsx)(n.code,{children:"npm run dev"})," command."]}),"\n",(0,r.jsx)(n.p,{children:"If you encounter any issues during the build process, please debug according to the error logs."}),"\n",(0,r.jsxs)(n.h2,{id:"contents-supplement",children:["Contents Supplement",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contents-supplement",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"The current document only covers part of the migration process. If you find suitable content to add, feel free to contribute to the documentation via pull request \uD83E\uDD1D."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["The documentation for rsbuild can be found in the ",(0,r.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/website",target:"_blank",rel:"noopener noreferrer",children:"rsbuild/website"})," directory."]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}let o=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["en%2Fguide%2Fmigration%2Fmodern-builder.mdx"]={toc:[{text:"Key Differences",id:"key-differences",depth:2},{text:"Installing Dependencies",id:"installing-dependencies",depth:2},{text:"Updating npm Scripts",id:"updating-npm-scripts",depth:2},{text:"Modifying Configuration Files",id:"modifying-configuration-files",depth:2},{text:"Replacing Plugins",id:"replacing-plugins",depth:2},{text:"Add React-related Plugins",id:"add-react-related-plugins",depth:2},{text:"Configuration Migration",id:"configuration-migration",depth:2},{text:"Validating Results",id:"validating-results",depth:2},{text:"Contents Supplement",id:"contents-supplement",depth:2}],title:"Modern.js Builder",frontmatter:{}}}}]);
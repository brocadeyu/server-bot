"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["6837"],{18934:function(e,n,s){s.r(n),s.d(n,{default:function(){return d}});var t=s(55367),i=s(26971);function l(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h2:"h2",h3:"h3",div:"div"},(0,i.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"performanceprintfilesize",children:["performance.printFileSize",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceprintfilesize",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type PrintFileSizeOptions =\n  | boolean\n  | {\n      total?: boolean;\n      detail?: boolean;\n      compressed?: boolean;\n      include?: (asset: PrintFileSizeAsset) => boolean;\n    };\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Whether to print the file sizes after production build."}),"\n",(0,t.jsxs)(n.h2,{id:"default-outputs",children:["Default Outputs",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#default-outputs",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"The default output log is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  File (web)                              Size        Gzip\n  dist/static/js/lib-react.b0714b60.js    140.4 kB    45.0 kB\n  dist/static/js/index.f3fde9c7.js        1.9 kB      0.97 kB\n  dist/index.html                         0.39 kB     0.25 kB\n  dist/static/css/index.2960ac62.css      0.35 kB     0.26 kB\n\n  Total: 143.0 kB (gzip: 46.3 kB)\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"disable-outputs",children:["Disable Outputs",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#disable-outputs",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["If you don't want to print any information, you can disable it by setting ",(0,t.jsx)(n.code,{children:"printFileSize"})," to ",(0,t.jsx)(n.code,{children:"false"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: false,\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"options",children:["Options",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#options",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"You can customize the output format through the options."}),"\n",(0,t.jsxs)(n.h3,{id:"total",children:["total",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#total",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Whether to output the total size of all static assets."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      total: false,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,t.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"rspress-directive-content",children:(0,t.jsx)(n.p,{children:"If the current build only generates one static asset, the total size will not be printed."})})]}),"\n",(0,t.jsxs)(n.h3,{id:"detail",children:["detail",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#detail",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Whether to output the size of each static asset."}),"\n",(0,t.jsxs)(n.p,{children:["If you don't need to view the size of each static asset, you can set ",(0,t.jsx)(n.code,{children:"detail"})," to false. In this case, only the total size will be output:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      detail: false,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"compressed",children:["compressed",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#compressed",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"false"})," when ",(0,t.jsx)(n.a,{href:"/config/output/target",children:"output.target"})," is ",(0,t.jsx)(n.code,{children:"node"}),", otherwise ",(0,t.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Whether to output the gzip-compressed size of each static asset."}),"\n",(0,t.jsxs)(n.p,{children:["If you don't need to view the gzipped size, you can set ",(0,t.jsx)(n.code,{children:"compressed"})," to false. This can save some gzip computation time for large projects:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      compressed: false,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,t.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"rspress-directive-content",children:(0,t.jsxs)(n.p,{children:["This data is only for reference to the size after gzip compression. Rsbuild does not enable gzip compression for static assets. Usually, you need to enable gzip compression on the server side, for example, using the ",(0,t.jsx)(n.a,{href:"https://nginx.org/en/docs/http/ngx_http_gzip_module.html",target:"_blank",rel:"noopener noreferrer",children:"gzip module"})," of nginx.\n"]})})]}),"\n",(0,t.jsxs)(n.h3,{id:"include",children:["include",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#include",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type PrintFileSizeAsset = {\n  /**\n   * The name of the static asset.\n   * @example 'index.html', 'static/js/index.[hash].js'\n   */\n  name: string;\n  /**\n   * The size of the static asset in bytes.\n   */\n  size: number;\n};\ntype Include = (asset: PrintFileSizeAsset) => boolean;\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"A filter function to determine which static assets to print."}),"\n",(0,t.jsxs)(n.p,{children:["If returned ",(0,t.jsx)(n.code,{children:"false"}),", the static asset will be excluded and not included in the total size or detailed size."]}),"\n",(0,t.jsx)(n.p,{children:"For example, only output static assets larger than 10kB:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      include: (asset) => asset.size > 10 * 1000,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Or only output ",(0,t.jsx)(n.code,{children:".js"})," files larger than 10kB:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      include: (asset) => /\\.js$/.test(asset.name) && asset.size > 10 * 1000,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"exclude",children:["exclude",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exclude",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type Exclude = (asset: PrintFileSizeAsset) => boolean;\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"(asset) => /\\.(?:map|LICENSE\\.txt)$/.test(asset.name)"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["A filter function to determine which static assets to exclude. If both ",(0,t.jsx)(n.code,{children:"include"})," and ",(0,t.jsx)(n.code,{children:"exclude"})," are set, ",(0,t.jsx)(n.code,{children:"exclude"})," will take precedence."]}),"\n",(0,t.jsx)(n.p,{children:"Rsbuild defaults to excluding source map and license files, as these files do not affect page load performance."}),"\n",(0,t.jsxs)(n.p,{children:["For example, exclude ",(0,t.jsx)(n.code,{children:".html"})," files in addition to the default:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: {\n      exclude: (asset) =>\n        /\\.(?:map|LICENSE\\.txt)$/.test(asset.name) ||\n        /\\.html$/.test(asset.name),\n    },\n  },\n};\n"})})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}let d=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fprint-file-size.mdx"]={toc:[{text:"Default Outputs",id:"default-outputs",depth:2},{text:"Disable Outputs",id:"disable-outputs",depth:2},{text:"Options",id:"options",depth:2},{text:"total",id:"total",depth:3},{text:"detail",id:"detail",depth:3},{text:"compressed",id:"compressed",depth:3},{text:"include",id:"include",depth:3},{text:"exclude",id:"exclude",depth:3}],title:"performance.printFileSize",frontmatter:{}}}}]);
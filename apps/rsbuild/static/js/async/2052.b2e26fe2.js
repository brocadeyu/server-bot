"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["2052"],{92110:function(e,n,r){r.r(n),r.d(n,{default:function(){return l}});var t=r(55367),s=r(26971);function d(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h2:"h2",h3:"h3"},(0,s.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"outputtarget",children:["output.target",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputtarget",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type RsbuildTarget = 'web' | 'node' | 'web-worker';\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"'web'"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Version:"})," ",(0,t.jsx)(n.code,{children:">= 1.0.0"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Setting the build target of Rsbuild."}),"\n",(0,t.jsx)(n.p,{children:"Rsbuild supports multiple build targets for running in different environments. After setting the target type, the default configuration of Rsbuild will change accordingly."}),"\n",(0,t.jsxs)(n.h2,{id:"default-target",children:["Default Target",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#default-target",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"By default, the target is set to 'web' and will build outputs for running in the browser."}),"\n",(0,t.jsxs)(n.p,{children:["Rsbuild will read the ",(0,t.jsx)(n.a,{href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noopener noreferrer",children:"Browserslist config"})," in the project to determine the range of browsers."]}),"\n",(0,t.jsxs)(n.h2,{id:"optional-targets",children:["Optional Targets",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#optional-targets",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["In addition to ",(0,t.jsx)(n.code,{children:"'web'"}),", ",(0,t.jsx)(n.code,{children:"target"})," can also be set to the following values:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"'node'"}),": Build for Node.js environment, usually used in SSR or other scenarios."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"'web-worker'"}),": Build for web worker environment."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For example, to build for the Node.js environment:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    target: 'node',\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"parallel-builds",children:["Parallel Builds",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#parallel-builds",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["You can use ",(0,t.jsx)(n.a,{href:"/config/environments",children:"environments"})," to build multiple targets in parallel."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, to build ",(0,t.jsx)(n.code,{children:"web"})," outputs and ",(0,t.jsx)(n.code,{children:"node"})," outputs at the same time:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"node-target",children:["Node Target",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#node-target",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Refers to the build target running in the Node.js environment, usually used in scenarios such as SSR."}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"target"})," is set to ",(0,t.jsx)(n.code,{children:"'node'"}),", Rsbuild will:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Set Rspack's ",(0,t.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"target"})," to ",(0,t.jsx)(n.code,{children:"'node'"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"No HTML files will be generated, and HTML-related logic will not be executed, since HTML is not required by the Node.js environment."}),"\n",(0,t.jsx)(n.li,{children:"The default code split strategy will be disabled, but dynamic import can still work."}),"\n",(0,t.jsx)(n.li,{children:"Disable the HMR."}),"\n",(0,t.jsxs)(n.li,{children:["Set the default value of Browserslist to ",(0,t.jsx)(n.code,{children:"['node >= 16']"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Set the default value of ",(0,t.jsx)(n.a,{href:"/config/output/emit-css",children:"output.emitCss"})," to ",(0,t.jsx)(n.code,{children:"false"}),". This means that CSS code will not be extracted to separate files, but the id information of CSS Modules will be included in the bundle."]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"node-addons",children:["Node Addons",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#node-addons",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"target"})," is set to ",(0,t.jsx)(n.code,{children:"'node'"}),", Rsbuild allows you to import Node.js ",(0,t.jsx)(n.a,{href:"https://nodejs.org/api/addons.html",target:"_blank",rel:"noopener noreferrer",children:"Addons"})," in JavaScript files."]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",meta:'title="src/index.js"',children:"import addon from './addon.node';\n\naddon.doSomething();\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The referenced addons file will be output to the ",(0,t.jsx)(n.code,{children:"dist"})," directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"dist/index.js\ndist/addon.node\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"web-worker-target",children:["Web Worker Target",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#web-worker-target",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Refers to the build target running in the ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API",target:"_blank",rel:"noopener noreferrer",children:"Web Worker"})," environment."]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"target"})," is set to ",(0,t.jsx)(n.code,{children:"'web-worker'"}),", Rsbuild will:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Set Rspack's ",(0,t.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"target"})," to ",(0,t.jsx)(n.code,{children:"'webworker'"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"No HTML files will be generated, and HTML-related logic will not be executed, since HTML is not required by the Web Worker environment."}),"\n",(0,t.jsxs)(n.li,{children:["CSS code will not be bundled or extracted, but the id information of CSS Modules will be included in the bundle (the default value of ",(0,t.jsx)(n.a,{href:"/config/output/emit-css",children:"output.emitCss"})," is ",(0,t.jsx)(n.code,{children:"false"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["The default code split strategy will be disabled, and ",(0,t.jsx)(n.strong,{children:"dynamic import can not work"}),", because the Web Worker only runs a single JavaScript file."]}),"\n",(0,t.jsxs)(n.li,{children:["Set the default value of ",(0,t.jsx)(n.a,{href:"/config/output/emit-css",children:"output.emitCss"})," to ",(0,t.jsx)(n.code,{children:"false"}),". This means that CSS code will not be extracted to separate files, but the id information of CSS Modules will be included in the bundle."]}),"\n",(0,t.jsx)(n.li,{children:"Disable the HMR."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For more information, please refer to: ",(0,t.jsx)(n.a,{href:"/guide/basic/web-workers",children:"Using Web Workers"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"other-targets",children:["Other targets",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#other-targets",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://rspack.dev/config/target",target:"_blank",rel:"noopener noreferrer",children:"Rspack"})," supports other target types, such as ",(0,t.jsx)(n.code,{children:"electron-main"})," and ",(0,t.jsx)(n.code,{children:"electron-renderer"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Rsbuild currently does not support these targets. You can configure these targets using ",(0,t.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, setting the ",(0,t.jsx)(n.code,{children:"target"})," to ",(0,t.jsx)(n.code,{children:"'electron-main'"})," will override the default ",(0,t.jsx)(n.code,{children:"'web'"})," set by Rsbuild."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    rspack: {\n      target: 'electron-main',\n    },\n  },\n};\n"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}let l=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["en%2Fconfig%2Foutput%2Ftarget.mdx"]={toc:[{text:"Default Target",id:"default-target",depth:2},{text:"Optional Targets",id:"optional-targets",depth:2},{text:"Parallel Builds",id:"parallel-builds",depth:2},{text:"Node Target",id:"node-target",depth:2},{text:"Node Addons",id:"node-addons",depth:3},{text:"Web Worker Target",id:"web-worker-target",depth:2},{text:"Other targets",id:"other-targets",depth:2}],title:"output.target",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4027"],{71887:function(e,s,n){n.r(s),n.d(s,{default:function(){return a}});var l=n(55367),d=n(26971);function t(e){let s=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",h2:"h2",pre:"pre",strong:"strong",h3:"h3"},(0,d.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.h1,{id:"use-css-modules",children:["Use CSS Modules",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#use-css-modules",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.a,{href:"https://github.com/css-modules/css-modules",target:"_blank",rel:"noopener noreferrer",children:"CSS Modules"})," allows us to write CSS code in a modular way, and these styles can be imported and used in JavaScript files. Using CSS Modules can automatically generate unique class names, isolate styles between different modules, and avoid class name conflicts."]}),"\n",(0,l.jsxs)(s.p,{children:["Rsbuild supports CSS Modules by default, you don't need to add additional configuration. Our convention is to use the ",(0,l.jsx)(s.code,{children:"[name].module.css"})," filename to enable CSS Modules."]}),"\n",(0,l.jsx)(s.p,{children:"The following style files are considered CSS Modules:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.css"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.less"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.sass"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.scss"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.styl"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"*.module.stylus"})}),"\n"]}),"\n",(0,l.jsxs)(s.h2,{id:"usage-example",children:["Usage Example",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#usage-example",children:"#"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Write style:"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-css",meta:'title="button.module.css"',children:".red {\n  background: red;\n}\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Using styles:"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",meta:'title="Button.tsx"',children:"import styles from './button.module.css';\n\nexport default () => {\n  return <button className={styles.red}>Button</button>;\n};\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"named-import",children:["Named Import",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#named-import",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["If you prefer to use named imports in CSS Modules, you can enable it through the ",(0,l.jsx)(s.a,{href:"/config/output/css-modules#cssmodulesnamedexport",children:"output.cssModules.namedExport"})," config."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  output: {\n    cssModules: {\n      namedExport: true,\n    },\n  },\n};\n"})}),"\n",(0,l.jsx)(s.p,{children:"If enabled, you can reference class names using named imports:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",meta:'title="Button.tsx"',children:"import { red } from './button.module.css';\n\nexport default () => {\n  return <button className={red}>Button</button>;\n};\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"css-modules-recognition-rules",children:["CSS Modules Recognition Rules",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#css-modules-recognition-rules",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["By default, only files ending with ",(0,l.jsx)(s.code,{children:"*.module.css"})," are recognized as CSS Modules."]}),"\n",(0,l.jsxs)(s.p,{children:["If you want to treat other CSS files as CSS Modules as well, you can achieve this by configuring ",(0,l.jsx)(s.a,{href:"/config/output/css-modules#cssmodulesauto",children:"output.cssModules.auto"}),"."]}),"\n",(0,l.jsx)(s.p,{children:"For example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      auto: (resource) => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n"})}),"\n",(0,l.jsx)(s.p,{children:"After this configuration, the following two files will be recognized as CSS Modules:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"import styles1 from './foo.module.css';\nimport styles2 from './shared/bar.css';\n"})}),"\n",(0,l.jsxs)(s.h2,{id:"custom-class-names",children:["Custom Class Names",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#custom-class-names",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["Customizing the class names generated by CSS Modules is also a commonly used function, you can use ",(0,l.jsx)(s.a,{href:"/config/output/css-modules#cssmoduleslocalidentname",children:"output.cssModules.localIdentName"})," to configure it."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      localIdentName: '[hash:base64:4]',\n    },\n  },\n};\n"})}),"\n",(0,l.jsxs)(s.p,{children:["If you need to customize other configs of CSS Modules, you can set them via ",(0,l.jsx)(s.a,{href:"/config/output/css-modules",children:"output.cssModules"}),"."]}),"\n",(0,l.jsxs)(s.h2,{id:"type-declaration",children:["Type Declaration",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#type-declaration",children:"#"})]}),"\n",(0,l.jsx)(s.p,{children:"When you import CSS Modules in TypeScript code, TypeScript may prompt that the module is missing a type definition:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"TS2307: Cannot find module './index.module.css' or its corresponding type declarations.\n"})}),"\n",(0,l.jsxs)(s.p,{children:["To fix this, you need to add a type declaration file for the CSS Modules, please create a ",(0,l.jsx)(s.code,{children:"src/env.d.ts"})," file, and add the corresponding type declaration."]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Method 1: If the ",(0,l.jsx)(s.code,{children:"@rsbuild/core"})," package is installed, you can reference the ",(0,l.jsx)(s.a,{href:"/guide/basic/typescript#preset-types",children:"preset types"})," provided by ",(0,l.jsx)(s.code,{children:"@rsbuild/core"}),":"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",children:'/// <reference types="@rsbuild/core/types" />\n'})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Method 2: Manually add the required type declarations:"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",meta:'title="src/env.d.ts"',children:"declare module '*.module.css' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.scss' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.sass' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.less' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.styl' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.stylus' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Method 3: If you need to use ",(0,l.jsx)(s.strong,{children:"named imports"})," to reference class names, you can use a looser type declaration:"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",meta:'title="src/env.d.ts"',children:"declare module '*.module.css';\ndeclare module '*.module.scss';\ndeclare module '*.module.sass';\ndeclare module '*.module.less';\ndeclare module '*.module.styl';\ndeclare module '*.module.stylus';\n"})}),"\n",(0,l.jsxs)(s.p,{children:["After adding the type declaration, if the type error still exists, you can try to restart the current IDE, or adjust the directory where ",(0,l.jsx)(s.code,{children:"env.d.ts"})," is located, making sure the TypeScript can correctly identify the type definition."]}),"\n",(0,l.jsxs)(s.h2,{id:"type-generation",children:["Type Generation",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#type-generation",children:"#"})]}),"\n",(0,l.jsx)(s.p,{children:"Although the above method can provide the type of CSS Modules, it cannot accurately prompt which classNames are exported by a certain CSS file."}),"\n",(0,l.jsxs)(s.p,{children:["Rsbuild supports generating accurate type declarations for CSS Modules, you only need to register the ",(0,l.jsx)(s.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-typed-css-modules",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-typed-css-modules"}),", and then execute the build, Rsbuild will generate type declaration files for all CSS Modules."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",meta:"file=rsbuild.config.ts",children:"import { pluginTypedCSSModules } from '@rsbuild/plugin-typed-css-modules';\n\nexport default {\n  plugins: [pluginTypedCSSModules()],\n};\n"})}),"\n",(0,l.jsxs)(s.h3,{id:"example",children:["Example",(0,l.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,l.jsxs)(s.p,{children:["For example, create two files named ",(0,l.jsx)(s.code,{children:"src/index.ts"})," and ",(0,l.jsx)(s.code,{children:"src/index.module.css"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-tsx",meta:'title="src/index.ts"',children:"import styles from './index.module.css';\n\nconsole.log(styles.pageHeader);\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-css",meta:'title="src/index.module.css"',children:".page-header {\n  color: black;\n}\n"})}),"\n",(0,l.jsxs)(s.p,{children:["After building, Rsbuild will generate a ",(0,l.jsx)(s.code,{children:"src/index.module.css.d.ts"})," type declaration file:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ts",meta:'title="src/index.module.css.d.ts"',children:"interface CssExports {\n  'page-header': string;\n  pageHeader: string;\n}\ndeclare const cssExports: CssExports;\nexport default cssExports;\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Now when you open the ",(0,l.jsx)(s.code,{children:"src/index.ts"})," file, you can see that the ",(0,l.jsx)(s.code,{children:"styles"})," object already has an accurate type."]})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,d.ah)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}let a=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Fcss-modules.mdx"]={toc:[{text:"Usage Example",id:"usage-example",depth:2},{text:"Named Import",id:"named-import",depth:2},{text:"CSS Modules Recognition Rules",id:"css-modules-recognition-rules",depth:2},{text:"Custom Class Names",id:"custom-class-names",depth:2},{text:"Type Declaration",id:"type-declaration",depth:2},{text:"Type Generation",id:"type-generation",depth:2},{text:"Example",id:"example",depth:3}],title:"Use CSS Modules",frontmatter:{}}}}]);
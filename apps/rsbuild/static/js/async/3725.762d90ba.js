"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["3725"],{33599:function(n,e,s){s.r(e),s.d(e,{default:function(){return t}});var r=s(55367),o=s(26971);function i(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",blockquote:"blockquote",ul:"ul",li:"li",strong:"strong",pre:"pre",h2:"h2"},(0,o.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"environments",children:["environments",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#environments",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["Rsbuild 支持同时为多个环境构建产物。你可以使用 ",(0,r.jsx)(e.code,{children:"environments"})," 为每个环境定义不同的 Rsbuild 配置。"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["请查看 ",(0,r.jsx)(e.a,{href:"/guide/advanced/environments",children:"多环境构建"})," 了解更多。"]}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"interface EnvironmentConfig {\n  plugins?: RsbuildPlugins;\n  dev?: Pick<\n    DevConfig,\n    'hmr' | 'assetPrefix' | 'progressBar' | 'lazyCompilation' | 'writeToDisk'\n  >;\n  html?: HtmlConfig;\n  tools?: ToolsConfig;\n  source?: SourceConfig;\n  output?: OutputConfig;\n  resolve?: ResolveConfig;\n  security?: SecurityConfig;\n  performance?: PerformanceConfig;\n  moduleFederation?: ModuleFederationConfig;\n}\n\ntype Environments = {\n  [name: string]: EnvironmentConfig;\n};\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"默认值："})," ",(0,r.jsx)(e.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"示例",children:["示例",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["分别为 ",(0,r.jsx)(e.code,{children:"web"})," (client) 和 ",(0,r.jsx)(e.code,{children:"node"})," (SSR) 环境配置 Rsbuild："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  // 所有环境共享配置\n  resolve: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n  environments: {\n    // client 环境配置\n    web: {\n      source: {\n        entry: {\n          index: './src/index.client.js',\n        },\n      },\n      output: {\n        target: 'web',\n      },\n      resolve: {\n        alias: {\n          '@common1': './src/web/common1',\n        },\n      },\n    },\n    // SSR 环境配置\n    node: {\n      source: {\n        entry: {\n          index: './src/index.server.js',\n        },\n      },\n      output: {\n        target: 'node',\n      },\n      resolve: {\n        alias: {\n          '@common1': './src/ssr/common1',\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(e.p,{children:["对于 ",(0,r.jsx)(e.code,{children:"web"})," 环境，合并后的 Rsbuild 配置为："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const webConfig = {\n  source: {\n    entry: {\n      index: './src/index.client.js',\n    },\n  },\n  output: {\n    target: 'web',\n  },\n  resolve: {\n    alias: {\n      '@common': './src/common',\n      '@common1': './src/web/common1',\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(e.p,{children:["对于 ",(0,r.jsx)(e.code,{children:"node"})," 环境，合并后的 Rsbuild 配置为："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const nodeConfig = {\n  source: {\n    entry: {\n      index: './src/index.server.js',\n    },\n  },\n  output: {\n    target: 'node',\n  },\n  resolve: {\n    alias: {\n      '@common': './src/common',\n      '@common1': './src/ssr/common1',\n    },\n  },\n};\n"})})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,o.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(i,{...n})}):i(n)}let t=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fconfig%2Fenvironments.mdx"]={toc:[{text:"示例",id:"示例",depth:2}],title:"environments",frontmatter:{}}}}]);
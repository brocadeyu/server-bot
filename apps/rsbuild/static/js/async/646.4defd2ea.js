"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["646"],{3573:function(e,r,s){s.r(r),s.d(r,{default:function(){return l}});var n=s(55367),t=s(26971);function i(e){let r=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",div:"div",h2:"h2"},(0,t.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.h1,{id:"serverhttps",children:["server.https",(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#serverhttps",children:"#"})]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.strong,{children:"类型："})}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import type { ServerOptions } from 'node:https';\nimport type { SecureServerSessionOptions } from 'node:http2';\n\ntype Https = ServerOptions | SecureServerSessionOptions;\n"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"默认值："})," ",(0,n.jsx)(r.code,{children:"undefined"})]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"配置该选项后，可以开启 Rsbuild Server 对 HTTPS 的支持，同时会禁用 HTTP 服务器。"}),"\n",(0,n.jsx)(r.p,{children:"开启前："}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"  ➜ Local:    http://localhost:3000/\n  ➜ Network:  http://192.168.0.1:3000/\n"})}),"\n",(0,n.jsx)(r.p,{children:"开启后："}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"  ➜ Local:    https://localhost:3000/\n  ➜ Network:  https://192.168.0.1:3000/\n"})}),"\n",(0,n.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,n.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,n.jsx)(r.div,{className:"rspress-directive-content",children:(0,n.jsxs)(r.p,{children:["Rsbuild 默认会启用 HTTP/2 server。但当你使用 ",(0,n.jsx)(r.a,{href:"/config/server/proxy",children:"server.proxy"})," 时，server 会降级到 HTTP/1，这是因为底层使用的 ",(0,n.jsx)(r.code,{children:"http-proxy"})," 不支持 HTTP/2。\n"]})})]}),"\n",(0,n.jsxs)(r.h2,{id:"设置证书",children:["设置证书",(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#设置证书",children:"#"})]}),"\n",(0,n.jsxs)(r.p,{children:["你可以在 ",(0,n.jsx)(r.code,{children:"server.https"})," 选项中手动传入 HTTPS 服务器所需要的证书和对应的私钥，这个参数将直接传递给 Node.js 中 https 模块的 ",(0,n.jsx)(r.code,{children:"createServer"})," 方法。"]}),"\n",(0,n.jsxs)(r.p,{children:["具体可以参考 ",(0,n.jsx)(r.a,{href:"https://nodejs.org/api/https.html#https_https_createserver_options_requestlistener",target:"_blank",rel:"noopener noreferrer",children:"https.createServer"}),"。"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import fs from 'node:fs';\n\nexport default {\n  server: {\n    https: {\n      key: fs.readFileSync('certificates/private.pem'),\n      cert: fs.readFileSync('certificates/public.pem'),\n    },\n  },\n};\n"})}),"\n",(0,n.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,n.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,n.jsx)(r.div,{className:"rspress-directive-content",children:(0,n.jsxs)(r.p,{children:["本地开发所使用的证书通常使用 ",(0,n.jsx)(r.a,{href:"https://github.com/FiloSottile/mkcert",target:"_blank",rel:"noopener noreferrer",children:"mkcert"})," 生成，请阅读 ",(0,n.jsx)(r.a,{href:"https://web.dev/articles/how-to-use-local-https?hl=zh-cn",target:"_blank",rel:"noopener noreferrer",children:'"如何使用 HTTPS 进行本地开发"'})," 来了解如何使用。\n"]})})]}),"\n",(0,n.jsxs)(r.h2,{id:"自签名证书",children:["自签名证书",(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#自签名证书",children:"#"})]}),"\n",(0,n.jsxs)(r.p,{children:["对基本的配置需求，你可以添加 ",(0,n.jsx)(r.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-basic-ssl",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-basic-ssl"})," 插件，它会自动创建一个自签名的证书，并默认设置 ",(0,n.jsx)(r.code,{children:"server.https"})," 选项。"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { pluginBasicSsl } from '@rsbuild/plugin-basic-ssl';\n\nexport default {\n  plugins: [pluginBasicSsl()],\n};\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,t.ah)(),e.components);return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}let l=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fconfig%2Fserver%2Fhttps.mdx"]={toc:[{text:"设置证书",id:"设置证书",depth:2},{text:"自签名证书",id:"自签名证书",depth:2}],title:"server.https",frontmatter:{}}}}]);
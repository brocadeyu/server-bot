"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["6743"],{55571:function(e,n,r){r.r(n),r.d(n,{default:function(){return a}});var s=r(55367),i=r(26971),t=r(38146);function l(e){let n=Object.assign({h1:"h1",a:"a",p:"p",div:"div",code:"code",h2:"h2",ul:"ul",li:"li",blockquote:"blockquote",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h3:"h3"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"create-react-app",children:["Create React App",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-react-app",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["This chapter introduces how to migrate a ",(0,s.jsx)(n.a,{href:"https://github.com/facebook/create-react-app",target:"_blank",rel:"noopener noreferrer",children:"Create React App"})," (CRA) or ",(0,s.jsx)(n.a,{href:"https://craco.js.org/",target:"_blank",rel:"noopener noreferrer",children:"CRACO"})," project to Rsbuild."]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"CRA eject"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(n.p,{children:["If your project has already run the CRA ",(0,s.jsx)(n.code,{children:"eject"})," command, then most of the content in this document will no longer be applicable."]}),"\n",(0,s.jsxs)(n.p,{children:["After ejecting a CRA project, it becomes more like a project directly using webpack, so you can refer to the ",(0,s.jsx)(n.a,{href:"/guide/migration/webpack",children:"webpack migration guide"}),"."]}),"\n"]})]}),"\n",(0,s.jsxs)(n.h2,{id:"installing-dependencies",children:["Installing Dependencies",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installing-dependencies",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"First, you need to replace the npm dependencies of CRA with Rsbuild's dependencies."}),"\n","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Remove CRA dependencies:"}),"\n"]}),"\n",(0,s.jsx)(t.PackageManagerTabs,{command:"remove react-scripts"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"For projects using CRACO, you can also remove the @craco/craco dependency."}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install Rsbuild dependencies:"}),"\n"]}),"\n",(0,s.jsx)(t.PackageManagerTabs,{command:"add @rsbuild/core @rsbuild/plugin-react -D"}),"\n",(0,s.jsxs)(n.h2,{id:"updating-npm-scripts",children:["Updating npm scripts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#updating-npm-scripts",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Next, you need to update the npm scripts in package.json to Rsbuild's CLI commands."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="package.json"',children:'{\n  "scripts": {\n-   "start": "react-scripts start",\n-   "build": "react-scripts build",\n-   "eject": "react-scripts eject"\n+   "start": "rsbuild dev",\n+   "build": "rsbuild build",\n+   "preview": "rsbuild preview"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsxs)(n.p,{children:["Rsbuild does not integrate testing frameworks, so it does not provide a command to replace ",(0,s.jsx)(n.code,{children:"react-scripts test"}),". You can directly use testing frameworks such as Jest or Vitest. You can refer to the ",(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rspack-examples/tree/main/rsbuild/react-jest",target:"_blank",rel:"noopener noreferrer",children:"Rsbuild react-jest"})," example project for configuration.\n"]})})]}),"\n",(0,s.jsxs)(n.h2,{id:"creating-configuration-file",children:["Creating Configuration File",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#creating-configuration-file",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Create a Rsbuild configuration file ",(0,s.jsx)(n.code,{children:"rsbuild.config.ts"})," in the same directory as package.json and add the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"html-template",children:["HTML Template",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html-template",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA uses the ",(0,s.jsx)(n.code,{children:"public/index.html"})," file as the default HTML template. In Rsbuild, you can specify the HTML template through ",(0,s.jsx)(n.a,{href:"/config/html/template",children:"html.template"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the HTML template, if you are using the ",(0,s.jsx)(n.code,{children:"%PUBLIC_URL%"})," variable from CRA, replace it with Rsbuild's ",(0,s.jsx)(n.a,{href:"/config/html/template-parameters",children:"assetPrefix variable"})," and use a forward slash for concatenation:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:'-  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n+  <link rel="icon" href="<%= assetPrefix %>/favicon.ico" />\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This completes the basic migration from CRA to Rsbuild. You can now run the ",(0,s.jsx)(n.code,{children:"npm run start"})," command to try starting the dev server."]}),"\n",(0,s.jsxs)(n.h2,{id:"output-directory",children:["Output Directory",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#output-directory",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["By default, CRA outputs to the ",(0,s.jsx)(n.code,{children:"build"})," directory, while Rsbuild's default output directory is ",(0,s.jsx)(n.code,{children:"dist"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can configure Rsbuild's ",(0,s.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath.root"})," option to change the directory to ",(0,s.jsx)(n.code,{children:"build"}),", in line with CRA:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  output: {\n    distPath: {\n      root: 'build',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["For more details, please refer to the ",(0,s.jsx)(n.a,{href:"/guide/basic/output-files",children:"Output Files"})," section."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"using-css-preprocessors",children:["Using CSS Preprocessors",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#using-css-preprocessors",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild supports CSS preprocessors such as Sass and Less through plugins. Please refer to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"Sass Plugin"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-less",children:"Less Plugin"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-stylus",children:"Stylus Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"using-svgr",children:["Using SVGR",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#using-svgr",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:['If you are using the "SVG to React Component" feature of CRA (i.e., ',(0,s.jsx)(n.a,{href:"https://react-svgr.com/",target:"_blank",rel:"noopener noreferrer",children:"SVGR"}),"), you also need to install the SVGR plugin for Rsbuild."]}),"\n",(0,s.jsx)(n.p,{children:"For example, if you are using the following usage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { ReactComponent as Logo } from './logo.svg';\n\nconst App = () => (\n  <div>\n    <Logo />\n  </div>\n);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You only need to install and register ",(0,s.jsx)(n.code,{children:"@rsbuild/plugin-svgr"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr({ mixedImport: true })],\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Please refer to the ",(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svgr",children:"SVGR plugin"})," documentation to learn how to use SVGR in Rsbuild."]}),"\n",(0,s.jsxs)(n.h2,{id:"configuration-migration",children:["Configuration Migration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-migration",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Here is the corresponding Rsbuild configuration for ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/docs/advanced-configuration/",target:"_blank",rel:"noopener noreferrer",children:"CRA configuration"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"CRA"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"HOST"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/host",children:"server.host"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"PORT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/port",children:"server.port"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"HTTPS"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/server/https",children:"server.https"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_HOST"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.host"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_PATH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.path"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"WDS_SOCKET_PORT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/client",children:"dev.client.port"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"PUBLIC_URL"}),"\n",(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"/config/dev/asset-prefix",children:"dev.assetPrefix"})," / ",(0,s.jsx)(n.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"BUILD_PATH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/dist-path",children:"output.distPath"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"GENERATE_SOURCEMAP"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"IMAGE_INLINE_SIZE_LIMIT"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/data-uri-limit",children:"output.dataUriLimit"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"FAST_REFRESH"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/dev/hmr",children:"dev.hmr"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"TSC_COMPILE_ON_ERROR"}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The above table does not cover all configurations of CRA, feel free to add more."}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"compile-node_modules",children:["Compile node_modules",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#compile-node_modules",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"By default, CRA uses Babel to compile dependencies in node_modules, but Rsbuild does not, to avoid the performance overhead and potential compilation errors caused by secondary compilation."}),"\n",(0,s.jsxs)(n.p,{children:["If you need to handle syntax compatibility issues caused by dependencies in node_modules, you can use the ",(0,s.jsx)(n.a,{href:"/config/source/include#compile-node_modules",children:"source.include"})," config to compile node_modules."]}),"\n",(0,s.jsxs)(n.h2,{id:"env-variables",children:["Env Variables",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#env-variables",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA injects environment variables starting with ",(0,s.jsx)(n.code,{children:"REACT_APP_"})," into the client code by default, while Rsbuild injects environment variables starting with ",(0,s.jsx)(n.code,{children:"PUBLIC_"})," by default (see ",(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars#public-variables",children:"public variables"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["To be compatible with CRA's behavior, you can manually call Rsbuild's ",(0,s.jsx)(n.a,{href:"/api/javascript-api/core#loadenv",children:"loadEnv"})," method to read environment variables starting with ",(0,s.jsx)(n.code,{children:"REACT_APP_"}),", and inject them into the client code through the ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," config."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note that CRA allows access to the full ",(0,s.jsx)(n.code,{children:"process.env"})," object in the code and also allows destructuring of ",(0,s.jsx)(n.code,{children:"process.env"}),". However, Rsbuild does not define the ",(0,s.jsx)(n.code,{children:"process.env"})," object due to bundle size and security concerns."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/index.js"',children:"// In CRA, you can access it like this\nconst { PUBLIC_URL } = process.env;\nconsole.log(PUBLIC_URL);\nconsole.log(process.env);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In Rsbuild, you can use the ",(0,s.jsx)(n.a,{href:"/config/source/define",children:"source.define"})," config to set ",(0,s.jsx)(n.code,{children:"process.env"})," and read the ",(0,s.jsx)(n.code,{children:"rawPublicVars"})," returned by the ",(0,s.jsx)(n.code,{children:"loadEnv"})," method to allow the above usage:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars, rawPublicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: {\n      ...publicVars,\n      'process.env': JSON.stringify(rawPublicVars),\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"import-unknown-assets",children:["Import Unknown Assets",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#import-unknown-assets",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In CRA, if you import an asset that the build tool cannot recognize, CRA will by default output the file to the ",(0,s.jsx)(n.code,{children:"build/static/media"})," directory, for example, the ",(0,s.jsx)(n.code,{children:"document.pdf"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title="index.js"',children:"import document from './document.pdf';\n"})}),"\n",(0,s.jsx)(n.p,{children:"In Rsbuild, when importing unrecognized assets, Rsbuild will logs errors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"You may need an appropriate loader to handle this file type.\n"})}),"\n",(0,s.jsx)(n.p,{children:"To resolve this error, you can use the following methods:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Configure a suitable loader to handle this type of asset via ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Configure ",(0,s.jsx)(n.a,{href:"https://rspack.dev/guide/features/asset-module",target:"_blank",rel:"noopener noreferrer",children:"asset modules"})," rule to handle this type of asset via ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For example, you can add the following asset modules config to get the same output result as CRA:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack: {\n      module: {\n        rules: [\n          {\n            // Match .png asset\n            // You can change this regular expression to match different types of files\n            test: /\\.png$/,\n            type: 'asset/resource',\n            generator: {\n              filename: 'static/media/[name].[hash][ext]',\n            },\n          },\n        ],\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"remove-react-app-polyfill",children:["Remove react-app-polyfill",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#remove-react-app-polyfill",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA provides ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/react-app-polyfill",target:"_blank",rel:"noopener noreferrer",children:"react-app-polyfill"})," to manually inject polyfill code."]}),"\n",(0,s.jsx)(n.p,{children:"In the Rsbuild project, you can remove the dependency and code related to react-app-polyfill, as Rsbuild will automatically read the browserslist config and inject polyfill code as needed."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="src/index.js"',children:"- import 'react-app-polyfill/ie11';\n- import 'react-app-polyfill/stable';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can read ",(0,s.jsx)(n.a,{href:"/guide/advanced/browser-compatibility",children:"Browser Compatibility"})," to understand how Rsbuild handles polyfills."]}),"\n",(0,s.jsxs)(n.h2,{id:"add-eslint-plugin",children:["Add ESLint plugin",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#add-eslint-plugin",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["CRA has the ",(0,s.jsx)(n.a,{href:"https://github.com/webpack-contrib/eslint-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"eslint-webpack-plugin"})," enabled by default and includes a set of built-in ESLint rules."]}),"\n",(0,s.jsxs)(n.p,{children:["In an Rsbuild project, if you need similar functionality, you can add ",(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-eslint",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-eslint"})," and use ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-config-react-app",target:"_blank",rel:"noopener noreferrer",children:"eslint-config-react-app"})," as the ESLint ruleset."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title=".eslintrc.cjs"',children:"module.exports = {\n  extends: 'react-app',\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"reading-jsconfigjson",children:["Reading jsconfig.json",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#reading-jsconfigjson",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In non-TypeScript projects, CRA supports reading the ",(0,s.jsx)(n.code,{children:"paths"})," field in jsconfig.json as the path alias."]}),"\n",(0,s.jsxs)(n.p,{children:["If you want to use this feature in Rsbuild, you can refer to the ",(0,s.jsx)(n.a,{href:"/guide/advanced/alias#jsconfigjson",children:"Path Alias - jsconfig.json"}),"."]}),"\n",(0,s.jsxs)(n.h2,{id:"craco-migration",children:["CRACO Migration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#craco-migration",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If your project is using ",(0,s.jsx)(n.a,{href:"https://craco.js.org",target:"_blank",rel:"noopener noreferrer",children:"CRACO"})," to override CRA configuration, you can refer to the table below for migration:"]}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"CRACO"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackconfigure",target:"_blank",rel:"noopener noreferrer",children:"webpack.configure"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackalias",target:"_blank",rel:"noopener noreferrer",children:"webpack.alias"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/resolve/alias",children:"resolve.alias"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackplugins",target:"_blank",rel:"noopener noreferrer",children:"webpack.plugins.add"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack#appendplugins",children:"appendPlugins of tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/webpack/#webpackpluginsremove",target:"_blank",rel:"noopener noreferrer",children:"webpack.plugins.remove"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/rspack#removeplugin",children:"removePlugin of tools.rspack"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylemodules",target:"_blank",rel:"noopener noreferrer",children:"style.modules"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/output/css-modules",children:"output.cssModules"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylecss",target:"_blank",rel:"noopener noreferrer",children:"style.css"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/css-loader",children:"tools.cssLoader"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylesass",target:"_blank",rel:"noopener noreferrer",children:"style.sass"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"Sass Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/style/#stylepostcss",target:"_blank",rel:"noopener noreferrer",children:"style.postcss"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/tools/postcss",children:"tools.postcss"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/babel/",target:"_blank",rel:"noopener noreferrer",children:"babel"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-babel",children:"Babel Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/typescript/",target:"_blank",rel:"noopener noreferrer",children:"typescript"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://craco.js.org/docs/configuration/devserver/",target:"_blank",rel:"noopener noreferrer",children:"devServer"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/config/index",children:"server configs"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"example",children:["Example",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Here is an example of migrating from ",(0,s.jsx)(n.code,{children:"webpack.configure"})," to ",(0,s.jsx)(n.code,{children:"tools.rspack"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Before migration:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",meta:'title="craco.config.js"',children:"const { whenDev } = require('@craco/craco');\n\nmodule.exports = {\n  webpack: {\n    configure: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n    },\n    plugins: [...whenDev(() => [new MyWebpackPlugin()], [])],\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"After migration:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n      plugins:\n        process.env.NODE_ENV === 'development' ? [new MyWebpackPlugin()] : [],\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"contents-supplement",children:["Contents Supplement",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contents-supplement",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The current document only covers part of the migration process. If you find suitable content to add, feel free to contribute to the documentation via pull request \uD83E\uDD1D."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The documentation for rsbuild can be found in the ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/website",target:"_blank",rel:"noopener noreferrer",children:"rsbuild/website"})," directory."]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}let a=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["en%2Fguide%2Fmigration%2Fcra.mdx"]={toc:[{text:"Installing Dependencies",id:"installing-dependencies",depth:2},{text:"Updating npm scripts",id:"updating-npm-scripts",depth:2},{text:"Creating Configuration File",id:"creating-configuration-file",depth:2},{text:"HTML Template",id:"html-template",depth:2},{text:"Output Directory",id:"output-directory",depth:2},{text:"Using CSS Preprocessors",id:"using-css-preprocessors",depth:2},{text:"Using SVGR",id:"using-svgr",depth:2},{text:"Configuration Migration",id:"configuration-migration",depth:2},{text:"Compile node_modules",id:"compile-node_modules",depth:2},{text:"Env Variables",id:"env-variables",depth:2},{text:"Import Unknown Assets",id:"import-unknown-assets",depth:2},{text:"Remove react-app-polyfill",id:"remove-react-app-polyfill",depth:2},{text:"Add ESLint plugin",id:"add-eslint-plugin",depth:2},{text:"Reading jsconfig.json",id:"reading-jsconfigjson",depth:2},{text:"CRACO Migration",id:"craco-migration",depth:2},{text:"Example",id:"example",depth:3},{text:"Contents Supplement",id:"contents-supplement",depth:2}],title:"Create React App",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["2323"],{21897:function(e,n,l){l.r(n),l.d(n,{default:function(){return h}});var t=l(55367),r=l(26971);function i(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",div:"div",h2:"h2",h3:"h3"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"toolshtmlplugin",children:["tools.htmlPlugin",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#toolshtmlplugin",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"类型："})," ",(0,t.jsx)(n.code,{children:"boolean | Object | Function"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const defaultOptions = {\n  meta, // 对应 `html.meta` 配置\n  title, // 对应 `html.title` 配置\n  inject, // 对应 `html.inject` 配置\n  favicon, // 对应 `html.favicon` 配置\n  template, // 对应 `html.template` 配置\n  filename, // 基于 `output.distPath` 和 `entryName` 生成\n  templateParameters, // 对应 `html.templateParameters` 配置\n  chunks: [entryName],\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["通过 ",(0,t.jsx)(n.code,{children:"tools.htmlPlugin"})," 可以修改 ",(0,t.jsx)(n.a,{href:"https://github.com/rspack-contrib/html-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"html-rspack-plugin"})," 的配置项。"]}),"\n",(0,t.jsxs)(n.p,{children:["Rsbuild 内部基于 ",(0,t.jsx)(n.a,{href:"https://github.com/rspack-contrib/html-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"html-rspack-plugin"})," 实现 HTML 相关的能力。它是 ",(0,t.jsx)(n.a,{href:"https://github.com/jantimon/html-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"html-webpack-plugin"})," 的一个 fork 版本，具备完全一致的功能和选项。"]}),"\n",(0,t.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,t.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,t.jsxs)(n.p,{children:["如果你需要修改 ",(0,t.jsx)(n.code,{children:"title"}),"、",(0,t.jsx)(n.code,{children:"template"}),"、",(0,t.jsx)(n.code,{children:"templateParameters"}),"、",(0,t.jsx)(n.code,{children:"meta"})," 等选项，推荐优先使用 Rsbuild 提供的对应 HTML 配置项，如 ",(0,t.jsx)(n.a,{href:"/config/html/title",children:"html.title"}),"、",(0,t.jsx)(n.a,{href:"/config/html/template",children:"html.template"})," 等。"]}),"\n",(0,t.jsxs)(n.p,{children:["这是因为这些配置间存在一些关联关系，Rsbuild 对于 HTML 配置项提供了一些内部的优化处理，例如，如果当前项目使用的 HTML 模板中已经包含了 ",(0,t.jsx)(n.code,{children:"<title>"})," 标签，那么 ",(0,t.jsx)(n.code,{children:"html.title"})," 将不会生效。\n"]})]})]}),"\n",(0,t.jsxs)(n.h2,{id:"object-类型",children:["Object 类型",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#object-类型",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["当 ",(0,t.jsx)(n.code,{children:"tools.htmlPlugin"})," 的值为 ",(0,t.jsx)(n.code,{children:"Object"})," 类型时，会与默认配置通过 ",(0,t.jsx)(n.code,{children:"Object.assign"})," 合并。"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    htmlPlugin: {\n      scriptLoading: 'blocking',\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"function-类型",children:["Function 类型",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#function-类型",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["当 ",(0,t.jsx)(n.code,{children:"tools.htmlPlugin"})," 为 Function 类型时："]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"第一个参数是默认配置的对象，可以直接修改该对象。"}),"\n",(0,t.jsx)(n.li,{children:"第二个参数是也是一个对象，包含了 entry 的名称和 entry 的值。"}),"\n",(0,t.jsx)(n.li,{children:"函数可以 return 一个新的对象作为最终的配置。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    htmlPlugin(config, { entryName, entryValue }) {\n      if (entryName === 'main') {\n        config.scriptLoading = 'blocking';\n      }\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"禁用-html",children:["禁用 HTML",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#禁用-html",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["将 ",(0,t.jsx)(n.code,{children:"tools.htmlPlugin"})," 配置为 ",(0,t.jsx)(n.code,{children:"false"}),"，可以禁用 Rsbuild 内置的 ",(0,t.jsx)(n.code,{children:"html-rspack-plugin"})," 插件，此时将不会生成 HTML 产物。"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    htmlPlugin: false,\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"示例",children:["示例",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,t.jsxs)(n.h3,{id:"修改-html-文件名",children:["修改 HTML 文件名",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#修改-html-文件名",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["通过 ",(0,t.jsx)(n.code,{children:"filename"})," 选项可以修改 HTML 产物的文件名。"]}),"\n",(0,t.jsxs)(n.p,{children:["例如，在生产模式构建时，可以在文件名上添加 ",(0,t.jsx)(n.code,{children:"hash"}),"："]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"html-压缩",children:["HTML 压缩",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html-压缩",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Rsbuild 目前不对 HTML 文件进行压缩，如果你需要压缩 HTML 文件，可以使用 ",(0,t.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-html-minifier-terser",target:"_blank",rel:"noopener noreferrer",children:"rsbuild-plugin-html-minifier-terser 插件"}),"。"]})]})}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}let h=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["zh%2Fconfig%2Ftools%2Fhtml-plugin.mdx"]={toc:[{text:"Object 类型",id:"object-类型",depth:2},{text:"Function 类型",id:"function-类型",depth:2},{text:"禁用 HTML",id:"禁用-html",depth:2},{text:"示例",id:"示例",depth:2},{text:"修改 HTML 文件名",id:"修改-html-文件名",depth:3},{text:"HTML 压缩",id:"html-压缩",depth:2}],title:"tools.htmlPlugin",frontmatter:{}}}}]);
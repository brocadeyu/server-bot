"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1738"],{56951:function(e,n,r){r.r(n),r.d(n,{default:function(){return c}});var s=r(55367),i=r(26971),l=r(38146);function t(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",pre:"pre",code:"code",blockquote:"blockquote",h3:"h3",div:"div",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"webpack",children:["Webpack",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#webpack",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"This section introduces how to migrate a project using webpack to Rsbuild."}),"\n",(0,s.jsxs)(n.h2,{id:"installing-dependencies",children:["Installing Dependencies",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installing-dependencies",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"First, you need to replace the npm dependencies of webpack with Rsbuild's dependencies."}),"\n","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Remove webpack dependencies:"}),"\n"]}),"\n",(0,s.jsx)(l.PackageManagerTabs,{command:"remove webpack webpack-cli webpack-dev-server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install Rsbuild dependencies:"}),"\n"]}),"\n",(0,s.jsx)(l.PackageManagerTabs,{command:"add @rsbuild/core -D"}),"\n",(0,s.jsxs)(n.h2,{id:"updating-npm-scripts",children:["Updating npm scripts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#updating-npm-scripts",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Next, you need to update the npm scripts in your package.json to use Rsbuild's CLI commands."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="package.json"',children:'{\n  "scripts": {\n-   "serve": "webpack serve -c webpack.config.js",\n-   "build": "webpack build -c webpack.config.js",\n+   "dev": "rsbuild dev",\n+   "build": "rsbuild build"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"create-configuration-file",children:["Create Configuration File",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-configuration-file",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Create a Rsbuild configuration file ",(0,s.jsx)(n.code,{children:"rsbuild.config.ts"})," in the same directory as package.json, and add the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/guide/basic/configure-rsbuild",children:"Configure Rsbuild"})," for more."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"configuration-migration",children:["Configuration Migration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-migration",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In a webpack project, there might be some complex ",(0,s.jsx)(n.code,{children:"webpack.config.js"})," configuration files."]}),"\n",(0,s.jsx)(n.p,{children:"After migrating to Rsbuild, most webpack configurations are built-in and do not require manual configuration, such as output, resolve, module.rules, etc."}),"\n",(0,s.jsx)(n.p,{children:"For the few webpack configurations that need to be migrated, you can choose the following options:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use the ",(0,s.jsx)(n.a,{href:"/config/tools/rspack",children:"tools.rspack"})," option (Rspack and webpack configurations are basically equivalent)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  tools: {\n    rspack: {\n      plugins: [new SomeWebpackPlugin()],\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use encapsulated configs in Rsbuild, for example, options for css-loader can be set through ",(0,s.jsx)(n.a,{href:"/config/tools/css-loader",children:"tools.cssLoader"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/guide/basic/configure-rspack",children:"Configure Rspack"})," for more."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"build-entry",children:["Build Entry",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-entry",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["webpack uses the ",(0,s.jsx)(n.code,{children:"entry"})," field to set the build entry. In Rsbuild, you can use ",(0,s.jsx)(n.a,{href:"/config/source/entry",children:"source.entry"})," to set it."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  source: {\n    entry: {\n      foo: './src/pages/foo/index.ts',\n      bar: './src/pages/bar/index.ts',\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"cleaning-up-config",children:["Cleaning Up Config",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cleaning-up-config",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Since Rsbuild has built-in some common loaders and plugins, you can remove the following dependencies, which will significantly improve the dependency installation speed of the project:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"css-loader"}),"\n",(0,s.jsx)(n.li,{children:"babel-loader"}),"\n",(0,s.jsx)(n.li,{children:"style-loader"}),"\n",(0,s.jsx)(n.li,{children:"postcss-loader"}),"\n",(0,s.jsx)(n.li,{children:"html-webpack-plugin"}),"\n",(0,s.jsx)(n.li,{children:"mini-css-extract-plugin"}),"\n",(0,s.jsx)(n.li,{children:"autoprefixer"}),"\n",(0,s.jsx)(n.li,{children:"@babel/core"}),"\n",(0,s.jsx)(n.li,{children:"@babel/preset-env"}),"\n",(0,s.jsx)(n.li,{children:"@babel/preset-typescript"}),"\n",(0,s.jsx)(n.li,{children:"@babel/runtime"}),"\n",(0,s.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsx)(n.p,{children:"The above only lists some of the common dependencies that can be removed. In actual webpack projects, there may be many other dependencies, please handle them as appropriate."})})]}),"\n",(0,s.jsxs)(n.h3,{id:"using-plugins",children:["Using Plugins",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#using-plugins",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild offers a rich set of plugins that provide out-of-the-box support for common scenarios. You can refer to the ",(0,s.jsx)(n.a,{href:"/plugins/list/index",children:"Plugin List"})," documentation to learn about these plugins."]}),"\n",(0,s.jsx)(n.p,{children:"Taking a React project as an example, let's see how to integrate Rsbuild plugins. First, you can remove some React-related build dependencies that are already built into the Rsbuild React plugin, such as:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"react-refresh"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"@babel/preset-react"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"@pmmmwh/react-refresh-webpack-plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Then see the ",(0,s.jsx)(n.a,{href:"/plugins/list/plugin-react",children:"React Plugin"})," documentation, register it and use it as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"import { defineConfig } from '@rsbuild/core';\n+import { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n+  plugins: [pluginReact()],\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"Most of the common webpack loaders and plugins can still be used in Rsbuild, but we recommend prioritizing the plugins provided by Rsbuild. This can further simplify your configuration. Below is their mapping relationship:"}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"webpack"}),"\n",(0,s.jsx)(n.th,{children:"Rsbuild"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@babel/preset-react",target:"_blank",rel:"noopener noreferrer",children:"@babel/preset-react"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-react",children:"React Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/vue-loader",target:"_blank",rel:"noopener noreferrer",children:"vue-loader"})}),"\n",(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"/plugins/list/plugin-vue",children:"Vue Plugin"})," or ",(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue2",target:"_blank",rel:"noopener noreferrer",children:"Vue 2 Plugin"})]}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/svelte-loader",target:"_blank",rel:"noopener noreferrer",children:"svelte-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svelte",children:"Svelte Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-preset-solid",target:"_blank",rel:"noopener noreferrer",children:"babel-preset-solid"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-solid",children:"Solid Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-loader",target:"_blank",rel:"noopener noreferrer",children:"babel-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-babel",children:"Babel Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/sass-loader",target:"_blank",rel:"noopener noreferrer",children:"sass-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-sass",children:"Sass Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/less-loader",target:"_blank",rel:"noopener noreferrer",children:"less-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-less",children:"Less Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/stylus-loader",target:"_blank",rel:"noopener noreferrer",children:"stylus-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-stylus",children:"Stylus Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/mdx-loader",target:"_blank",rel:"noopener noreferrer",children:"mdx-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-mdx",target:"_blank",rel:"noopener noreferrer",children:"MDX Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/pug-loader",target:"_blank",rel:"noopener noreferrer",children:"pug-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-pug",target:"_blank",rel:"noopener noreferrer",children:"Pug Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/yaml-loader",target:"_blank",rel:"noopener noreferrer",children:"yaml-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-yaml",target:"_blank",rel:"noopener noreferrer",children:"Yaml Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/toml-loader",target:"_blank",rel:"noopener noreferrer",children:"toml-loader"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-toml",target:"_blank",rel:"noopener noreferrer",children:"Toml Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@svgr/webpack",target:"_blank",rel:"noopener noreferrer",children:"@svgr/webpack"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/plugins/list/plugin-svgr",children:"SVGR Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/fork-ts-checker-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"fork-ts-checker-webpack-plugin"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-type-check",target:"_blank",rel:"noopener noreferrer",children:"@rsbuild/plugin-type-check"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/node-polyfill-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"node-polyfill-webpack-plugin"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-node-polyfill",target:"_blank",rel:"noopener noreferrer",children:"Node Polyfill Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vue/babel-plugin-jsx",target:"_blank",rel:"noopener noreferrer",children:"@vue/babel-plugin-jsx"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue-jsx",target:"_blank",rel:"noopener noreferrer",children:"Vue JSX Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@vue/babel-preset-jsx",target:"_blank",rel:"noopener noreferrer",children:"@vue/babel-preset-jsx"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-vue2-jsx",target:"_blank",rel:"noopener noreferrer",children:"Vue 2 JSX Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"eslint-webpack-plugin"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rspack-contrib/rsbuild-plugin-eslint",target:"_blank",rel:"noopener noreferrer",children:"ESLint Plugin"})}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-plugin-styled-components",target:"_blank",rel:"noopener noreferrer",children:"babel-plugin-styled-components"})}),"\n",(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rsbuild-contrib/rsbuild-plugin-styled-components",target:"_blank",rel:"noopener noreferrer",children:"Styled Components Plugin"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"configure-dev-server",children:["Configure Dev Server",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configure-dev-server",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Rsbuild does not support the use of Rspack's ",(0,s.jsx)(n.a,{href:"https://rspack.dev/config/dev-server",target:"_blank",rel:"noopener noreferrer",children:"devServer"})," config. Please refer to ",(0,s.jsx)(n.a,{href:"/guide/basic/server#rspack-dev-server",children:"Rspack Dev Server"})," for replacement."]}),"\n",(0,s.jsxs)(n.h2,{id:"validating-results",children:["Validating Results",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#validating-results",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["After completing the above steps, you have completed the basic migration from webpack to Rsbuild. You can now run the ",(0,s.jsx)(n.code,{children:"npm run dev"})," command to try starting the dev server."]}),"\n",(0,s.jsx)(n.p,{children:"If you encounter any issues during the build process, please debug according to the error log, or check the webpack configuration to see if there are any necessary configurations that have not been migrated to Rsbuild."}),"\n",(0,s.jsxs)(n.h2,{id:"contents-supplement",children:["Contents Supplement",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contents-supplement",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The current document only covers part of the migration process. If you find suitable content to add, feel free to contribute to the documentation via pull request \uD83E\uDD1D."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The documentation for rsbuild can be found in the ",(0,s.jsx)(n.a,{href:"https://github.com/web-infra-dev/rsbuild/tree/main/website",target:"_blank",rel:"noopener noreferrer",children:"rsbuild/website"})," directory."]}),"\n"]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}let c=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fguide%2Fmigration%2Fwebpack.mdx"]={toc:[{text:"Installing Dependencies",id:"installing-dependencies",depth:2},{text:"Updating npm scripts",id:"updating-npm-scripts",depth:2},{text:"Create Configuration File",id:"create-configuration-file",depth:2},{text:"Configuration Migration",id:"configuration-migration",depth:2},{text:"Build Entry",id:"build-entry",depth:3},{text:"Cleaning Up Config",id:"cleaning-up-config",depth:3},{text:"Using Plugins",id:"using-plugins",depth:3},{text:"Configure Dev Server",id:"configure-dev-server",depth:3},{text:"Validating Results",id:"validating-results",depth:2},{text:"Contents Supplement",id:"contents-supplement",depth:2}],title:"Webpack",frontmatter:{}}}}]);
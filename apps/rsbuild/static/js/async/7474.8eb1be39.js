"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["7474"],{96536:function(e,n,c){c.r(n),c.d(n,{default:function(){return l}});var r=c(55367),s=c(26971);function i(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h2:"h2"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"securitynonce",children:["security.nonce",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#securitynonce",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type Nonce = string;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"为 HTML 所引入的脚本资源添加随机属性值 nonce，使浏览器在解析到带有匹配 nonce 值的内联脚本时，能判断该脚本是否能执行。"}),"\n",(0,r.jsxs)(n.h2,{id:"什么是-nonce",children:["什么是 nonce",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#什么是-nonce",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["nonce 机制在 Content Security Policy（CSP，内容安全策略）中起到关键作用，用于提升网页安全性。其允许开发者在 CSP 中为内联 ",(0,r.jsx)(n.code,{children:"<script>"})," 标签和 ",(0,r.jsx)(n.code,{children:"<style"})," 标签定义一个唯一且随机的字符串值，即 ",(0,r.jsx)(n.code,{children:"nonce"}),"。"]}),"\n",(0,r.jsxs)(n.p,{children:["浏览器在解析到带有匹配 ",(0,r.jsx)(n.code,{children:"nonce"})," 值的内联脚本时，会允许其执行或应用，否则 CSP 将阻止其运行。这样可以有效地防止潜在的跨站脚本（XSS）攻击。值得注意的是，每次页面加载时，都应该生成新的 nonce 值。"]}),"\n",(0,r.jsx)(n.p,{children:"关于 nonce 的更多内容，可以参考："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce",target:"_blank",rel:"noopener noreferrer",children:"nonce - MDN"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://webpack.js.org/guides/csp/",target:"_blank",rel:"noopener noreferrer",children:"webpack - Content Security Policies"})}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Rsbuild 不会开启 ",(0,r.jsx)(n.code,{children:"nonce"}),"，你可以按照需求定义该值："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  security: {\n    nonce: 'CSP_NONCE_PLACEHOLDER',\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"通常，我们可以在项目中可以定义一个固定值，并在 Nginx、Web Server、网关等响应下游的服务器上，统一替换成随机值。"}),"\n",(0,r.jsxs)(n.h2,{id:"生效范围",children:["生效范围",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#生效范围",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"security.nonce"})," 选项会为以下标签添加 nonce 属性："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["由 Rsbuild 生成的所有 ",(0,r.jsx)(n.code,{children:"<script>"})," 标签"]}),"\n",(0,r.jsxs)(n.li,{children:["由 Rsbuild 生成的所有 ",(0,r.jsx)(n.code,{children:"<style>"})," 标签"]}),"\n",(0,r.jsxs)(n.li,{children:["由 Rspack 动态生成的 ",(0,r.jsx)(n.code,{children:"<script>"})," 标签（通过 ",(0,r.jsx)(n.a,{href:"https://rspack.dev/api/runtime-api/module-variables#__webpack_nonce__",target:"_blank",rel:"noopener noreferrer",children:"__webpack_nonce__"})," 变量实现）"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["对于 HTML 模板文件中已存在的 ",(0,r.jsx)(n.code,{children:"<script>"})," 或 ",(0,r.jsx)(n.code,{children:"<style>"})," 标签，Rsbuild 不会对其进行修改，你可以直接在模板中添加 ",(0,r.jsx)(n.code,{children:"nonce"})," 属性。"]}),"\n",(0,r.jsxs)(n.p,{children:["对于通过 JavaScript 动态插入的 ",(0,r.jsx)(n.code,{children:"<script>"})," 或 ",(0,r.jsx)(n.code,{children:"<style>"})," 标签，同样需要自行设置 ",(0,r.jsx)(n.code,{children:"nonce"})," 属性。"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let l=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fconfig%2Fsecurity%2Fnonce.mdx"]={toc:[{text:"什么是 nonce",id:"什么是-nonce",depth:2},{text:"示例",id:"示例",depth:2},{text:"生效范围",id:"生效范围",depth:2}],title:"security.nonce",frontmatter:{}}}}]);
"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1180"],{27153:function(e,r,n){n.r(r),n.d(r,{default:function(){return d}});var s=n(55367),i=n(26971);function l(e){let r=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",img:"img",ul:"ul",li:"li",h2:"h2",code:"code",pre:"pre"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"rsbuild-06-发布",children:["Rsbuild 0.6 发布",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rsbuild-06-发布",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"April 10, 2024"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://assets.rspack.dev/rsbuild/rsbuild-banner-v0-6.png",alt:""})}),"\n",(0,s.jsx)(r.p,{children:"Rsbuild 0.6 已与 Rspack 0.6 同步发布！"}),"\n",(0,s.jsx)(r.p,{children:"主要变更："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"升级 Rspack 0.6"}),"\n",(0,s.jsx)(r.li,{children:"默认启用 error overlay"}),"\n",(0,s.jsx)(r.li,{children:"支持 Vue JSX HMR"}),"\n",(0,s.jsx)(r.li,{children:"全新的 transform 插件 API"}),"\n",(0,s.jsx)(r.li,{children:"默认端口调整为 3000"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"升级-rspack-06",children:["升级 Rspack 0.6",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#升级-rspack-06",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Rsbuild 已将依赖的 Rspack 升级至 0.6 版本，并适配了 Rspack 0.6 包含的 CSS Modules 不兼容更新。"}),"\n",(0,s.jsxs)(r.p,{children:["在新版本中，Rspack 默认开启了新版 tree shaking 算法，使产物体积和产物稳定性得到显著提升。请参考 ",(0,s.jsx)(r.a,{href:"https://rspack.dev/blog/announcing-0-6",target:"_blank",rel:"noopener noreferrer",children:"Rspack 0.6 发布公告"})," 了解更多。"]}),"\n",(0,s.jsxs)(r.h2,{id:"默认启用-error-overlay",children:["默认启用 error overlay",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#默认启用-error-overlay",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["从 Rsbuild 0.6 开始，",(0,s.jsx)(r.a,{href:"/config/dev/client",children:"dev.client.overlay"})," 的默认值调整为 ",(0,s.jsx)(r.code,{children:"true"}),"。这意味着当出现编译错误时，Rsbuild 将默认弹出 error overlay 来展示错误信息："]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"https://assets.rspack.dev/rsbuild/assets/rsbuild-error-overlay.png",alt:""})}),"\n",(0,s.jsxs)(r.p,{children:["如果你不需要此功能，可以将 ",(0,s.jsx)(r.code,{children:"dev.client.overlay"})," 设置为 ",(0,s.jsx)(r.code,{children:"false"})," 来禁用："]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  dev: {\n    client: {\n      overlay: false,\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"支持-vue-jsx-hmr",children:["支持 Vue JSX HMR",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#支持-vue-jsx-hmr",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"@rsbuild/plugin-vue-jsx"})," 现已支持 JSX HMR，当你在 Vue 3 应用中修改 JSX 代码时，会自动触发模块热替换，并保留当前页面的状态。"]}),"\n",(0,s.jsxs)(r.p,{children:["该功能由社区贡献者 ",(0,s.jsx)(r.a,{href:"https://github.com/liyincode",target:"_blank",rel:"noopener noreferrer",children:"@liyincode"})," 实现 ❤️，并且发布为独立的 ",(0,s.jsx)(r.a,{href:"https://github.com/liyincode/babel-plugin-vue-jsx-hmr",target:"_blank",rel:"noopener noreferrer",children:"babel-plugin-vue-jsx-hmr"})," 包，以便在 Rsbuild 以外的项目中使用。"]}),"\n",(0,s.jsxs)(r.h2,{id:"全新的-transform-api",children:["全新的 transform API",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#全新的-transform-api",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Rsbuild 插件现已支持 ",(0,s.jsx)(r.a,{href:"/plugins/dev/core#apitransform",children:"transform API"}),"，这可以理解为 Rspack loader 的一个轻量化实现，它提供了简单易用的 API，并在底层自动调用 Rspack loader 进行代码转换。"]}),"\n",(0,s.jsxs)(r.p,{children:["在 Rsbuild 插件中，你可以通过 ",(0,s.jsx)(r.code,{children:"api.transform"})," 快速实现代码转换功能，能够满足大部分常见场景，而无须学习 Rspack loader 的编写方法。"]}),"\n",(0,s.jsx)(r.p,{children:"比如匹配以 .pug 为后缀的模块，并转换为 JavaScript 代码："}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import pug from 'pug';\n\nconst pluginPug = () => ({\n  name: 'my-pug-plugin',\n  setup(api) {\n    api.transform({ test: /\\.pug$/ }, ({ code }) => {\n      const templateCode = pug.compileClient(code, {});\n      return `${templateCode}; module.exports = template;`;\n    });\n  },\n});\n"})}),"\n",(0,s.jsxs)(r.p,{children:["对于一些复杂的代码转换场景，",(0,s.jsx)(r.code,{children:"api.transform"})," 可能无法满足，此时你可以使用 Rspack loader 进行实现。"]}),"\n",(0,s.jsxs)(r.h2,{id:"默认端口调整为-3000",children:["默认端口调整为 3000",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#默认端口调整为-3000",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Rsbuild 已将 ",(0,s.jsx)(r.a,{href:"/config/server/port",children:"server.port"})," 的默认值从 ",(0,s.jsx)(r.code,{children:"8080"})," 调整到 ",(0,s.jsx)(r.code,{children:"3000"}),"。"]}),"\n",(0,s.jsx)(r.p,{children:"端口 3000 通常用于 web 开发领域，也是 create-react-app 等工具默认使用的端口。通过更改默认端口为 3000，可以避免在使用 8080 时可能遇到的端口冲突问题。"}),"\n",(0,s.jsx)(r.p,{children:"如果你需要使用 8080 端口，可以手动设置："}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default defineConfig({\n  server: {\n    port: 8080,\n  },\n});\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,i.ah)(),e.components);return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}let d=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["zh%2Fcommunity%2Freleases%2Fv0-6.mdx"]={toc:[{text:"升级 Rspack 0.6",id:"升级-rspack-06",depth:2},{text:"默认启用 error overlay",id:"默认启用-error-overlay",depth:2},{text:"支持 Vue JSX HMR",id:"支持-vue-jsx-hmr",depth:2},{text:"全新的 transform API",id:"全新的-transform-api",depth:2},{text:"默认端口调整为 3000",id:"默认端口调整为-3000",depth:2}],title:"Rsbuild 0.6 发布",frontmatter:{published_at:"2024-04-10T18:00:00.000Z"}}}}]);
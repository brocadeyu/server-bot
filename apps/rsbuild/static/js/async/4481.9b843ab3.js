"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4481"],{96664:function(e,n,s){s.r(n),s.d(n,{default:function(){return t}});var r=s(55367),i=s(26971);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",h3:"h3",code:"code",pre:"pre",div:"div",strong:"strong",ol:"ol",blockquote:"blockquote"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"部署静态站点",children:["部署静态站点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#部署静态站点",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"本章节介绍如何将 Rsbuild 的构建产物部署为静态站点。"}),"\n",(0,r.jsxs)(n.h2,{id:"背景信息",children:["背景信息",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#背景信息",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"在开始进行部署前，你需要了解一些背景信息："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"用于构建和预览产物的 CLI 命令。"}),"\n",(0,r.jsx)(n.li,{children:"构建产物的目录结构。"}),"\n",(0,r.jsx)(n.li,{children:"静态资源的 URL 前缀。"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"构建命令",children:["构建命令",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建命令",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Rsbuild 提供的构建命令："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/guide/basic/cli#rsbuild-build",children:"build 命令"}),"，用于生成部署到生产环境的构建产物；"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/guide/basic/cli#rsbuild-preview",children:"preview 命令"}),"，用于在本地预览生产构建的产物, 注意你需要提前执行 ",(0,r.jsx)(n.code,{children:"rsbuild build"})," 命令构建出对应产物。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "scripts": {\n    "build": "rsbuild build",\n    "preview": "rsbuild preview"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsx)(n.p,{children:"preview 命令仅用于本地预览，请勿将它用于生产服务器，因为它不是为此而设计的。"})})]}),"\n",(0,r.jsxs)(n.h3,{id:"产物目录",children:["产物目录",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#产物目录",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Rsbuild 的构建产物通常包含 HTML、JS、CSS 等文件，默认输出到 ",(0,r.jsx)(n.code,{children:"dist"})," 目录下，dist 目录的名称和结构可以通过一些配置项来修改，请参考 ",(0,r.jsx)(n.a,{href:"/guide/basic/output-files",children:"构建产物目录"})," 章节来了解更多。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dist\n├── static\n│   ├── image\n│   ├── css\n│   └── js\n└── [name].html\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"静态资源前缀",children:["静态资源前缀",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#静态资源前缀",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["我们可以把构建产物分为两部分：",(0,r.jsx)(n.strong,{children:"HTML 文件"}),"和",(0,r.jsx)(n.strong,{children:"静态资源"}),"。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["HTML 文件指的是产物目录中 ",(0,r.jsx)(n.code,{children:".html"})," 后缀的文件，它们通常需要被部署到服务器上。"]}),"\n",(0,r.jsxs)(n.li,{children:["静态资源位于产物目录中的 ",(0,r.jsx)(n.code,{children:"static"})," 目录，里面包含了 JavaScript、CSS、图片等资源，它们可以被部署到服务器或者 CDN 上。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["如果静态资源被部署到了服务器的某个子目录下，你可以将 ",(0,r.jsx)(n.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})," 配置为一个 base 路径："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: '/some-base-folder/',\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["你想要将静态资源放到 CDN 上，以保证更好的访问性能，而不是像 HTML 一样直接放到服务器上，那么你就需要将 ",(0,r.jsx)(n.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})," 配置为 CDN 地址，使应用能够正确的引用到这些静态资源："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: 'https://cdn.com/path/',\n  },\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"这样，在 HTML 中引用静态资源的时候，就会自动加上指定的前缀，例如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script src="https://cdn.com/path/static/js/index.some-hash.js"><\/script>\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"github-pages",children:["GitHub Pages",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#github-pages",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"GitHub Pages"})," 是一个静态站点托管服务，可以直接从 GitHub 上的存储库获取 HTML、CSS 和 JavaScript 文件。"]}),"\n",(0,r.jsx)(n.p,{children:"下面是部署到 GitHub Pages 的步骤示例。"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["通过 ",(0,r.jsx)(n.a,{href:"/config/output/asset-prefix",children:"output.assetPrefix"})," 设置静态资源的 URL 前缀。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"import { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    // 请将 <REPO_NAME> 替换为仓库的名称。\n    // 比如 \"/my-project/\"\n    assetPrefix: '/<REPO_NAME>/',\n  },\n});\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:'打开 GitHub 仓库的 "Settings" 页面，点击左侧菜单的 "Pages" 选项，进入 GitHub Pages 的配置页面。'}),"\n",(0,r.jsx)(n.li,{children:'选择 "Source" -> "GitHub Actions"，点击 "create your own" 来创建 GitHub Action 配置文件。'}),"\n",(0,r.jsxs)(n.li,{children:["将以下内容粘贴到输入框，将文件命名为 ",(0,r.jsx)(n.code,{children:"github-pages.yml"}),"（你可以根据需要来调整文件的内容和名称）。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",meta:'title="github-pages.yml"',children:"# 用于构建和部署 Rsbuild 站点到 GitHub Pages 的示例工作流\nname: Rsbuild Deployment\n\non:\n  # 在推送到默认分支时触发\n  push:\n    branches: ['main']\n  # 允许你从 Actions Tabs 手动运行这个工作流\n  workflow_dispatch:\n\n# 设置 GITHUB_TOKEN 的权限以允许部署到 GitHub Pages\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\n# 同时只允许一个部署执行\nconcurrency:\n  group: 'pages'\n  cancel-in-progress: false\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Use Node.js 20\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n\n      # 如果你使用其他的包管理器，如 yarn 或 pnpm，\n      # 你需要先安装它们\n      - name: Install dependencies\n        run: npm i\n\n      - name: Build\n        run: npm run build\n\n      - name: Setup Pages\n        uses: actions/configure-pages@v5\n\n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: './dist'\n\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["提交，等待 GitHub Actions 执行，执行完成后，你可以访问 ",(0,r.jsx)(n.code,{children:"https://<USERNAME>.github.io/<REPO_NAME>/"})," 来查看部署后的页面。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"netlify",children:["Netlify",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#netlify",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer",children:"Netlify Core"})," 是一个针对开发者的前端云解决方案，使用现代、可组合的工具构建和部署具有未来兼容性的数字解决方案。"]}),"\n",(0,r.jsxs)(n.h3,{id:"新增站点",children:["新增站点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#新增站点",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Netlify 提供了详细的指南，你可以按照 ",(0,r.jsx)(n.a,{href:"https://docs.netlify.com/welcome/add-new-site/",target:"_blank",rel:"noopener noreferrer",children:"Netlify - Add new site"})," 操作，配置一些基础信息，就可以开始部署了。"]}),"\n",(0,r.jsx)(n.p,{children:"你需要配置以下两个字段："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build command"}),"：构建命令，填写项目的 build 命令即可，通常是 ",(0,r.jsx)(n.code,{children:"npm run build"}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publish directory"}),"：产物目录，填写项目中的产物目录，默认是 ",(0,r.jsx)(n.code,{children:"dist"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["然后点击 ",(0,r.jsx)(n.strong,{children:"Deploy site"})," 按钮，就可以开始部署了。"]}),"\n",(0,r.jsxs)(n.h3,{id:"配置域名",children:["配置域名",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置域名",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:'如果你想要使你的站点可以通过你自己的域名访问，那么你可以在 Netlify 的 "Domain management" 栏目中进行配置。'}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["详细指南：",(0,r.jsx)(n.a,{href:"https://docs.netlify.com/domains-https/custom-domains/",target:"_blank",rel:"noopener noreferrer",children:"Netlify - Custom domains"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"vercel",children:["Vercel",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vercel",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://vercel.com/",target:"_blank",rel:"noopener noreferrer",children:"Vercel"})," 是一个为开发者提供的平台，它提供了构建和快速部署网络应用所需的工具、工作流程和基础设施，无需额外的配置。"]}),"\n",(0,r.jsxs)(n.h3,{id:"新增站点-1",children:["新增站点",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#新增站点-1",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Vercel 提供了详细的指南，你可以按照 ",(0,r.jsx)(n.a,{href:"https://vercel.com/docs/projects/overview",target:"_blank",rel:"noopener noreferrer",children:"Vercel - Projects"})," 操作，在 dashboard 中创建一个项目，配置一些基础信息，就可以开始部署了。"]}),"\n",(0,r.jsx)(n.p,{children:'你只需要配置 "Build and Output Settings" 下的字段：'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Output directory"}),"：产物目录，填写项目中的产物目录，默认是 ",(0,r.jsx)(n.code,{children:"dist"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["然后点击 ",(0,r.jsx)(n.strong,{children:"Deploy"})," 按钮，就可以开始部署了。"]}),"\n",(0,r.jsxs)(n.h3,{id:"配置域名-1",children:["配置域名",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置域名-1",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:'如果你想要使你的站点可以通过你自己的域名访问，那么你可以在 Vercel 的 "Domains" 栏目中进行配置。'}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["详细指南：",(0,r.jsx)(n.a,{href:"https://vercel.com/docs/projects/domains",target:"_blank",rel:"noopener noreferrer",children:"Vercel - Domains"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"cloudflare-pages",children:["Cloudflare Pages",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cloudflare-pages",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/pages/",target:"_blank",rel:"noopener noreferrer",children:"Cloudflare Pages"})," 是一个由 Cloudflare 提供的静态网站托管平台。"]}),"\n",(0,r.jsxs)(n.p,{children:["你可以按照 ",(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/pages/get-started/git-integration/",target:"_blank",rel:"noopener noreferrer",children:"Cloudflare Pages - Git integration guide"})," 操作，通过 Git 集成，将你的站点部署到 Cloudflare Pages。"]}),"\n",(0,r.jsx)(n.p,{children:'在进行配置时，你需要填写 "Build settings" 中的以下字段：'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build command"}),"：构建命令，填写项目的 build 命令即可，通常是 ",(0,r.jsx)(n.code,{children:"npm run build"}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build output directory"}),"：产物目录，填写项目中的产物目录，默认是 ",(0,r.jsx)(n.code,{children:"dist"}),"。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["然后点击 ",(0,r.jsx)(n.strong,{children:"Save and Deploy"})," 按钮，就可以开始部署了。"]})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}let t=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["zh%2Fguide%2Fbasic%2Fstatic-deploy.mdx"]={toc:[{text:"背景信息",id:"背景信息",depth:2},{text:"构建命令",id:"构建命令",depth:3},{text:"产物目录",id:"产物目录",depth:3},{text:"静态资源前缀",id:"静态资源前缀",depth:3},{text:"GitHub Pages",id:"github-pages",depth:2},{text:"Netlify",id:"netlify",depth:2},{text:"新增站点",id:"新增站点",depth:3},{text:"配置域名",id:"配置域名",depth:3},{text:"Vercel",id:"vercel",depth:2},{text:"新增站点",id:"新增站点-1",depth:3},{text:"配置域名",id:"配置域名-1",depth:3},{text:"Cloudflare Pages",id:"cloudflare-pages",depth:2}],title:"部署静态站点",frontmatter:{}}}}]);
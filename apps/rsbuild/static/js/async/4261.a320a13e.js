"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["4261"],{2902:function(e,n,r){r.r(n),r.d(n,{default:function(){return c}});var s=r(55367),l=r(26971);function d(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",blockquote:"blockquote",h2:"h2",div:"div"},(0,l.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"serveropen",children:["server.open",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serveropen",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type Open =\n  | boolean\n  | string\n  | string[]\n  | {\n      target?: string | string[];\n      before?: () => Promise<void> | void;\n    };\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"默认值："})," ",(0,s.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"server.open"})," 用于配置一组页面 URL，Rsbuild 会在启动 server 后自动在浏览器中打开这些页面。"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["你也可以使用 Rsbuild CLI 的 ",(0,s.jsx)(n.a,{href:"/guide/basic/cli#%E6%89%93%E5%BC%80%E9%A1%B5%E9%9D%A2",children:"--open"})," 选项来打开页面。当同时使用 ",(0,s.jsx)(n.code,{children:"server.open"})," 和 ",(0,s.jsx)(n.code,{children:"--open"})," 时，",(0,s.jsx)(n.code,{children:"--open"})," 的优先级更高。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"示例",children:["示例",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"server.open"})," 可以设置为如下的值。"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["打开项目的默认页面，默认为 ",(0,s.jsx)(n.code,{children:"http://localhost:<port>"}),"。如果配置了 ",(0,s.jsx)(n.a,{href:"/config/server/host",children:"server.host"}),"，则默认为 ",(0,s.jsx)(n.code,{children:"http://<host>:<port>"}),"。"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: true,\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"打开指定的页面："}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: 'http://localhost:3000',\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["打开指定的路径，等价于 ",(0,s.jsx)(n.code,{children:"http://localhost:<port>/home"}),"："]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: '/home',\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"打开多个页面："}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: ['/', '/about'],\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"打开一个非 localhost URL（配合 proxy 使用）："}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: 'http://www.example.com',\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"端口号占位符",children:["端口号占位符",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#端口号占位符",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild server 监听的端口号可能会发生变更。比如，当端口被占用时，Rsbuild 会自动递增端口号，直至找到一个可用端口。"}),"\n",(0,s.jsxs)(n.p,{children:["为了避免端口变化导致 ",(0,s.jsx)(n.code,{children:"server.open"})," 失效，你可以使用以下方法之一："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["开启 ",(0,s.jsx)(n.a,{href:"/config/server/strict-port",children:"server.strictPort"}),"。"]}),"\n",(0,s.jsxs)(n.li,{children:["使用 ",(0,s.jsx)(n.code,{children:"<port>"})," 占位符来指代当前端口号，Rsbuild 会将占位符替换为实际监听的端口号。"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: 'http://localhost:<port>/home',\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"打开指定浏览器",children:["打开指定浏览器",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#打开指定浏览器",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Rsbuild 默认会在当前系统的默认浏览器中打开页面。"}),"\n",(0,s.jsxs)(n.p,{children:["在 macOS 上，通过设置环境变量 ",(0,s.jsx)(n.code,{children:"BROWSER"}),"，你可以指定 dev server 在启动时打开的浏览器，支持如下的值："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Google Chrome Canary"}),"\n",(0,s.jsx)(n.li,{children:"Google Chrome Dev"}),"\n",(0,s.jsx)(n.li,{children:"Google Chrome Beta"}),"\n",(0,s.jsx)(n.li,{children:"Google Chrome"}),"\n",(0,s.jsx)(n.li,{children:"Microsoft Edge"}),"\n",(0,s.jsx)(n.li,{children:"Brave Browser"}),"\n",(0,s.jsx)(n.li,{children:"Vivaldi"}),"\n",(0,s.jsx)(n.li,{children:"Chromium"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"比如："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'BROWSER="Google Chrome Canary" npx rsbuild dev --open\n'})}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsxs)(n.p,{children:["你可以将 ",(0,s.jsx)(n.code,{children:"BROWSER"})," 设置在本地的 ",(0,s.jsx)(n.a,{href:"/guide/advanced/env-vars#env-file",children:".env.local"})," 文件中，这样能够避免影响其他开发者。\n"]})})]}),"\n",(0,s.jsxs)(n.h2,{id:"回调函数",children:["回调函数",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#回调函数",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["通过 ",(0,s.jsx)(n.code,{children:"open.before"}),"，可以在打开页面之前触发一个回调函数。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: {\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["当使用 ",(0,s.jsx)(n.code,{children:"open.before"})," 时，你可以通过 ",(0,s.jsx)(n.code,{children:"open.target"})," 来配置页面的 URLs。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default {\n  server: {\n    open: {\n      target: ['/', '/about'],\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let c=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["zh%2Fconfig%2Fserver%2Fopen.mdx"]={toc:[{text:"示例",id:"示例",depth:2},{text:"端口号占位符",id:"端口号占位符",depth:2},{text:"打开指定浏览器",id:"打开指定浏览器",depth:2},{text:"回调函数",id:"回调函数",depth:2}],title:"server.open",frontmatter:{}}}}]);
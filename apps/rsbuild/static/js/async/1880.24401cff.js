"use strict";(self.webpackChunkrsbuild_website=self.webpackChunkrsbuild_website||[]).push([["1880"],{66738:function(e,n,d){d.r(n),d.d(n,{default:function(){return c}});var i=d(55367),s=d(26971);function r(e){let n=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",h2:"h2",pre:"pre",h3:"h3"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"mode",children:["mode",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mode",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type:"})," ",(0,i.jsx)(n.code,{children:"'production' | 'development' | 'none'"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Version:"})," ",(0,i.jsx)(n.code,{children:">= 1.0.0"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Specify the build mode for Rsbuild, as each mode has different default behavior and optimizations. For example, the ",(0,i.jsx)(n.code,{children:"production"})," mode will compress code by default."]}),"\n",(0,i.jsxs)(n.p,{children:["The value of Rsbuild ",(0,i.jsx)(n.code,{children:"mode"})," is also be passed to the ",(0,i.jsx)(n.a,{href:"https://rspack.dev/config/mode",target:"_blank",rel:"noopener noreferrer",children:"mode"})," configuration of Rspack."]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,i.jsxs)(n.p,{children:["The value of ",(0,i.jsx)(n.code,{children:"mode"})," does not affect the loading results of the ",(0,i.jsx)(n.code,{children:".env"})," file, as the ",(0,i.jsx)(n.code,{children:".env"})," file is resolved before the Rsbuild configuration file."]}),"\n",(0,i.jsxs)(n.p,{children:["Rsbuild CLI supports using the ",(0,i.jsx)(n.code,{children:"--env-mode"})," option to specify the env mode. See ",(0,i.jsx)(n.a,{href:"/guide/advanced/env-vars#env-mode",children:'"Env mode"'})," for more details.\n"]})]})]}),"\n",(0,i.jsxs)(n.h2,{id:"default-values",children:["Default Values",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#default-values",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["The default value of ",(0,i.jsx)(n.code,{children:"mode"})," depends on the ",(0,i.jsx)(n.code,{children:"process.env.NODE_ENV"})," environment variable:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," is ",(0,i.jsx)(n.code,{children:"production"}),", the default value is ",(0,i.jsx)(n.code,{children:"production"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," is ",(0,i.jsx)(n.code,{children:"development"}),", the default value is ",(0,i.jsx)(n.code,{children:"development"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," has any other value, the default value is ",(0,i.jsx)(n.code,{children:"none"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you set the value of ",(0,i.jsx)(n.code,{children:"mode"}),", the value of ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," will be ignored."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="rsbuild.config.ts"',children:"export default {\n  mode: 'production',\n};\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"command-line",children:["Command Line",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#command-line",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"When using Rsbuild's command line:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsbuild dev"})," will set the default values of ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," and ",(0,i.jsx)(n.code,{children:"mode"})," to ",(0,i.jsx)(n.code,{children:"development"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsbuild build"})," and ",(0,i.jsx)(n.code,{children:"rsbuild preview"})," will set the default values of ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," and ",(0,i.jsx)(n.code,{children:"mode"})," to ",(0,i.jsx)(n.code,{children:"production"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"javascript-api",children:["JavaScript API",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#javascript-api",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"When using Rsbuild's JavaScript API:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/api/javascript-api/instance#rsbuildstartdevserver",children:"rsbuild.startDevServer"})," and ",(0,i.jsx)(n.a,{href:"/api/javascript-api/instance#rsbuildcreatedevserver",children:"rsbuild.createDevServer"})," will set the default values of ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," and ",(0,i.jsx)(n.code,{children:"mode"})," to ",(0,i.jsx)(n.code,{children:"development"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/api/javascript-api/instance#rsbuildbuild",children:"rsbuild.build"})," and ",(0,i.jsx)(n.a,{href:"/api/javascript-api/instance#rsbuildpreview",children:"rsbuild.preview"})," will set the default values of ",(0,i.jsx)(n.code,{children:"NODE_ENV"})," and ",(0,i.jsx)(n.code,{children:"mode"})," to ",(0,i.jsx)(n.code,{children:"production"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"development-mode",children:["Development Mode",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#development-mode",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value of ",(0,i.jsx)(n.code,{children:"mode"})," is ",(0,i.jsx)(n.code,{children:"development"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable HMR and register the ",(0,i.jsx)(n.a,{href:"https://rspack.dev/plugins/webpack/hot-module-replacement-plugin",target:"_blank",rel:"noopener noreferrer",children:"HotModuleReplacementPlugin"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Generate JavaScript source maps, but do not generate CSS source maps. See ",(0,i.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"})," for details."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"process.env.NODE_ENV"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"'development'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.MODE"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"'development'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.DEV"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.PROD"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"production-mode",children:["Production Mode",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#production-mode",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value of ",(0,i.jsx)(n.code,{children:"mode"})," is ",(0,i.jsx)(n.code,{children:"production"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable JavaScript code minification and register the ",(0,i.jsx)(n.a,{href:"https://rspack.dev/plugins/rspack/swc-js-minimizer-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"SwcJsMinimizerRspackPlugin"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Enable CSS code minification and register the ",(0,i.jsx)(n.a,{href:"https://rspack.dev/plugins/rspack/lightning-css-minimizer-rspack-plugin",target:"_blank",rel:"noopener noreferrer",children:"LightningCssMinimizerRspackPlugin"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Generated JavaScript and CSS filenames will have hash suffixes, see ",(0,i.jsx)(n.a,{href:"/config/output/filename-hash",children:"output.filenameHash"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Generated CSS Modules classnames will be shorter, see ",(0,i.jsx)(n.a,{href:"/config/output/css-modules#cssmoduleslocalidentname",children:"cssModules.localIdentName"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Do not generate JavaScript and CSS source maps, see ",(0,i.jsx)(n.a,{href:"/config/output/source-map",children:"output.sourceMap"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"process.env.NODE_ENV"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"'production'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.MODE"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"'production'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.DEV"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.PROD"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"none-mode",children:["None Mode",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#none-mode",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value of ",(0,i.jsx)(n.code,{children:"mode"})," is ",(0,i.jsx)(n.code,{children:"none"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Do not enable any optimizations."}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"process.env.NODE_ENV"})," in the source code will not be replaced."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.MODE"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"'none'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.DEV"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"import.meta.env.PROD"})," in the source code will be replaced with ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n"]})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}let c=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["en%2Fconfig%2Fmode.mdx"]={toc:[{text:"Default Values",id:"default-values",depth:2},{text:"Command Line",id:"command-line",depth:3},{text:"JavaScript API",id:"javascript-api",depth:3},{text:"Development Mode",id:"development-mode",depth:2},{text:"Production Mode",id:"production-mode",depth:2},{text:"None Mode",id:"none-mode",depth:2}],title:"mode",frontmatter:{}}}}]);